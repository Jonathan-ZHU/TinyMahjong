{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "cc",
    "Class",
    "extends",
    "Component",
    "properties",
    "onLoad",
    "vv",
    "hidehuas",
    "gameChild",
    "node",
    "getChildByName",
    "myself",
    "pengangroot",
    "realwidth",
    "director",
    "getVisibleSize",
    "width",
    "scale",
    "scaleX",
    "scaleY",
    "self",
    "on",
    "data",
    "console",
    "log",
    "detail",
    "onPengGangChanged",
    "seatData",
    "onHuaChanged",
    "onGameBein",
    "seats",
    "gameNetMgr",
    "i",
    "sides",
    "Array",
    "j",
    "side",
    "huasroot",
    "childrenCount",
    "children",
    "active",
    "hideSide",
    "angangs",
    "diangangs",
    "wangangs",
    "pengs",
    "chis",
    "localIndex",
    "getLocalIndex",
    "seatindex",
    "mahjongmgr",
    "getSide",
    "pre",
    "getFoldPre",
    "index",
    "gangs",
    "length",
    "mjid",
    "initPengAndGangs",
    "huas",
    "flag",
    "pgroot",
    "instantiate",
    "pengPrefabLeft",
    "pengPrefabSelf",
    "addChild",
    "y",
    "setLocalZOrder",
    "x",
    "sprites",
    "getComponentsInChildren",
    "Sprite",
    "mjid1",
    "concat",
    "pai",
    "pop",
    "sort",
    "a",
    "b",
    "parseInt",
    "s",
    "sprite",
    "name",
    "isGang",
    "spriteFrame",
    "getEmptySpriteFrame",
    "getSpriteFrameByMJID",
    "nowchild",
    "getComponent",
    "initHuas"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        if(!cc.vv){\r\n            return;\r\n        }\r\n        \r\n        \r\n        this.hidehuas();\r\n        \r\n        var gameChild = this.node.getChildByName(\"game\");\r\n        var myself = gameChild.getChildByName(\"myself\");\r\n        var pengangroot = myself.getChildByName(\"penggangs\");\r\n        var realwidth = cc.director.getVisibleSize().width;\r\n        var scale = realwidth / 1280;\r\n        pengangroot.scaleX *= scale;\r\n        pengangroot.scaleY *= scale;\r\n        \r\n        var self = this;\r\n        this.node.on('peng_notify',function(data){\r\n            //刷新所有的牌\r\n            console.log(\"penggang plat\");\r\n            console.log(data.detail);\r\n            var data = data.detail;\r\n            self.onPengGangChanged(data);\r\n        });\r\n        \r\n        this.node.on('gang_notify',function(data){\r\n            //刷新所有的牌\r\n            //console.log(data.detail);\r\n            var data = data.detail;\r\n            self.onPengGangChanged(data.seatData);\r\n        });\r\n        \r\n        this.node.on('chi_notify',function(data){\r\n            //刷新所有的牌\r\n            console.log(\"penggang plat\");\r\n            console.log(data.detail);\r\n            var data = data.detail;\r\n            self.onPengGangChanged(data);\r\n        });\r\n        \r\n        this.node.on('gethua_notify',function(data){\r\n            console.log(\"gethua_notify accept\");\r\n            //刷新所有的牌\r\n            var data = data.detail;\r\n            self.onHuaChanged(data);\r\n            \r\n        });\r\n        \r\n        this.node.on('game_begin',function(data){\r\n            self.onGameBein();\r\n        });\r\n        \r\n        var seats = cc.vv.gameNetMgr.seats;\r\n        for(var i in seats){\r\n            this.onPengGangChanged(seats[i]);\r\n        }\r\n    },\r\n    \r\n    //隐藏所有花牌\r\n    hidehuas:function(){\r\n        //隐藏所有花牌\r\n        var gameChild = this.node.getChildByName(\"game\");\r\n        var sides = new Array(\r\n            \"right\",\r\n            \"left\",\r\n            \"up\",\r\n            \"myself\");\r\n        for(var j= 0; j < 4 ; j++){\r\n            var side = gameChild.getChildByName(sides[j]);\r\n            var huasroot = side.getChildByName(\"huas\");\r\n            for(var i = 0 ; i < huasroot.childrenCount ; i++){\r\n                huasroot.children[i].active = false;\r\n            }\r\n        }\r\n        \r\n    },\r\n    \r\n    onGameBein:function(){\r\n        this.hideSide(\"myself\");\r\n        this.hideSide(\"right\");\r\n        this.hideSide(\"up\");\r\n        this.hideSide(\"left\");\r\n        this.hidehuas();\r\n    },\r\n    \r\n    hideSide:function(side){\r\n        var gameChild = this.node.getChildByName(\"game\");\r\n        var myself = gameChild.getChildByName(side);\r\n        var pengangroot = myself.getChildByName(\"penggangs\");\r\n        if(pengangroot){\r\n            for(var i = 0; i < pengangroot.childrenCount; ++i){\r\n                pengangroot.children[i].active = false;\r\n            }            \r\n        }\r\n    },\r\n    \r\n    onPengGangChanged:function(seatData){\r\n        \r\n        if(seatData.angangs == null && seatData.diangangs == null && seatData.wangangs == null && seatData.pengs == null && seatData.chis == null){\r\n            return;\r\n        }\r\n        var localIndex = cc.vv.gameNetMgr.getLocalIndex(seatData.seatindex);\r\n        var side = cc.vv.mahjongmgr.getSide(localIndex);\r\n        var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\r\n        \r\n        console.log(\"localIndex = \" + localIndex);\r\n        console.log(\"side = \" + side);\r\n        console.log(\"pre = \" + pre);\r\n        console.log(\"onPengGangChanged\" + localIndex);\r\n            \r\n        var gameChild = this.node.getChildByName(\"game\");\r\n        var myself = gameChild.getChildByName(side);\r\n        var pengangroot = myself.getChildByName(\"penggangs\");\r\n        \r\n        for(var i = 0; i < pengangroot.childrenCount; ++i){\r\n            pengangroot.children[i].active = false;\r\n        }\r\n        //初始化杠牌\r\n        var index = 0;\r\n        \r\n        var gangs = seatData.angangs\r\n        for(var i = 0; i < gangs.length; ++i){\r\n            var mjid = gangs[i];\r\n            this.initPengAndGangs(pengangroot,side,pre,index,mjid,\"angang\");\r\n            index++;    \r\n        } \r\n        var gangs = seatData.diangangs\r\n        for(var i = 0; i < gangs.length; ++i){\r\n            var mjid = gangs[i];\r\n            this.initPengAndGangs(pengangroot,side,pre,index,mjid,\"diangang\");\r\n            index++;    \r\n        }\r\n        \r\n        var gangs = seatData.wangangs\r\n        for(var i = 0; i < gangs.length; ++i){\r\n            var mjid = gangs[i];\r\n            this.initPengAndGangs(pengangroot,side,pre,index,mjid,\"wangang\");\r\n            index++;    \r\n        }\r\n        \r\n        //初始化碰牌\r\n        var pengs = seatData.pengs\r\n        if(pengs){\r\n            for(var i = 0; i < pengs.length; ++i){\r\n                var mjid = pengs[i];\r\n                this.initPengAndGangs(pengangroot,side,pre,index,mjid,\"peng\");\r\n                index++;    \r\n            }    \r\n        }  \r\n        \r\n        //初始化吃牌\r\n        console.log(\"初始化吃牌\");\r\n        console.log(seatData);\r\n        var chis = seatData.chis;\r\n        if(chis){\r\n            for(var i = 0; i < chis.length; ++i){\r\n                var mjid = chis[i];\r\n                this.initPengAndGangs(pengangroot,side,pre,index,mjid,\"chi\");\r\n                index++;    \r\n            }    \r\n        }  \r\n        \r\n        //初始化花牌\r\n        console.log(\"初始化花牌\");\r\n        console.log(seatData);\r\n        var huas = seatData.huas;\r\n        if(huas){\r\n            for(var i = 0; i < huas.length; ++i){\r\n                var mjid = huas[i];\r\n                this.onHuaChanged(seatData);                                     \r\n                index++;    \r\n            }    \r\n        }  \r\n    },\r\n    \r\n    \r\n    \r\n    initPengAndGangs:function(pengangroot,side,pre,index,mjid,flag){\r\n        var pgroot = null;\r\n        if(pengangroot.childrenCount <= index){\r\n            if(side == \"left\" || side == \"right\"){\r\n                pgroot = cc.instantiate(cc.vv.mahjongmgr.pengPrefabLeft);\r\n            }\r\n            else{\r\n                pgroot = cc.instantiate(cc.vv.mahjongmgr.pengPrefabSelf);\r\n            }\r\n            \r\n            pengangroot.addChild(pgroot);    \r\n        }\r\n        else{\r\n            pgroot = pengangroot.children[index];\r\n            pgroot.active = true;\r\n        }\r\n        \r\n        if(side == \"left\"){\r\n            pgroot.y = -(index * 25 * 3);                    \r\n        }\r\n        else if(side == \"right\"){\r\n            pgroot.y = (index * 25 * 3);\r\n            pgroot.setLocalZOrder(-index);\r\n        }\r\n        else if(side == \"myself\"){\r\n            pgroot.x = index * 55 * 3 + index * 10;                    \r\n        }\r\n        else{\r\n            pgroot.x = -(index * 55*3);\r\n        }\r\n\r\n        var sprites = pgroot.getComponentsInChildren(cc.Sprite);\r\n        // if(flag == \"chi\"){\r\n        //     console.log(\"排列吃！\");\r\n        //     console.log(mjid);\r\n        //     for(var s = 0; s < 3; s++){\r\n        //         var sprite = sprites[s];\r\n        //         sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre,mjid[s]);\r\n        //     }\r\n        //     return;\r\n        // }\r\n        if(flag == \"chi\"){\r\n            var mjid1 = [].concat(mjid);\r\n            var pai = mjid1.pop();\r\n            mjid1.sort(function(a,b){\r\n            return parseInt(a)- parseInt(b)});\r\n            \r\n            mjid1[2] = mjid1[1];\r\n            mjid1[1] = mjid1[0];\r\n            mjid1[0] = pai;\r\n        }\r\n        for(var s = 0; s < sprites.length; ++s){\r\n            console.log(\"in xunhuan\");\r\n            var sprite = sprites[s];\r\n            if(sprite.node.name == \"gang\"){\r\n                var isGang = flag != \"peng\";\r\n                sprite.node.active = isGang;\r\n                sprite.node.scaleX = 1.0;\r\n                sprite.node.scaleY = 1.0;\r\n                if(flag == \"angang\"){\r\n                    sprite.spriteFrame = cc.vv.mahjongmgr.getEmptySpriteFrame(side);\r\n                    if(side == \"myself\" || side == \"up\"){\r\n                        sprite.node.scaleX = 1.4;\r\n                        sprite.node.scaleY = 1.4;                        \r\n                    }\r\n                }   \r\n                else{\r\n                    sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre,mjid);    \r\n                }\r\n            }\r\n            else { \r\n                if ( flag == \"peng\" ) {\r\n                    sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre,mjid);\r\n                }else if (flag == \"chi\") {\r\n                    sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre,mjid1[s]);\r\n                }else{\r\n                    sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre,mjid);\r\n                }\r\n            }\r\n        }\r\n        \r\n    },\r\n    \r\n    onHuaChanged:function(seatData){\r\n        console.log(\"onHuaChanged!!!\");\r\n        console.log(seatData);\r\n        var localIndex = cc.vv.gameNetMgr.getLocalIndex(seatData.seatindex);\r\n        var side = cc.vv.mahjongmgr.getSide(localIndex);\r\n        var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\r\n        \r\n        var gameChild = this.node.getChildByName(\"game\");\r\n        var side = gameChild.getChildByName(side);\r\n        var huas = side.getChildByName(\"huas\");\r\n        \r\n        console.log(side);\r\n        console.log(huas);\r\n        \r\n        for(var i = 0; i < seatData.huas.length; i++){\r\n            console.log(\"show hua!\"+seatData.huas[i]);\r\n            var nowchild = huas.children[i];\r\n            nowchild.active = true;\r\n            console.log(nowchild.active);\r\n            var sprite = nowchild.getComponent(cc.Sprite);\r\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre,seatData.huas[i]);\r\n        }\r\n    },\r\n    \r\n    initHuas:function(){\r\n        \r\n    }\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"
  ]
}