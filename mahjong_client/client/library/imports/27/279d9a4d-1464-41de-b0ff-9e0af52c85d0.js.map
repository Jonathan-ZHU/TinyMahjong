{"version":3,"sources":["assets/scripts/components/PengGangs.js"],"names":["cc","Class","extends","Component","properties","onLoad","vv","hidehuas","gameChild","node","getChildByName","myself","pengangroot","realwidth","director","getVisibleSize","width","scale","scaleX","scaleY","self","on","data","console","log","detail","onPengGangChanged","seatData","onHuaChanged","onGameBein","seats","gameNetMgr","i","sides","Array","j","side","huasroot","childrenCount","children","active","hideSide","angangs","diangangs","wangangs","pengs","chis","localIndex","getLocalIndex","seatindex","mahjongmgr","getSide","pre","getFoldPre","index","gangs","length","mjid","initPengAndGangs","huas","flag","pgroot","instantiate","pengPrefabLeft","pengPrefabSelf","addChild","y","setLocalZOrder","x","sprites","getComponentsInChildren","Sprite","mjid1","concat","pai","pop","sort","a","b","parseInt","s","sprite","name","isGang","spriteFrame","getEmptySpriteFrame","getSpriteFrameByMJID","nowchild","getComponent","initHuas"],"mappings":"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","file":"unknown","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        if(!cc.vv){\n            return;\n        }\n        \n        \n        this.hidehuas();\n        \n        var gameChild = this.node.getChildByName(\"game\");\n        var myself = gameChild.getChildByName(\"myself\");\n        var pengangroot = myself.getChildByName(\"penggangs\");\n        var realwidth = cc.director.getVisibleSize().width;\n        var scale = realwidth / 1280;\n        pengangroot.scaleX *= scale;\n        pengangroot.scaleY *= scale;\n        \n        var self = this;\n        this.node.on('peng_notify',function(data){\n            //刷新所有的牌\n            console.log(\"penggang plat\");\n            console.log(data.detail);\n            var data = data.detail;\n            self.onPengGangChanged(data);\n        });\n        \n        this.node.on('gang_notify',function(data){\n            //刷新所有的牌\n            //console.log(data.detail);\n            var data = data.detail;\n            self.onPengGangChanged(data.seatData);\n        });\n        \n        this.node.on('chi_notify',function(data){\n            //刷新所有的牌\n            console.log(\"penggang plat\");\n            console.log(data.detail);\n            var data = data.detail;\n            self.onPengGangChanged(data);\n        });\n        \n        this.node.on('gethua_notify',function(data){\n            console.log(\"gethua_notify accept\");\n            //刷新所有的牌\n            var data = data.detail;\n            self.onHuaChanged(data);\n            \n        });\n        \n        this.node.on('game_begin',function(data){\n            self.onGameBein();\n        });\n        \n        var seats = cc.vv.gameNetMgr.seats;\n        for(var i in seats){\n            this.onPengGangChanged(seats[i]);\n        }\n    },\n    \n    //隐藏所有花牌\n    hidehuas:function(){\n        //隐藏所有花牌\n        var gameChild = this.node.getChildByName(\"game\");\n        var sides = new Array(\n            \"right\",\n            \"left\",\n            \"up\",\n            \"myself\");\n        for(var j= 0; j < 4 ; j++){\n            var side = gameChild.getChildByName(sides[j]);\n            var huasroot = side.getChildByName(\"huas\");\n            for(var i = 0 ; i < huasroot.childrenCount ; i++){\n                huasroot.children[i].active = false;\n            }\n        }\n        \n    },\n    \n    onGameBein:function(){\n        this.hideSide(\"myself\");\n        this.hideSide(\"right\");\n        this.hideSide(\"up\");\n        this.hideSide(\"left\");\n        this.hidehuas();\n    },\n    \n    hideSide:function(side){\n        var gameChild = this.node.getChildByName(\"game\");\n        var myself = gameChild.getChildByName(side);\n        var pengangroot = myself.getChildByName(\"penggangs\");\n        if(pengangroot){\n            for(var i = 0; i < pengangroot.childrenCount; ++i){\n                pengangroot.children[i].active = false;\n            }            \n        }\n    },\n    \n    onPengGangChanged:function(seatData){\n        \n        if(seatData.angangs == null && seatData.diangangs == null && seatData.wangangs == null && seatData.pengs == null && seatData.chis == null){\n            return;\n        }\n        var localIndex = cc.vv.gameNetMgr.getLocalIndex(seatData.seatindex);\n        var side = cc.vv.mahjongmgr.getSide(localIndex);\n        var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\n        \n        console.log(\"localIndex = \" + localIndex);\n        console.log(\"side = \" + side);\n        console.log(\"pre = \" + pre);\n        console.log(\"onPengGangChanged\" + localIndex);\n            \n        var gameChild = this.node.getChildByName(\"game\");\n        var myself = gameChild.getChildByName(side);\n        var pengangroot = myself.getChildByName(\"penggangs\");\n        \n        for(var i = 0; i < pengangroot.childrenCount; ++i){\n            pengangroot.children[i].active = false;\n        }\n        //初始化杠牌\n        var index = 0;\n        \n        var gangs = seatData.angangs\n        for(var i = 0; i < gangs.length; ++i){\n            var mjid = gangs[i];\n            this.initPengAndGangs(pengangroot,side,pre,index,mjid,\"angang\");\n            index++;    \n        } \n        var gangs = seatData.diangangs\n        for(var i = 0; i < gangs.length; ++i){\n            var mjid = gangs[i];\n            this.initPengAndGangs(pengangroot,side,pre,index,mjid,\"diangang\");\n            index++;    \n        }\n        \n        var gangs = seatData.wangangs\n        for(var i = 0; i < gangs.length; ++i){\n            var mjid = gangs[i];\n            this.initPengAndGangs(pengangroot,side,pre,index,mjid,\"wangang\");\n            index++;    \n        }\n        \n        //初始化碰牌\n        var pengs = seatData.pengs\n        if(pengs){\n            for(var i = 0; i < pengs.length; ++i){\n                var mjid = pengs[i];\n                this.initPengAndGangs(pengangroot,side,pre,index,mjid,\"peng\");\n                index++;    \n            }    \n        }  \n        \n        //初始化吃牌\n        console.log(\"初始化吃牌\");\n        console.log(seatData);\n        var chis = seatData.chis;\n        if(chis){\n            for(var i = 0; i < chis.length; ++i){\n                var mjid = chis[i];\n                this.initPengAndGangs(pengangroot,side,pre,index,mjid,\"chi\");\n                index++;    \n            }    \n        }  \n        \n        //初始化花牌\n        console.log(\"初始化花牌\");\n        console.log(seatData);\n        var huas = seatData.huas;\n        if(huas){\n            for(var i = 0; i < huas.length; ++i){\n                var mjid = huas[i];\n                this.onHuaChanged(seatData);                                     \n                index++;    \n            }    \n        }  \n    },\n    \n    \n    \n    initPengAndGangs:function(pengangroot,side,pre,index,mjid,flag){\n        var pgroot = null;\n        if(pengangroot.childrenCount <= index){\n            if(side == \"left\" || side == \"right\"){\n                pgroot = cc.instantiate(cc.vv.mahjongmgr.pengPrefabLeft);\n            }\n            else{\n                pgroot = cc.instantiate(cc.vv.mahjongmgr.pengPrefabSelf);\n            }\n            \n            pengangroot.addChild(pgroot);    \n        }\n        else{\n            pgroot = pengangroot.children[index];\n            pgroot.active = true;\n        }\n        \n        if(side == \"left\"){\n            pgroot.y = -(index * 25 * 3);                    \n        }\n        else if(side == \"right\"){\n            pgroot.y = (index * 25 * 3);\n            pgroot.setLocalZOrder(-index);\n        }\n        else if(side == \"myself\"){\n            pgroot.x = index * 55 * 3 + index * 10;                    \n        }\n        else{\n            pgroot.x = -(index * 55*3);\n        }\n\n        var sprites = pgroot.getComponentsInChildren(cc.Sprite);\n        // if(flag == \"chi\"){\n        //     console.log(\"排列吃！\");\n        //     console.log(mjid);\n        //     for(var s = 0; s < 3; s++){\n        //         var sprite = sprites[s];\n        //         sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre,mjid[s]);\n        //     }\n        //     return;\n        // }\n        if(flag == \"chi\"){\n            var mjid1 = [].concat(mjid);\n            var pai = mjid1.pop();\n            mjid1.sort(function(a,b){\n            return parseInt(a)- parseInt(b)});\n            \n            mjid1[2] = mjid1[1];\n            mjid1[1] = mjid1[0];\n            mjid1[0] = pai;\n        }\n        for(var s = 0; s < sprites.length; ++s){\n            console.log(\"in xunhuan\");\n            var sprite = sprites[s];\n            if(sprite.node.name == \"gang\"){\n                var isGang = flag != \"peng\";\n                sprite.node.active = isGang;\n                sprite.node.scaleX = 1.0;\n                sprite.node.scaleY = 1.0;\n                if(flag == \"angang\"){\n                    sprite.spriteFrame = cc.vv.mahjongmgr.getEmptySpriteFrame(side);\n                    if(side == \"myself\" || side == \"up\"){\n                        sprite.node.scaleX = 1.4;\n                        sprite.node.scaleY = 1.4;                        \n                    }\n                }   \n                else{\n                    sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre,mjid);    \n                }\n            }\n            else { \n                if ( flag == \"peng\" ) {\n                    sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre,mjid);\n                }else if (flag == \"chi\") {\n                    sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre,mjid1[s]);\n                }else{\n                    sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre,mjid);\n                }\n            }\n        }\n        \n    },\n    \n    onHuaChanged:function(seatData){\n        console.log(\"onHuaChanged!!!\");\n        console.log(seatData);\n        var localIndex = cc.vv.gameNetMgr.getLocalIndex(seatData.seatindex);\n        var side = cc.vv.mahjongmgr.getSide(localIndex);\n        var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\n        \n        var gameChild = this.node.getChildByName(\"game\");\n        var side = gameChild.getChildByName(side);\n        var huas = side.getChildByName(\"huas\");\n        \n        console.log(side);\n        console.log(huas);\n        \n        for(var i = 0; i < seatData.huas.length; i++){\n            console.log(\"show hua!\"+seatData.huas[i]);\n            var nowchild = huas.children[i];\n            nowchild.active = true;\n            console.log(nowchild.active);\n            var sprite = nowchild.getComponent(cc.Sprite);\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre,seatData.huas[i]);\n        }\n    },\n    \n    initHuas:function(){\n        \n    }\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});\n"]}