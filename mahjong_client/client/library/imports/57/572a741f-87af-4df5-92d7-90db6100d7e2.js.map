{"version":3,"sources":["assets/scripts/components/Login.js"],"names":["String","prototype","format","args","arguments","length","result","key","reg","RegExp","replace","i","undefined","cc","Class","extends","Component","properties","_mima","_mimaIndex","mjdl","onLoad","sys","isNative","isMobile","cvs","node","getComponent","Canvas","fitHeight","fitWidth","vv","director","loadScene","http","url","master_url","net","addHandler","console","log","audioMgr","playBGM","os","OS_WINDOWS","find","active","youkeorweixin","localStorage","getItem","OS_ANDROID","OS_IOS","systemEvent","on","SystemEvent","EventType","KEY_UP","event","game","end","Game","start","account","sign","ret","errcode","userMgr","onAuth","onBtnReturn","yhxy","getChildByName","check_mark","tyyhxy","btn_checkbox","yonghuxieyi","prompt","onBtnQuickStartClicked","guestAuth","onBtnDownloadClicked","openURL","SI","appweb","onBtnWeichatClicked","self","anysdkMgr","login","onBtnMIMAClicked","target","name"],"mappings":"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","file":"unknown","sourcesContent":["String.prototype.format = function(args) { \n    if (arguments.length>0) { \n        var result = this; \n        if (arguments.length == 1 && typeof (args) == \"object\") { \n            for (var key in args) { \n                var reg=new RegExp (\"({\"+key+\"})\",\"g\"); \n                result = result.replace(reg, args[key]); \n            } \n        } \n        else { \n            for (var i = 0; i < arguments.length; i++) { \n                if(arguments[i]==undefined) { \n                    return \"\"; \n                } \n                else { \n                    var reg=new RegExp (\"({[\"+i+\"]})\",\"g\"); \n                    result = result.replace(reg, arguments[i]); \n                } \n            } \n        } \n        return result; \n    } \n    else { \n        return this; \n    } \n};\n \ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        _mima:null,\n        _mimaIndex:0,\n        mjdl:1,  //�齫��¼�û�Э�飬ֻ�й�ѡ��ť�ο͵�¼��΢�ŵ�¼�ſ��Խ�ȥ\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        if(!cc.sys.isNative && cc.sys.isMobile){\n            var cvs = this.node.getComponent(cc.Canvas);\n            cvs.fitHeight = true;\n            cvs.fitWidth = true;\n        }\n        \n        if(!cc.vv){\n            cc.director.loadScene(\"loading\");\n            return;\n        }\n        cc.vv.http.url = cc.vv.http.master_url;\n        cc.vv.net.addHandler('push_need_create_role',function(){\n            console.log(\"onLoad:push_need_create_role\");\n            cc.director.loadScene(\"createrole\");\n        });\n        \n        cc.vv.audioMgr.playBGM(\"bgMain.mp3\");\n        \n        this._mima = [\"A\",\"A\",\"B\",\"B\",\"A\",\"B\",\"A\",\"B\",\"A\",\"A\",\"A\",\"B\",\"B\",\"B\"];\n        \n        if(!cc.sys.isNative || cc.sys.os == cc.sys.OS_WINDOWS){\n            cc.find(\"Canvas/btn_yk\").active = true;    \n        }\n\n        var youkeorweixin = cc.sys.localStorage.getItem(\"youkeorweixin\");\n        //安卓只显示微信登陆\n        if(cc.sys.os == cc.sys.OS_ANDROID){ \n            console.log(\"platform:\" + cc.sys.OS_ANDROID + \" OS_ANDROID.\");\n            cc.find(\"Canvas/btn_yk\").active = false; \n            cc.find(\"Canvas/z_weixindenglu\").active = true;  \n        }\n        //IOS审核版本 只显示游客登录 过审版本 只显示微信登陆\n        else if(cc.sys.os == cc.sys.OS_IOS){\n            console.log(\"platform:\" + cc.sys.OS_IOS + \" OS_IOS.\");\n            if(youkeorweixin == \"0\"){\n                cc.find(\"Canvas/btn_yk\").active = true; \n                cc.find(\"Canvas/z_weixindenglu\").active = false;\n                cc.find(\"Canvas/yhxy\").active = true;\n                \n            }\n            if(youkeorweixin == \"1\" || youkeorweixin == \"null\" ){\n                cc.find(\"Canvas/z_weixindenglu\").active = true; \n                cc.find(\"Canvas/btn_yk\").active = false;  \n            }\n        }\n        else{\n            cc.find(\"Canvas/btn_yk\").active = true; \n            cc.find(\"Canvas/z_weixindenglu\").active = false;  \n            console.log(\"platform:\" + cc.sys.os + \" dosn't implement share.\");\n        }\n\n\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, function(event){\n            cc.game.end (); \n        }, cc.Game);\n    \n        \n    },\n\n   \n    start:function(){\n        var account =  cc.sys.localStorage.getItem(\"wx_account\");\n        var sign = cc.sys.localStorage.getItem(\"wx_sign\");\n        if(account != null && sign != null){\n            var ret = {\n                errcode:0,\n                account:account,\n                sign:sign\n            }\n            cc.vv.userMgr.onAuth(ret);\n        }   \n    },\n    \n    onBtnReturn:function(){\n        var yhxy = this.node.getChildByName(\"yhxy\");\n        yhxy.active = false;\n    },\n    check_mark:function(){\n        var tyyhxy = this.node.getChildByName(\"tyyhxy\");\n        var btn_checkbox = tyyhxy.getChildByName(\"btn_checkbox\");\n        var check_mark = btn_checkbox.getChildByName(\"check_mark\");\n        if(this.mjdl == 1){\n            check_mark.active = false;\n            this.mjdl = 0;\n        }else{\n            check_mark.active = true;\n            this.mjdl = 1;\n        }\n        console.log(\"this.mjdl:\"+this.mjdl)\n    },\n    yonghuxieyi:function(){\n    \n        var yhxy = this.node.getChildByName(\"yhxy\");\n        yhxy.active = true;\n    },\n    prompt:function(){\n        var prompt = this.node.getChildByName(\"prompt\");\n            prompt.active = false;\n    },\n    onBtnQuickStartClicked:function(){\n        if(this.mjdl == 0){\n            var prompt = this.node.getChildByName(\"prompt\");\n            prompt.active = true;\n            return;\n        }\n        console.log(\"ssy\")\n        \n        cc.vv.userMgr.guestAuth();\n    },\n    \n    onBtnDownloadClicked:function(){\n        cc.sys.openURL(cc.vv.SI.appweb);\n    },\n   \n    \n    onBtnWeichatClicked:function(){\n      \n        var self = this;\n        if(self.mjdl == 0){\n            var prompt = this.node.getChildByName(\"prompt\");\n            prompt.active = true;\n            return;\n        }\n        console.log(\"ss\")\n        cc.vv.anysdkMgr.login();\n    },\n    \n    onBtnMIMAClicked:function(event){\n        if(this._mima[this._mimaIndex] == event.target.name){\n            this._mimaIndex++;\n            if(this._mimaIndex == this._mima.length){\n                cc.find(\"Canvas/btn_yk\").active = true;\n            }\n        }\n        else{\n            console.log(\"oh ho~~~\");\n            this._mimaIndex = 0;\n        }\n    }\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});\n"]}