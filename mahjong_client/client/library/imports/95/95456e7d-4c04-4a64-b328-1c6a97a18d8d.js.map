{"version":3,"sources":["assets/scripts/GameNetMgr.js"],"names":["cc","Class","extends","Component","properties","dataEventHandler","roomId","maxNumOfGames","numOfGames","numOfMJ","seatIndex","seats","turn","button","dingque","chupai","isDingQueing","isHuanSanZhang","gamestate","isOver","dissoveData","fengxiang","reset","curaction","i","length","holds","folds","pengs","chis","huas","angangs","diangangs","wangangs","ready","hued","huanpais","huanpaimethod","clear","dispatchEvent","event","data","emit","getSeatIndexByID","userId","s","userid","isOwner","getSeatByID","seat","getSelfData","getLocalIndex","index","ret","prepareReplay","roomInfo","detailOfGame","console","log","id","base_info","baseInfo","seatindex","score","game_seats","vv","userMgr","conf","type","getWanfa","maxGames","maxFan","strArr","koufei","push","hongzhongdanghua","quanshu","jiesuan","join","initHandlers","self","net","addHandler","errcode","roomid","numofgames","errmsg","director","loadScene","name","oldRoomId","online","numofmj","state","chuPai","sd","que","iszimo","huinfo","results","totalscore","endinfo","turnUserID","si","doTurnChange","doHu","pai","doChupai","doMopai","doGuo","info","time","method","gameNetMgr","doPeng","doGang","gangtype","chigroup","doChi","doHua","buhuas","doBuhua","doBuhuaforme","seatData","idx","indexOf","splice","undefined","getGangType","cnt","last","connectGameServer","ip","port","onConnectOK","token","sign","send","onConnectFailed","wc","hide","show","connect"],"mappings":"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","file":"unknown","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        dataEventHandler:null,\n        roomId:null,\n        maxNumOfGames:-1,\n        numOfGames:-1,\n        numOfMJ:0,\n        seatIndex:-1,\n        seats:null,\n        turn:-1,\n        button:-1,\n        dingque:-1,\n        chupai:-1,\n        isDingQueing:false,\n        isHuanSanZhang:false,\n        gamestate:\"\",\n        isOver:false,\n        dissoveData:null,\n        \n        //舟山麻将额外属性\n        fengxiang:null,\n        \n        \n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n    },\n    \n    reset:function(){\n        this.turn = -1;\n        this.chupai = -1,\n        this.dingque = -1;\n        this.button = -1;\n        this.gamestate = \"\";\n        this.dingque = -1;\n        this.isDingQueing = false;\n        this.isHuanSanZhang = false;\n        this.curaction = null;\n        for(var i = 0; i < this.seats.length; ++i){\n            this.seats[i].holds = [];\n            this.seats[i].folds = [];\n            this.seats[i].pengs = [];\n            this.seats[i].chis = [];\n            this.seats[i].huas = [];\n            this.seats[i].angangs = [];\n            this.seats[i].diangangs = [];\n            this.seats[i].wangangs = [];\n            this.seats[i].dingque = -1;\n            this.seats[i].ready = false;\n            this.seats[i].hued = false;\n            this.seats[i].huanpais = null;\n            this.huanpaimethod = -1;\n        }\n    },\n    \n    clear:function(){\n        this.dataEventHandler = null;\n        if(this.isOver == null){\n            this.seats = null;\n            this.roomId = null;\n            this.maxNumOfGames = 0;\n            this.numOfGames = 0; \n        }\n    },\n    \n    dispatchEvent(event,data){\n        if(this.dataEventHandler){\n            this.dataEventHandler.emit(event,data);\n        }    \n    },\n    \n    getSeatIndexByID:function(userId){\n        for(var i = 0; i < this.seats.length; ++i){\n            var s = this.seats[i];\n            if(s.userid == userId){\n                return i;\n            }\n        }\n        return -1;\n    },\n    \n    isOwner:function(){\n        return this.seatIndex == 0;   \n    },\n    \n    getSeatByID:function(userId){\n        var seatIndex = this.getSeatIndexByID(userId);\n        var seat = this.seats[seatIndex];\n        return seat;\n    },\n    \n    getSelfData:function(){\n        return this.seats[this.seatIndex];\n    },\n    \n    getLocalIndex:function(index){\n        var ret = (index - this.seatIndex + 4) % 4;\n        return ret;\n    },\n    \n    prepareReplay:function(roomInfo,detailOfGame){\n        console.log(\"prepareReplay!!!\");\n        console.log(roomInfo);\n        console.log(detailOfGame);\n        this.roomId = roomInfo.id;\n        this.seats = roomInfo.seats;\n        this.turn = detailOfGame.base_info.button;\n        var baseInfo = detailOfGame.base_info;\n        for(var i = 0; i < this.seats.length; ++i){\n            var s = this.seats[i];\n            s.seatindex = i;\n            s.score = null;\n            s.holds = baseInfo.game_seats[i];\n            s.pengs = [];\n            s.chis = [];\n            s.huas = [];\n            s.angangs = [];\n            s.diangangs = [];\n            s.wangangs = [];\n            s.folds = [];\n            console.log(s);\n            if(cc.vv.userMgr.userId == s.userid){\n                this.seatIndex = i;\n            }\n        }\n        this.conf = {\n            type:baseInfo.type,\n        }\n        if(this.conf.type == null){\n            this.conf.type == \"sjmmmj\";\n        }\n    },\n    \n    getWanfa:function(){\n        var conf = this.conf;\n        if(conf && conf.maxGames!=null && conf.maxFan!=null){\n            var strArr = [];\n            // strArr.push(conf.maxGames + \"局\");\n            // strArr.push(conf.maxFan + \"番封顶\");\n            if (conf.type == \"sjmmj\") {\n                (conf.koufei == 0) ? strArr.push(\"房主出资\") : strArr.push(\"玩家平分\") ;\n                (conf.hongzhongdanghua) ? strArr.push(\"红中当花\") : {} ;\n                (conf.quanshu == 0) ? strArr.push(\"8局\") : strArr.push(\"一圈\") ;\n                if (conf.jiesuan == 0) strArr.push(\"幺半\");\n                else if (conf.jiesuan == 1) strArr.push(\"一二\");\n                else if (conf.jiesuan == 2) strArr.push(\"二四\");\n            }else if (conf.type == \"dhmj\") {\n                (conf.koufei == 0) ? strArr.push(\"房主出资\") : strArr.push(\"玩家平分\") ;\n                (conf.quanshu == 0) ? strArr.push(\"8局\") : strArr.push(\"一圈\") ;\n                if (conf.jiesuan == 0) strArr.push(\"10\");\n                else if (conf.jiesuan == 1) strArr.push(\"25\");\n                else if (conf.jiesuan == 2) strArr.push(\"50\");\n                else if (conf.jiesuan == 3) strArr.push(\"120\");\n            }else if (conf.type == \"tdh\") {\n                (conf.koufei == 0) ? strArr.push(\"房主出资\") : strArr.push(\"玩家平分\") ;\n                (conf.quanshu == 0) ? strArr.push(\"8局\") : strArr.push(\"一圈\") ;\n                if (conf.jiesuan == 0) strArr.push(\"有花\");\n            }\n            // if(conf.zimo == 1){\n            //     strArr.push(\"自摸加番\");\n            // }\n            // else{\n            //     strArr.push(\"自摸加底\");\n            // }\n            // if(conf.jiangdui){\n            //     strArr.push(\"将对\");   \n            // }\n            // if(conf.dianganghua == 1){\n            //     strArr.push(\"点杠花(自摸)\");   \n            // }\n            // else{\n            //     strArr.push(\"点杠花(放炮)\");\n            // }\n            // if(conf.menqing){\n            //     strArr.push(\"门清、中张\");   \n            // }\n            // if(conf.tiandihu){\n            //     strArr.push(\"天地胡\");   \n            // }\n            return strArr.join(\" \");\n        }\n        return \"\";\n    },\n    \n    initHandlers:function(){\n        var self = this;\n        cc.vv.net.addHandler(\"login_result\",function(data){\n            console.log(\"login_result\");\n            console.log(data);\n            if(data.errcode === 0){\n                var data = data.data;\n                self.roomId = data.roomid;\n                self.conf = data.conf;\n                self.maxNumOfGames = data.conf.maxGames;\n                self.numOfGames = data.numofgames;\n                self.fengxiang = data.fengxiang;\n                self.seats = data.seats;\n                self.seatIndex = self.getSeatIndexByID(cc.vv.userMgr.userId);\n                self.isOver = false;\n            }\n            else{\n                console.log(data.errmsg);   \n            }\n        });\n                \n        cc.vv.net.addHandler(\"login_finished\",function(data){\n            console.log(\"login_finished\");\n            \n            cc.director.loadScene(\"mjgame\");  \n            \n            // var loadgame = function (){\n            //     cc.director.loadScene(\"mjgame\");  \n            // }\n            // var fadeout = cc.fadeOut(0.1);\n            // var finish = cc.callFunc(loadgame, this);\n            // var seq = cc.sequence(fadeout, finish);\n            // cc.director.getScene().getChildByName('Canvas').runAction(seq);\n            \n            \n            \n            //cc.director.loadScene(\"mjgame\");\n        });\n\n        cc.vv.net.addHandler(\"exit_result\",function(data){\n            self.roomId = null;\n            self.turn = -1;\n            self.dingque = -1;\n            self.isDingQueing = false;\n            self.seats = null;\n        });\n        \n        cc.vv.net.addHandler(\"exit_notify_push\",function(data){\n           var userId = data;\n           var s = self.getSeatByID(userId);\n           if(s != null){\n               s.userid = 0;\n               s.name = \"\";\n               self.dispatchEvent(\"user_state_changed\",s);\n           }\n        });\n        \n        cc.vv.net.addHandler(\"dispress_push\",function(data){\n            self.roomId = null;\n            self.turn = -1;\n            self.dingque = -1;\n            self.isDingQueing = false;\n            self.seats = null;\n        });\n                \n        cc.vv.net.addHandler(\"disconnect\",function(data){\n            if(self.roomId == null){\n                cc.director.loadScene(\"hall\");\n            }\n            else{\n                if(self.isOver == false){\n                    cc.vv.userMgr.oldRoomId = self.roomId;\n                    self.dispatchEvent(\"disconnect\");                    \n                }\n                else{\n                    self.roomId = null;\n                }\n            }\n        });\n        \n        cc.vv.net.addHandler(\"new_user_comes_push\",function(data){\n            //console.log(data);\n            var seatIndex = data.seatindex;\n            if(self.seats[seatIndex].userid > 0){\n                self.seats[seatIndex].online = true;\n            }\n            else{\n                data.online = true;\n                self.seats[seatIndex] = data;\n            }\n            self.dispatchEvent('new_user',self.seats[seatIndex]);\n        });\n        \n        cc.vv.net.addHandler(\"user_state_push\",function(data){\n            //console.log(data);\n            var userId = data.userid;\n            var seat = self.getSeatByID(userId);\n            seat.online = data.online;\n            self.dispatchEvent('user_state_changed',seat);\n        });\n        \n        cc.vv.net.addHandler(\"user_ready_push\",function(data){\n            //console.log(data);\n            var userId = data.userid;\n            var seat = self.getSeatByID(userId);\n            seat.ready = data.ready;\n            self.dispatchEvent('user_state_changed',seat);\n        });\n        \n        cc.vv.net.addHandler(\"game_holds_push\",function(data){\n            var seat = self.seats[self.seatIndex]; \n            console.log(data);\n            seat.holds = data;\n            \n            for(var i = 0; i < self.seats.length; ++i){\n                var s = self.seats[i]; \n                if(s.folds == null){\n                    s.folds = [];\n                }\n                if(s.pengs == null){\n                    s.pengs = [];\n                }\n                if(s.angangs == null){\n                    s.angangs = [];\n                }\n                if(s.diangangs == null){\n                    s.diangangs = [];\n                }\n                if(s.chis == null){\n                    s.chis = [];\n                }\n                if(s.huas == null){\n                    s.huas = [];\n                }\n                if(s.wangangs == null){\n                    s.wangangs = [];\n                }\n                s.ready = false;\n            }\n            self.dispatchEvent('game_holds');\n        });\n        \n        cc.vv.net.addHandler(\"game_feng_push\",function(data){\n            self.fengxiang = data;\n            self.dispatchEvent('game_feng');\n        });\n        \n         \n        cc.vv.net.addHandler(\"game_begin_push\",function(data){\n            console.log('game_action_push');\n            console.log(data);\n            self.button = data;\n            self.turn = self.button;\n            self.gamestate = \"begin\";\n            self.dispatchEvent('game_begin');\n        });\n        \n        cc.vv.net.addHandler(\"game_playing_push\",function(data){\n            console.log('game_playing_push'); \n            self.gamestate = \"playing\"; \n            self.dispatchEvent('game_playing');\n        });\n        \n        cc.vv.net.addHandler(\"game_sync_push\",function(data){\n            console.log(\"game_sync_push\");\n            console.log(data);\n            self.numOfMJ = data.numofmj;\n            self.gamestate = data.state;\n            self.fengxiang = data.fengxiang;\n            if(self.gamestate == \"dingque\"){\n                self.isDingQueing = true;\n            }\n            else if(self.gamestate == \"huanpai\"){\n                self.isHuanSanZhang = true;\n            }\n            self.turn = data.turn;\n            self.button = data.button;\n            self.chupai = data.chuPai;\n            self.huanpaimethod = data.huanpaimethod;\n            for(var i = 0; i < 4; ++i){\n                var seat = self.seats[i];\n                var sd = data.seats[i];\n                seat.holds = sd.holds;\n                seat.folds = sd.folds;\n                seat.angangs = sd.angangs;\n                seat.diangangs = sd.diangangs;\n                seat.wangangs = sd.wangangs;\n                seat.pengs = sd.pengs;\n                seat.chis = sd.chis;\n                seat.huas = sd.huas;\n                seat.dingque = sd.que;\n                seat.hued = sd.hued; \n                seat.iszimo = sd.iszimo;\n                seat.huinfo = sd.huinfo;\n                seat.huanpais = sd.huanpais;\n                if(i == self.seatIndex){\n                    self.dingque = sd.que;\n                }\n           }\n        });\n        \n        \n        cc.vv.net.addHandler(\"game_huanpai_push\",function(data){\n            self.isHuanSanZhang = true;\n            self.dispatchEvent('game_huanpai');\n        });\n        \n        cc.vv.net.addHandler(\"hangang_notify_push\",function(data){\n            self.dispatchEvent('hangang_notify',data);\n        });\n        \n        cc.vv.net.addHandler(\"game_action_push\",function(data){\n            self.curaction = data;\n            console.log(data);\n            self.dispatchEvent('game_action',data);\n        });\n        \n        \n        \n        cc.vv.net.addHandler(\"game_num_push\",function(data){\n            self.numOfGames = data;\n            self.dispatchEvent('game_num',data);\n        });\n\n        cc.vv.net.addHandler(\"game_over_push\",function(data){\n            console.log('game_over_push');\n            console.log(data);\n            var results = data.results;\n            for(var i = 0; i < self.seats.length; ++i){\n                self.seats[i].score = results.length == 0? 0:results[i].totalscore;\n            }\n            self.dispatchEvent('game_over',results);\n            if(data.endinfo){\n                self.isOver = true;\n                self.dispatchEvent('game_end',data.endinfo);    \n            }\n            self.reset();\n            for(var i = 0; i <  self.seats.length; ++i){\n                self.dispatchEvent('user_state_changed',self.seats[i]);    \n            }\n        });\n        \n        cc.vv.net.addHandler(\"mj_count_push\",function(data){\n            console.log('mj_count_push');\n            self.numOfMJ = data;\n            //console.log(data);\n            self.dispatchEvent('mj_count',data);\n        });\n        \n        cc.vv.net.addHandler(\"game_chupai_push\",function(data){\n            console.log('game_chupai_push');\n            //console.log(data);\n            var turnUserID = data;\n            var si = self.getSeatIndexByID(turnUserID);\n            self.doTurnChange(si);\n        });\n        \n        cc.vv.net.addHandler(\"hu_push\",function(data){\n            console.log('hu_push');\n            console.log(data);\n            self.doHu(data);\n        });\n        \n        cc.vv.net.addHandler(\"game_chupai_notify_push\",function(data){\n            var userId = data.userId;\n            var pai = data.pai;\n            var si = self.getSeatIndexByID(userId);\n            self.doChupai(si,pai);\n        });\n        \n        cc.vv.net.addHandler(\"game_mopai_push\",function(data){\n            console.log('game_mopai_push');\n            self.doMopai(self.seatIndex,data);\n        });\n        \n        cc.vv.net.addHandler(\"guo_notify_push\",function(data){\n            console.log('guo_notify_push');\n            var userId = data.userId;\n            var pai = data.pai;\n            var si = self.getSeatIndexByID(userId);\n            self.doGuo(si,pai);\n        });\n        \n        cc.vv.net.addHandler(\"guo_result\",function(data){\n            console.log('guo_result');\n            self.dispatchEvent('guo_result');\n        });\n        \n        cc.vv.net.addHandler(\"guohu_push\",function(data){\n            console.log('guohu_push');\n            self.dispatchEvent(\"push_notice\",{info:\"过胡\",time:1.5});\n        });\n        \n        cc.vv.net.addHandler(\"huanpai_notify\",function(data){\n            var seat = self.getSeatByID(data.si);\n            seat.huanpais = data.huanpais;\n            self.dispatchEvent('huanpai_notify',seat);\n        });\n        \n        cc.vv.net.addHandler(\"game_huanpai_over_push\",function(data){\n            console.log('game_huanpai_over_push');\n            var info = \"\";\n            var method = data.method;\n            if(method == 0){\n                info = \"换对家牌\";\n            }\n            else if(method == 1){\n                info = \"换下家牌\";\n            }\n            else{\n                info = \"换上家牌\";\n            }\n            self.huanpaimethod = method;\n            cc.vv.gameNetMgr.isHuanSanZhang = false;\n            self.dispatchEvent(\"game_huanpai_over\");\n            self.dispatchEvent(\"push_notice\",{info:info,time:2});\n        });\n        \n        cc.vv.net.addHandler(\"peng_notify_push\",function(data){\n            console.log('peng_notify_push');\n            console.log(data);\n            var userId = data.userid;\n            var pai = data.pai;\n            var si = self.getSeatIndexByID(userId);\n            self.doPeng(si,data.pai);\n        });\n        \n        cc.vv.net.addHandler(\"gang_notify_push\",function(data){\n            console.log('gang_notify_push');\n            console.log(data);\n            var userId = data.userid;\n            var pai = data.pai;\n            var si = self.getSeatIndexByID(userId);\n            self.doGang(si,pai,data.gangtype);\n        });\n        \n        cc.vv.net.addHandler(\"chi_notify_push\",function(data){\n            console.log('chi_notify_push');\n            console.log(data);\n            var userId = data.userid;\n            var pai = data.pai;\n            var chigroup = data.chigroup;\n            var si = self.getSeatIndexByID(userId);\n            self.doChi(si,data.pai,chigroup);\n        });\n        \n        cc.vv.net.addHandler(\"gethua_notify_push\",function(data){\n            console.log('gethua_notify_push');\n            var userId = data.userid;\n            var pai = data.pai;\n            var si = self.getSeatIndexByID(userId);\n            self.doHua(si,data.pai);\n        });\n        \n        //开局补花侦听 全局\n        cc.vv.net.addHandler(\"buhua_notify_push\",function(data){\n            console.log('buhua_notify_push');\n            var userId = data.userid;\n            var buhuas = data.buhuas;\n            var si = self.getSeatIndexByID(userId);\n            self.doBuhua(si,buhuas);\n        });\n        \n        //开局补花侦听 自己\n        cc.vv.net.addHandler(\"game_buhua_push\",function(data){\n            console.log('game_buhua_push');\n            var userId = data.userid;\n            var holds = data.holds;\n            var buhuas = data.buhuas;\n            var si = self.getSeatIndexByID(userId);\n            self.doBuhuaforme(si,holds,buhuas);\n        });\n        \n        cc.vv.net.addHandler(\"game_dingque_notify_push\",function(data){\n            self.dispatchEvent('game_dingque_notify',data);\n        });\n        \n        cc.vv.net.addHandler(\"game_dingque_finish_push\",function(data){\n            for(var i = 0; i < data.length; ++i){\n                self.seats[i].dingque = data[i];\n            }\n            self.dispatchEvent('game_dingque_finish',data);\n        });\n        \n        \n        cc.vv.net.addHandler(\"chat_push\",function(data){\n            self.dispatchEvent(\"chat_push\",data);    \n        });\n        \n        cc.vv.net.addHandler(\"quick_chat_push\",function(data){\n            self.dispatchEvent(\"quick_chat_push\",data);\n        });\n        \n        cc.vv.net.addHandler(\"emoji_push\",function(data){\n            self.dispatchEvent(\"emoji_push\",data);\n        });\n        \n        cc.vv.net.addHandler(\"dissolve_notice_push\",function(data){\n            console.log(\"dissolve_notice_push\"); \n            console.log(data);\n            self.dissoveData = data;\n            self.dispatchEvent(\"dissolve_notice\",data);\n        });\n        \n        cc.vv.net.addHandler(\"dissolve_cancel_push\",function(data){\n            self.dissoveData = null;\n            self.dispatchEvent(\"dissolve_cancel\",data);\n        });\n        \n        cc.vv.net.addHandler(\"voice_msg_push\",function(data){\n            self.dispatchEvent(\"voice_msg\",data);\n        });\n    },\n    \n    doGuo:function(seatIndex,pai){\n        var seatData = this.seats[seatIndex];\n        var folds = seatData.folds;\n        folds.push(pai);\n        this.dispatchEvent('guo_notify',seatData);    \n    },\n    \n    doMopai:function(seatIndex,pai){\n        var seatData = this.seats[seatIndex];\n        if(seatData.holds){\n            seatData.holds.push(pai);\n            this.dispatchEvent('game_mopai',{seatIndex:seatIndex,pai:pai});            \n        }\n    },\n    \n    doChupai:function(seatIndex,pai){\n        this.chupai = pai;\n        var seatData = this.seats[seatIndex];\n        if(seatData.holds){             \n            var idx = seatData.holds.indexOf(pai);\n            seatData.holds.splice(idx,1);\n        }\n        this.dispatchEvent('game_chupai_notify',{seatData:seatData,pai:pai});    \n    },\n    \n    doPeng:function(seatIndex,pai){\n        console.log(seatIndex);\n        var seatData = this.seats[seatIndex];\n        console.log(this.seats[seatIndex]);\n        console.log(this.seats[0]);\n        console.log(this.seats[\"0\"]);\n        console.log(seatData);\n        console.log(seatData.huas);\n        console.log(seatData.userid);\n        //移除手牌\n        if(seatData.holds){\n            for(var i = 0; i < 2; ++i){\n                var idx = seatData.holds.indexOf(pai);\n                seatData.holds.splice(idx,1);\n            }                \n        }\n            \n        //更新碰牌数据\n        var pengs = seatData.pengs;\n        pengs.push(pai);\n            \n        this.dispatchEvent('peng_notify',seatData);\n    },\n    \n    doChi:function(seatIndex,pai,chigroup){\n        console.log(\"dochi\");\n        var seatData = this.seats[seatIndex];\n        console.log(seatData);\n        //移除手牌\n        if(seatData.holds){\n            for(var i = 0; i < 3; ++i){\n                if(pai == chigroup[i]) continue;\n                var idx = seatData.holds.indexOf(chigroup[i]);\n                seatData.holds.splice(idx,1);\n            }                \n        }\n            \n        //更新吃牌数据\n        var chis = seatData.chis;\n        chis.push(chigroup);\n            \n        this.dispatchEvent('chi_notify',seatData);\n    },\n    \n    doHua:function(seatIndex,pai){\n        var seatData = this.seats[seatIndex];\n        //更新花牌数据\n        if(seatData.huas == undefined || seatData.huas == null) {\n            seatData.huas = [];\n        }\n        var huas = seatData.huas;\n        huas.push(pai);\n        this.dispatchEvent('gethua_notify',seatData);\n    },\n    \n    doBuhua:function(seatIndex,buhuas){\n        console.log(\"da buhua\");\n         var seatData = this.seats[seatIndex];\n        //更新花牌数据\n        if(seatData.huas == undefined || seatData.huas == null) {\n            seatData.huas = [];\n        }\n        var huas = seatData.huas;\n        for(var i = 0; i < buhuas.length ; i++){\n            huas.push(buhuas[i]);\n        }\n        this.dispatchEvent('gethua_notify',seatData);\n    },\n    \n    doBuhuaforme:function(seatIndex,holds,buhuas){\n        console.log(\"da buhua\");\n        var seatData = this.seats[seatIndex];\n        // for(var i=0 ; i < holds.length ; i++) {\n        //     seatData.holds.push(holds[i]);\n        // }\n        // for(var i=0 ; i < buhuas.length ; i++) {\n        //     var idx = seatData.holds.indexOf(buhuas[i]);\n        //     seatData.holds.splice(idx,1);\n        // }\n        seatData.holds = holds;\n        this.dispatchEvent('buhua_notify',seatData);\n    },\n    \n    getGangType:function(seatData,pai){\n        if(seatData.pengs.indexOf(pai) != -1){\n            return \"wangang\";\n        }\n        else{\n            var cnt = 0;\n            for(var i = 0; i < seatData.holds.length; ++i){\n                if(seatData.holds[i] == pai){\n                    cnt++;\n                }\n            }\n            if(cnt == 3){\n                return \"diangang\";\n            }\n            else{\n                return \"angang\";\n            }\n        }\n    },\n    \n    doGang:function(seatIndex,pai,gangtype){\n        var seatData = this.seats[seatIndex];\n        \n        if(!gangtype){\n            gangtype = this.getGangType(seatData,pai);\n        }\n        \n        if(gangtype == \"wangang\"){\n            if(seatData.pengs.indexOf(pai) != -1){\n                var idx = seatData.pengs.indexOf(pai);\n                if(idx != -1){\n                    seatData.pengs.splice(idx,1);\n                }\n            }\n            seatData.wangangs.push(pai);      \n        }\n        if(seatData.holds){\n            for(var i = 0; i <= 4; ++i){\n                var idx = seatData.holds.indexOf(pai);\n                if(idx == -1){\n                    //如果没有找到，表示移完了，直接跳出循环\n                    break;\n                }\n                seatData.holds.splice(idx,1);\n            }\n        }\n        if(gangtype == \"angang\"){\n            seatData.angangs.push(pai);\n        }\n        else if(gangtype == \"diangang\"){\n            seatData.diangangs.push(pai);\n        }\n        this.dispatchEvent('gang_notify',{seatData:seatData,gangtype:gangtype});\n    },\n    \n    doHu:function(data){\n        this.dispatchEvent('hupai',data);\n    },\n    \n    doTurnChange:function(si){\n        var data = {\n            last:this.turn,\n            turn:si,\n        }\n        this.turn = si;\n        this.dispatchEvent('game_chupai',data);\n    },\n    \n    \n    connectGameServer:function(data){\n        this.dissoveData = null;\n        cc.vv.net.ip = data.ip + \":\" + data.port;\n        console.log(cc.vv.net.ip);\n        var self = this;\n\n        var onConnectOK = function(){\n            console.log(\"onConnectOK\");\n            var sd = {\n                token:data.token,\n                roomid:data.roomid,\n                time:data.time,\n                sign:data.sign,\n            };\n            cc.vv.net.send(\"login\",sd);\n        };\n        \n        var onConnectFailed = function(){\n            console.log(\"failed.\");\n            cc.vv.wc.hide();\n        };\n        cc.vv.wc.show(\"正在进入房间\");\n        cc.vv.net.connect(onConnectOK,onConnectFailed);\n    }\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});\n"]}