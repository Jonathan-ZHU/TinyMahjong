{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        queYiMen:null,\n        tips:[],\n        selected:[],\n        dingques:[],\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        if(cc.vv == null){\n            return;\n        }\n        this.initView();\n        this.initDingQue();\n        this.initEventHandlers();\n    },\n    \n    initView:function(){\n        var gameChild = this.node.getChildByName(\"game\");\n        this.queYiMen = gameChild.getChildByName(\"dingque\");\n        this.queYiMen.active = cc.vv.gameNetMgr.isDingQueing;\n        \n        var arr = [\"myself\",\"right\",\"up\",\"left\"];\n        for(var i = 0; i < arr.length; ++i){\n            var side = gameChild.getChildByName(arr[i]);\n            var seat = side.getChildByName(\"seat\");\n            var dingque = seat.getChildByName(\"que\");\n            this.dingques.push(dingque);\n        }\n        this.reset();\n        \n        var tips = this.queYiMen.getChildByName(\"tips\");\n        for(var i = 0; i < tips.childrenCount; ++i){\n            var n = tips.children[i];\n            this.tips.push(n.getComponent(cc.Label));\n        }\n        \n        if(cc.vv.gameNetMgr.gamestate == \"dingque\"){\n            this.showDingQueChoice();\n        }\n    },\n    \n    initEventHandlers:function(){\n        var self = this;\n        \n        this.node.on('game_dingque_notify',function(data){\n            var seatIndex = cc.vv.gameNetMgr.getSeatIndexByID(data.detail);\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(seatIndex);\n            console.log(\"game_dingque_notify:\" + localIndex);\n            self.tips[localIndex].node.active = true;\n        });\n        \n        this.node.on('game_dingque_finish',function(){\n            //通知每一个玩家定缺的花色\n            self.queYiMen.active = false;\n            cc.vv.gameNetMgr.isDingQueing = false;\n            self.initDingQue();\n        });\n    },\n    \n    showDingQueChoice:function(){\n        this.queYiMen.active = true;\n        var sd = cc.vv.gameNetMgr.getSelfData();\n        var typeCounts = [0,0,0];\n        for(var i = 0; i < sd.holds.length; ++i){\n            var pai = sd.holds[i];\n            var type = cc.vv.mahjongmgr.getMahjongType(pai);\n            typeCounts[type]++;\n        }\n        \n        var min = 65535;\n        var minIndex = 0;\n        for(var i = 0; i < typeCounts.length; ++i){\n            if(typeCounts[i] < min){\n                min = typeCounts[i];\n                minIndex = i;\n            }\n        }\n        \n        var arr = [\"tong\",\"tiao\",\"wan\"];\n        for(var i = 0; i < arr.length; ++i){\n            var node = this.queYiMen.getChildByName(arr[i]);\n            if(minIndex == i){\n                node.getComponent(cc.Animation).play(\"dingque_tuijian\");\n            }\n            else{\n                node.getComponent(cc.Animation).stop();\n            }\n            //this.queYiMen.getChildByName(arr[i]).getChildByName('jian').active = minIndex == i;    \n        }\n        \n        this.reset();\n        for(var i = 0; i < this.tips.length; ++i){\n            var n = this.tips[i];\n            if(i > 0){\n                n.node.active = false;                \n            }\n            else{\n                n.node.active = true;\n            }\n        }\n    },\n    \n    initDingQue:function(){\n        var arr = [\"tong\",\"tiao\",\"wan\"];\n        var data = cc.vv.gameNetMgr.seats;\n        for(var i = 0; i < data.length; ++i){\n            var que = data[i].dingque;\n            if(que == null || que < 0 || que >= arr.length){\n                que = null;\n            }\n            else{\n                que = arr[que]; \n            }\n            \n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(i);\n            if(que){\n                this.dingques[localIndex].getChildByName(que).active = true;    \n            }\n        }\n    },\n    \n    reset:function(){\n        this.setInteractable(true);\n        \n        this.selected.push(this.queYiMen.getChildByName(\"tong_selected\"));\n        this.selected.push(this.queYiMen.getChildByName(\"tiao_selected\"));\n        this.selected.push(this.queYiMen.getChildByName(\"wan_selected\"));\n        for(var i = 0; i < this.selected.length; ++i){\n            this.selected[i].active = false;\n        }        \n        \n        for(var i = 0; i < this.dingques.length; ++i){\n            for(var j = 0; j < this.dingques[i].children.length; ++j){\n                this.dingques[i].children[j].active = false;    \n            }\n        }\n    },\n    \n    onQueYiMenClicked:function(event){\n        var type = 0;\n        if(event.target.name == \"tong\"){\n            type = 0;\n        }\n        else if(event.target.name == \"tiao\"){\n            type = 1;\n        }\n        else if(event.target.name == \"wan\"){\n            type = 2;\n        }\n        \n        for(var i = 0; i < this.selected.length; ++i){\n            this.selected[i].active = false;\n        }  \n        this.selected[type].active = true;\n        cc.vv.gameNetMgr.dingque = type;\n        cc.vv.net.send(\"dingque\",type);\n        \n        //this.setInteractable(false);\n    },\n    \n    setInteractable:function(value){\n        this.queYiMen.getChildByName(\"tong\").getComponent(cc.Button).interactable = value;\n        this.queYiMen.getChildByName(\"tiao\").getComponent(cc.Button).interactable = value;\n        this.queYiMen.getChildByName(\"wan\").getComponent(cc.Button).interactable = value;        \n    }\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});\n"
  ]
}