{"version":3,"sources":["assets/scripts/HTTP.js"],"names":["URL","cc","VERSION","HTTP","Class","extends","Component","statics","sessionId","userId","master_url","url","sendRequest","path","data","handler","extraUrl","xhr","loader","getXMLHttpRequest","timeout","str","k","requestURL","encodeURI","console","log","open","sys","isNative","setRequestHeader","onreadystatechange","readyState","status","responseText","length","ret","JSON","parse","e","vv","wc","send"],"mappings":";;;;;;AAAA;;AAEA;AACA,IAAIA,MAAM,2BAAV;AACA;AACA;AACA;AACA;;AAEAC,GAAGC,OAAH,GAAa,QAAb;AACA,IAAIC,OAAOF,GAAGG,KAAH,CAAS;AAChBC,aAASJ,GAAGK,SADI;;AAGhBC,aAAQ;AACJC,mBAAY,CADR;AAEJC,gBAAS,CAFL;AAGJC,oBAAWV,GAHP;AAIJW,aAAIX,GAJA;AAKJY,qBAAc,qBAASC,IAAT,EAAcC,IAAd,EAAmBC,OAAnB,EAA2BC,QAA3B,EAAoC;AAC9C,gBAAIC,MAAMhB,GAAGiB,MAAH,CAAUC,iBAAV,EAAV;AACAF,gBAAIG,OAAJ,GAAc,IAAd;AACA,gBAAIC,MAAM,GAAV;AACA,iBAAI,IAAIC,CAAR,IAAaR,IAAb,EAAkB;AACd,oBAAGO,OAAO,GAAV,EAAc;AACVA,2BAAO,GAAP;AACH;AACDA,uBAAOC,IAAI,GAAJ,GAAUR,KAAKQ,CAAL,CAAjB;AACH;AACD,gBAAGN,YAAY,IAAf,EAAoB;AAChBA,2BAAWb,KAAKQ,GAAhB;AACH;AACD,gBAAIY,aAAaP,WAAWH,IAAX,GAAkBW,UAAUH,GAAV,CAAnC;AACAI,oBAAQC,GAAR,CAAY,gBAAgBH,UAA5B;AACAN,gBAAIU,IAAJ,CAAS,KAAT,EAAeJ,UAAf,EAA2B,IAA3B;AACA,gBAAItB,GAAG2B,GAAH,CAAOC,QAAX,EAAoB;AAChBZ,oBAAIa,gBAAJ,CAAqB,iBAArB,EAAuC,cAAvC,EAAsD,yBAAtD;AACH;;AAEDb,gBAAIc,kBAAJ,GAAyB,YAAW;AAChCN,wBAAQC,GAAR,CAAYT,GAAZ;AACA,oBAAGA,IAAIe,UAAJ,KAAmB,CAAnB,IAAyBf,IAAIgB,MAAJ,IAAc,GAAd,IAAqBhB,IAAIgB,MAAJ,GAAa,GAA9D,EAAmE;AAC/DR,4BAAQC,GAAR,CAAY,cAAaT,IAAIiB,YAAJ,CAAiBC,MAA9B,GAAuC,IAAvC,GAA8ClB,IAAIiB,YAA9D;AACA,wBAAI;AACA,4BAAIE,MAAMC,KAAKC,KAAL,CAAWrB,IAAIiB,YAAf,CAAV;AACA,4BAAGnB,YAAY,IAAf,EAAoB;AAChBA,oCAAQqB,GAAR;AACH,yBAJD,CAIyB;AAC5B,qBALD,CAKE,OAAOG,CAAP,EAAU;AACRd,gCAAQC,GAAR,CAAY,SAASa,CAArB;AACA;AACH,qBARD,SASO;AACH,4BAAGtC,GAAGuC,EAAH,IAASvC,GAAGuC,EAAH,CAAMC,EAAlB,EAAqB;AACrB;AACC;AACJ;AACJ,iBAhBD,MAiBI;AACAhB,4BAAQC,GAAR,CAAY,YAAUT,IAAIe,UAA1B;AACA;AACA;AACH;AACJ,aAxBD;;AA0BA,gBAAG/B,GAAGuC,EAAH,IAASvC,GAAGuC,EAAH,CAAMC,EAAlB,EAAqB;AACjB;AACH;AACDxB,gBAAIyB,IAAJ;AACA,mBAAOzB,GAAP;AACH;AAxDG;AAHQ,CAAT,CAAX","file":"unknown","sourcesContent":["//local\n\n// var URL = \"http://192.168.0.115:9000\";\nvar URL = \"http://116.62.227.93:9000\";\n//DEV SERVER\n//var URL = \"http://139.219.224.143:9000\";\n//FORMAL SERVER\n//var URL = \"http://119.23.250.115:9000\";\n\ncc.VERSION = 20170609;\nvar HTTP = cc.Class({\n    extends: cc.Component,\n\n    statics:{\n        sessionId : 0,\n        userId : 0,\n        master_url:URL,\n        url:URL,\n        sendRequest : function(path,data,handler,extraUrl){\n            var xhr = cc.loader.getXMLHttpRequest();\n            xhr.timeout = 5000;\n            var str = \"?\";\n            for(var k in data){\n                if(str != \"?\"){\n                    str += \"&\";\n                }\n                str += k + \"=\" + data[k];\n            }\n            if(extraUrl == null){\n                extraUrl = HTTP.url;\n            }\n            var requestURL = extraUrl + path + encodeURI(str);\n            console.log(\"RequestURL:\" + requestURL);\n            xhr.open(\"GET\",requestURL, true);\n            if (cc.sys.isNative){\n                xhr.setRequestHeader(\"Accept-Encoding\",\"gzip,deflate\",\"text/html;charset=UTF-8\");\n            }\n            \n            xhr.onreadystatechange = function() {\n                console.log(xhr);\n                if(xhr.readyState === 4 && (xhr.status >= 200 && xhr.status < 300)){\n                    console.log(\"http res(\"+ xhr.responseText.length + \"):\" + xhr.responseText);\n                    try {\n                        var ret = JSON.parse(xhr.responseText);\n                        if(handler !== null){\n                            handler(ret);\n                        }                        /* code */\n                    } catch (e) {\n                        console.log(\"err:\" + e);\n                        //handler(null);\n                    }\n                    finally{\n                        if(cc.vv && cc.vv.wc){\n                        //       cc.vv.wc.hide();    \n                        }\n                    }\n                }\n                else{\n                    console.log(\"status=\"+xhr.readyState)\n                    //self.url = \"http://139.219.224.143:9000\";\n                    //HTTP.url = \"http://139.219.224.143:9000\";\n                }\n            };\n            \n            if(cc.vv && cc.vv.wc){\n                //cc.vv.wc.show();\n            }\n            xhr.send();\n            return xhr;\n        },\n    },\n});"]}