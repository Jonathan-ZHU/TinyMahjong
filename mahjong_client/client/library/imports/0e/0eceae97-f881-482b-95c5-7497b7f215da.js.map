{"version":3,"sources":["assets/scripts/MahjongMgr.js"],"names":["mahjongSprites","cc","Class","extends","Component","properties","leftAtlas","default","type","SpriteAtlas","rightAtlas","bottomAtlas","bottomFoldAtlas","pengPrefabSelf","Prefab","pengPrefabLeft","emptyAtlas","holdsEmpty","SpriteFrame","_sides","_pres","_foldPres","onLoad","vv","mahjongmgr","i","push","getMahjongSpriteByID","id","getMahjongType","getSpriteFrameByMJID","pre","mjid","spriteFrameName","getSpriteFrame","getAudioURLByMJID","realId","getEmptySpriteFrame","side","getHoldsEmptySpriteFrame","sortMJ","mahjongs","dingque","self","sort","a","b","t1","t2","getSide","localIndex","getPre","getFoldPre"],"mappings":"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","file":"unknown","sourcesContent":["var mahjongSprites = [];\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        leftAtlas:{\n            default:null,\n            type:cc.SpriteAtlas\n        },\n        \n        rightAtlas:{\n            default:null,\n            type:cc.SpriteAtlas\n        },\n        \n        bottomAtlas:{\n            default:null,\n            type:cc.SpriteAtlas\n        },\n        \n        bottomFoldAtlas:{\n            default:null,\n            type:cc.SpriteAtlas\n        },\n        \n        pengPrefabSelf:{\n            default:null,\n            type:cc.Prefab\n        },\n        \n        pengPrefabLeft:{\n            default:null,\n            type:cc.Prefab\n        },\n        \n        emptyAtlas:{\n            default:null,\n            type:cc.SpriteAtlas\n        },\n        \n        holdsEmpty:{\n            default:[],\n            type:[cc.SpriteFrame]\n        },\n        \n        _sides:null,\n        _pres:null,\n        _foldPres:null,\n    },\n    \n    onLoad:function(){\n        if(cc.vv == null){\n            return;\n        }\n        this._sides = [\"myself\",\"right\",\"up\",\"left\"];\n        this._pres = [\"M_\",\"R_\",\"B_\",\"L_\"];\n        this._foldPres = [\"B_\",\"R_\",\"B_\",\"L_\"];\n        cc.vv.mahjongmgr = this; \n        //筒\n        for(var i = 1; i < 10; ++i){\n            mahjongSprites.push(\"dot_\" + i);        \n        }\n        \n        //条\n        for(var i = 1; i < 10; ++i){\n            mahjongSprites.push(\"bamboo_\" + i);\n        }\n        \n        //万\n        for(var i = 1; i < 10; ++i){\n            mahjongSprites.push(\"character_\" + i);\n        }\n        \n        //中、发、白\n        mahjongSprites.push(\"red\");\n        mahjongSprites.push(\"green\");\n        mahjongSprites.push(\"white\");\n        \n        //东西南北风\n        mahjongSprites.push(\"wind_east\");\n        mahjongSprites.push(\"wind_west\");\n        mahjongSprites.push(\"wind_south\");\n        mahjongSprites.push(\"wind_north\");\n        \n        //春夏秋冬\n        mahjongSprites.push(\"spring\");\n        mahjongSprites.push(\"summer\");\n        mahjongSprites.push(\"autumn\");\n        mahjongSprites.push(\"winter\");\n         \n        //梅兰竹菊 \n        mahjongSprites.push(\"plum\");\n        mahjongSprites.push(\"orchid\");\n        mahjongSprites.push(\"bamboo\");\n        mahjongSprites.push(\"chrysanthemum\");\n    },\n    \n    getMahjongSpriteByID:function(id){\n        return mahjongSprites[id];\n    },\n    \n    getMahjongType:function(id){\n      if(id >= 0 && id < 9){\n          return 0;\n      }\n      else if(id >= 9 && id < 18){\n          return 1;\n      }\n      else if(id >= 18 && id < 27){\n          return 2;\n      }\n    },\n    \n    getSpriteFrameByMJID:function(pre,mjid){\n        var spriteFrameName = this.getMahjongSpriteByID(mjid);\n        spriteFrameName = pre + spriteFrameName;\n        if(pre == \"M_\"){\n            return this.bottomAtlas.getSpriteFrame(spriteFrameName);            \n        }\n        else if(pre == \"B_\"){\n            return this.bottomFoldAtlas.getSpriteFrame(spriteFrameName);\n        }\n        else if(pre == \"L_\"){\n            return this.leftAtlas.getSpriteFrame(spriteFrameName);\n        }\n        else if(pre == \"R_\"){\n            return this.rightAtlas.getSpriteFrame(spriteFrameName);\n        }\n    },\n    \n    getAudioURLByMJID:function(id){\n        var realId = 0;\n        if(id >= 0 && id < 9){\n            realId = id + 21;\n        }\n        else if(id >= 9 && id < 18){\n            realId = id - 8;\n        }\n        else if(id >= 18 && id < 27){\n            realId = id - 7;\n        }\n         if(id == 30){\n            realId = 31;\n        }    \n\n        if(id == 31){\n            realId = 41;\n        }    \n\n        if(id == 32){\n            realId = 51;\n        }    \n\n        if(id == 33){\n            realId = 61;\n        }    \n\n        if(id == 27){\n            realId = 71;\n        }    \n\n        if(id == 28){\n            realId = 81;\n        }    \n\n        if(id == 29){\n            realId = 91;\n        }    \n\n\n        return \"nv/\" + realId + \".mp3\";\n    },\n    \n    getEmptySpriteFrame:function(side){\n        if(side == \"up\"){\n            return this.emptyAtlas.getSpriteFrame(\"e_mj_b_up\");\n        }   \n        else if(side == \"myself\"){\n            return this.emptyAtlas.getSpriteFrame(\"e_mj_b_bottom\");\n        }\n        else if(side == \"left\"){\n            return this.emptyAtlas.getSpriteFrame(\"e_mj_b_left\");\n        }\n        else if(side == \"right\"){\n            return this.emptyAtlas.getSpriteFrame(\"e_mj_b_right\");\n        }\n    },\n    \n    getHoldsEmptySpriteFrame:function(side){\n        if(side == \"up\"){\n            return this.emptyAtlas.getSpriteFrame(\"e_mj_up\");\n        }   \n        else if(side == \"myself\"){\n            return null;\n        }\n        else if(side == \"left\"){\n            return this.emptyAtlas.getSpriteFrame(\"e_mj_left\");\n        }\n        else if(side == \"right\"){\n            return this.emptyAtlas.getSpriteFrame(\"e_mj_right\");\n        }\n    },\n    \n    sortMJ:function(mahjongs,dingque){\n        var self = this;\n        mahjongs.sort(function(a,b){\n            if(dingque >= 0){\n                var t1 = self.getMahjongType(a);\n                var t2 = self.getMahjongType(b);\n                if(t1 != t2){\n                    if(dingque == t1){\n                        return 1;\n                    }\n                    else if(dingque == t2){\n                        return -1;\n                    }\n                }\n            }\n            return a - b;\n        });\n    },\n    \n    getSide:function(localIndex){\n        return this._sides[localIndex];\n    },\n    \n    getPre:function(localIndex){\n        return this._pres[localIndex];\n    },\n    \n    getFoldPre:function(localIndex){\n        return this._foldPres[localIndex];\n    }\n});\n"]}