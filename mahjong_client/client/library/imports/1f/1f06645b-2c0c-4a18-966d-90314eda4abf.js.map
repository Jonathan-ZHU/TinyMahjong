{"version":3,"sources":["assets/scripts/VoiceMgr.js"],"names":["radix","base","crypto","value","h","Math","floor","l","String","fromCharCode","encodermap","decodermap","i","code","v","encode","data","content","len","length","a","b","c","d","getCode","index","charCodeAt","charAt","decode","newData","Uint8Array","cnt","cc","Class","extends","Component","properties","onPlayCallback","_voiceMediaPath","init","sys","isNative","jsb","fileUtils","getWritablePath","setStorageDir","prepare","filename","vv","audioMgr","pauseAll","clearCache","os","OS_ANDROID","reflection","callStaticMethod","OS_IOS","release","resumeAll","cancel","writeVoice","voiceData","fileData","url","writeDataToFile","isFileExist","removeFile","play","stop","getVoiceLevel","maxLevel","random","getVoiceData","console","log","getDataFromFile","download","dir","isDirectoryExist","createDirectory"],"mappings":"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","file":"unknown","sourcesContent":["var radix = 12;\nvar base = 128 - radix;\nfunction crypto(value){\n    value -= base;\n    var h = Math.floor(value/radix) + base;\n    var l = value%radix + base;\n    return String.fromCharCode(h) + String.fromCharCode(l);\n}\n\nvar encodermap = {}\nvar decodermap = {}\nfor(var i = 0; i < 256; ++i){\n    var code = null;\n    var v = i + 1;\n    if(v >= base){\n        code = crypto(v);\n    }\n    else{\n        code = String.fromCharCode(v);    \n    }\n    \n    encodermap[i] = code;\n    decodermap[code] = i;\n}\n\nfunction encode(data){\n    var content = \"\";\n    var len = data.length;\n    var a = (len >> 24) & 0xff;\n    var b = (len >> 16) & 0xff;\n    var c = (len >> 8) & 0xff;\n    var d = len & 0xff;\n    content += encodermap[a];\n    content += encodermap[b];\n    content += encodermap[c];\n    content += encodermap[d];\n    for(var i = 0; i < data.length; ++i){\n        content += encodermap[data[i]];\n    }\n    return content;\n}\n\nfunction getCode(content,index){\n    var c = content.charCodeAt(index);\n    if(c >= base){\n        c = content.charAt(index) + content.charAt(index + 1);\n    }\n    else{\n        c = content.charAt(index);\n    }\n    return c;\n}\nfunction decode(content){\n    var index = 0;\n    var len = 0;\n    for(var i = 0; i < 4; ++i){\n        var c = getCode(content,index);\n        index += c.length;\n        var v = decodermap[c];\n        len |= v << (3-i)*8;\n    }\n    \n    var newData = new Uint8Array(len);\n    var cnt = 0;\n    while(index < content.length){\n        var c = getCode(content,index);\n        index += c.length;\n        newData[cnt] = decodermap[c];\n        cnt++;\n    }\n    return newData;\n}\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //    default: null,      // The default value will be used only when the component attaching\n        //                           to a node for the first time\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        onPlayCallback:null,\n        _voiceMediaPath:null,\n    },\n\n    // use this for initialization\n    init: function () {\n        /*\n        var url = cc.url.raw(\"resources/test.amr\");\n        var fileData = jsb.fileUtils.getDataFromFile(url);\n        var content = \"\";\n        var sep = \"\";\n        for(var i = 0; i < fileData.length; ++i){\n            content += sep + fileData[i];\n            sep = \",\";\n        }\n        \n        var url = cc.url.raw(\"resources/test.txt\");\n        jsb.fileUtils.writeStringToFile(content,url);\n        \n        var url = cc.url.raw(\"resources/test2.amrs\");\n        var content = encode(fileData);\n        jsb.fileUtils.writeStringToFile(content,url);\n        \n        var url = cc.url.raw(\"resources/test2.amr\");\n        jsb.fileUtils.writeDataToFile(decode(content),url);\n        */\n        \n        if(cc.sys.isNative){\n            this._voiceMediaPath = jsb.fileUtils.getWritablePath() + \"/voicemsgs/\";\n            this.setStorageDir(this._voiceMediaPath);\n        }\n    },\n    \n    prepare:function(filename){\n        if(!cc.sys.isNative){\n            return;\n        }\n        cc.vv.audioMgr.pauseAll();\n        this.clearCache(filename);\n        if(cc.sys.os == cc.sys.OS_ANDROID){\n            jsb.reflection.callStaticMethod(\"com/vivigames/voicesdk/VoiceRecorder\", \"prepare\", \"(Ljava/lang/String;)V\",filename);\n        }\n        else if(cc.sys.os == cc.sys.OS_IOS){\n            jsb.reflection.callStaticMethod(\"VoiceSDK\", \"prepareRecord:\",filename);\n        }\n    },\n    \n    release:function(){\n        if(!cc.sys.isNative){\n            return;\n        }\n        cc.vv.audioMgr.resumeAll();\n        if(cc.sys.os == cc.sys.OS_ANDROID){\n            jsb.reflection.callStaticMethod(\"com/vivigames/voicesdk/VoiceRecorder\", \"release\", \"()V\");\n        }\n        else if(cc.sys.os == cc.sys.OS_IOS){\n            jsb.reflection.callStaticMethod(\"VoiceSDK\", \"finishRecord\");\n        }\n    },\n    \n    cancel:function(){\n        if(!cc.sys.isNative){\n            return;\n        }\n        cc.vv.audioMgr.resumeAll();\n        if(cc.sys.os == cc.sys.OS_ANDROID){\n            jsb.reflection.callStaticMethod(\"com/vivigames/voicesdk/VoiceRecorder\", \"cancel\", \"()V\");\n        }\n        else if(cc.sys.os == cc.sys.OS_IOS){\n            jsb.reflection.callStaticMethod(\"VoiceSDK\", \"cancelRecord\");\n        }\n    },\n\n    writeVoice:function(filename,voiceData){\n        if(!cc.sys.isNative){\n            return;\n        }\n        if(voiceData && voiceData.length > 0){\n            var fileData = decode(voiceData);\n            var url = this._voiceMediaPath + filename;\n            this.clearCache(filename);\n            jsb.fileUtils.writeDataToFile(fileData,url); \n        }\n    },\n    \n    clearCache:function(filename){\n        if(cc.sys.isNative){\n            var url = this._voiceMediaPath + filename;\n            //console.log(\"check file:\" + url);\n            if(jsb.fileUtils.isFileExist(url)){\n                //console.log(\"remove:\" + url);\n                jsb.fileUtils.removeFile(url);\n            }\n            if(jsb.fileUtils.isFileExist(url + \".wav\")){\n                //console.log(\"remove:\" + url + \".wav\");\n                jsb.fileUtils.removeFile(url + \".wav\");\n            }   \n        }\n    },\n    \n    play:function(filename){\n        if(!cc.sys.isNative){\n            return;\n        }\n        cc.vv.audioMgr.pauseAll();\n        if(cc.sys.os == cc.sys.OS_ANDROID){\n            jsb.reflection.callStaticMethod(\"com/vivigames/voicesdk/VoicePlayer\", \"play\", \"(Ljava/lang/String;)V\",filename); \n        }\n        else if(cc.sys.os == cc.sys.OS_IOS){\n            jsb.reflection.callStaticMethod(\"VoiceSDK\", \"play:\",filename);\n        }\n        else{\n        }\n    },\n    \n    stop:function(){\n        if(!cc.sys.isNative){\n            return;\n        }\n        cc.vv.audioMgr.resumeAll();\n        if(cc.sys.os == cc.sys.OS_ANDROID){\n            jsb.reflection.callStaticMethod(\"com/vivigames/voicesdk/VoicePlayer\", \"stop\", \"()V\"); \n        }\n        else if(cc.sys.os == cc.sys.OS_IOS){\n            jsb.reflection.callStaticMethod(\"VoiceSDK\", \"stopPlay\");\n        }\n        else{\n        }\n    },\n    \n    getVoiceLevel:function(maxLevel){\n        return Math.floor(Math.random() * maxLevel + 1);\n        if(cc.sys.os == cc.sys.OS_ANDROID){ \n            return jsb.reflection.callStaticMethod(\"com/vivigames/voicesdk/VoiceRecorder\", \"getVoiceLevel\", \"(I)I\",maxLevel);\n        }\n        else if(cc.sys.os == cc.sys.OS_IOS){\n        }\n        else{\n            return Math.floor(Math.random() * maxLevel + 1);\n        }\n    },\n    \n    getVoiceData:function(filename){\n        if(cc.sys.isNative){\n            var url = this._voiceMediaPath + filename;\n            console.log(\"getVoiceData:\" + url);\n            var fileData = jsb.fileUtils.getDataFromFile(url);\n            if(fileData){\n                var content = encode(fileData);\n                return content;\n            }\n        }\n        return \"\";\n    },\n    \n    download:function(){\n        \n    },\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n    \n    setStorageDir:function(dir){\n        if(!cc.sys.isNative){\n            return;\n        }\n        if(cc.sys.os == cc.sys.OS_ANDROID){ \n            jsb.reflection.callStaticMethod(\"com/vivigames/voicesdk/VoiceRecorder\", \"setStorageDir\", \"(Ljava/lang/String;)V\",dir);    \n        }\n        else if(cc.sys.os == cc.sys.OS_IOS){\n            jsb.reflection.callStaticMethod(\"VoiceSDK\", \"setStorageDir:\",dir);\n            if(!jsb.fileUtils.isDirectoryExist(dir)){\n                jsb.fileUtils.createDirectory(dir);\n            }\n        }\n    }\n});\n"]}