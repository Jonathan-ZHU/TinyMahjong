{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "Net",
    "require",
    "Global",
    "cc",
    "Class",
    "extends",
    "Component",
    "properties",
    "lblName",
    "Label",
    "lblMoney",
    "lblGems",
    "lblID",
    "lblNotice",
    "joinGameWin",
    "Node",
    "createRoomWin",
    "settingsWin",
    "helpWin",
    "xiaoxiWin",
    "btnJoinGame",
    "btnReturnGame",
    "sprHeadImg",
    "Sprite",
    "initNetHandlers",
    "self",
    "onShare",
    "vv",
    "anysdkMgr",
    "share",
    "onLoad",
    "sys",
    "isNative",
    "isMobile",
    "cvs",
    "node",
    "getComponent",
    "Canvas",
    "fitHeight",
    "fitWidth",
    "director",
    "loadScene",
    "initLabels",
    "gameNetMgr",
    "roomId",
    "active",
    "userMgr",
    "oldRoomId",
    "enterRoom",
    "youkeorweixin",
    "localStorage",
    "getItem",
    "console",
    "log",
    "find",
    "imgLoader",
    "setUserID",
    "userId",
    "utils",
    "addClickEvent",
    "addComponent",
    "initButtonHandler",
    "notice",
    "version",
    "msg",
    "gemstip",
    "string",
    "refreshInfo",
    "refreshNotice",
    "refreshGemsTip",
    "audioMgr",
    "playBGM",
    "onGet",
    "ret",
    "errcode",
    "errmsg",
    "gems",
    "data",
    "account",
    "sign",
    "http",
    "sendRequest",
    "bind",
    "replace",
    "type",
    "btnPath",
    "btn",
    "userName",
    "coins",
    "onBtnClicked",
    "event",
    "target",
    "name",
    "userinfoShow",
    "show",
    "sex",
    "ip",
    "onJoinGameClicked",
    "onReturnGameClicked",
    "onBtnAddGemsClicked",
    "alert",
    "onCreateRoomClicked",
    "update",
    "dt",
    "x",
    "width",
    "roomData"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "var Net = require(\"Net\")\r\nvar Global = require(\"Global\")\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        lblName:cc.Label,\r\n        lblMoney:cc.Label,\r\n        lblGems:cc.Label,\r\n        lblID:cc.Label,\r\n        lblNotice:cc.Label,\r\n        joinGameWin:cc.Node,\r\n        createRoomWin:cc.Node,\r\n        settingsWin:cc.Node,\r\n        helpWin:cc.Node,\r\n        xiaoxiWin:cc.Node,\r\n        btnJoinGame:cc.Node,\r\n        btnReturnGame:cc.Node,\r\n        sprHeadImg:cc.Sprite,\r\n        // foo: {\r\n        //    default: null,\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n    },\r\n    \r\n    initNetHandlers:function(){\r\n        var self = this;\r\n    },\r\n    \r\n    onShare:function(){\r\n        cc.vv.anysdkMgr.share(\"舟山麻将\",\"舟山麻将，包含了沈家门麻将、定海麻将、推到胡等多种舟山流行麻将玩法。\");   \r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        if(!cc.sys.isNative && cc.sys.isMobile){\r\n            var cvs = this.node.getComponent(cc.Canvas);\r\n            cvs.fitHeight = true;\r\n            cvs.fitWidth = true;\r\n        }\r\n        if(!cc.vv){\r\n            cc.director.loadScene(\"loading\");\r\n            return;\r\n        }\r\n        this.initLabels();\r\n        \r\n        if(cc.vv.gameNetMgr.roomId == null){\r\n            this.btnJoinGame.active = true;\r\n            this.btnReturnGame.active = false;\r\n        }\r\n        else{\r\n            this.btnJoinGame.active = false;\r\n            this.btnReturnGame.active = true;\r\n        }\r\n        \r\n        //var params = cc.vv.args;\r\n        var roomId = cc.vv.userMgr.oldRoomId \r\n        if( roomId != null){\r\n            cc.vv.userMgr.oldRoomId = null;\r\n            cc.vv.userMgr.enterRoom(roomId);\r\n        }\r\n        \r\n\r\n        var youkeorweixin = cc.sys.localStorage.getItem(\"youkeorweixin\");\r\n                console.log(\"youkeorweixin:\"+youkeorweixin);\r\n                if(youkeorweixin == 0){\r\n                    \r\n                        cc.find(\"Canvas/top_left/headinfo/bg\").active = false; \r\n                        cc.find(\"Canvas/top_left/headinfo/gems\").active = false; \r\n                        cc.find(\"Canvas/top_left/headinfo/lblGems\").active = false; \r\n                        cc.find(\"Canvas/top_left/headinfo/btn_add_gems\").active = false; \r\n\r\n\r\n                        cc.find(\"Canvas/hallBg/fujianmajiang\").active = false; \r\n                        cc.find(\"Canvas/hallBg/anhuimajiang\").active = false; \r\n                        cc.find(\"Canvas/hallBg/qiqibuyu\").active = false; \r\n                        cc.find(\"Canvas/hallBg/qiqipuke\").active = false; \r\n                        cc.find(\"Canvas/hallBg/more\").active = false; \r\n                        cc.find(\"Canvas/hallBg/xixia001\").active = false; \r\n                        cc.find(\"Canvas/right_bottom/btn_share\").active = false; \r\n                        cc.find(\"Canvas/right_bottom/btn_zhanji\").active = false; \r\n            }\r\n\r\n\r\n        var imgLoader = this.sprHeadImg.node.getComponent(\"ImageLoader\");\r\n        imgLoader.setUserID(cc.vv.userMgr.userId);\r\n        cc.vv.utils.addClickEvent(this.sprHeadImg.node,this.node,\"Hall\",\"onBtnClicked\");\r\n        \r\n        \r\n        this.addComponent(\"UserInfoShow\");\r\n        \r\n        this.initButtonHandler(\"Canvas/right_bottom/btn_shezhi\");\r\n        this.initButtonHandler(\"Canvas/right_bottom/btn_help\");\r\n        this.initButtonHandler(\"Canvas/right_bottom/btn_xiaoxi\");\r\n        this.helpWin.addComponent(\"OnBack\");\r\n        this.xiaoxiWin.addComponent(\"OnBack\");\r\n        \r\n        if(!cc.vv.userMgr.notice){\r\n            cc.vv.userMgr.notice = {\r\n                version:null,\r\n                msg:\"数据请求中...\",\r\n            }\r\n        }\r\n        \r\n        if(!cc.vv.userMgr.gemstip){\r\n            cc.vv.userMgr.gemstip = {\r\n                version:null,\r\n                msg:\"数据请求中...\",\r\n            }\r\n        }\r\n        \r\n        this.lblNotice.string = cc.vv.userMgr.notice.msg;\r\n        \r\n        this.refreshInfo();\r\n        this.refreshNotice();\r\n        this.refreshGemsTip();\r\n        \r\n        cc.vv.audioMgr.playBGM(\"bgMain.mp3\");\r\n    },\r\n    \r\n    refreshInfo:function(){\r\n        var self = this;\r\n        var onGet = function(ret){\r\n            if(ret.errcode !== 0){\r\n                console.log(ret.errmsg);\r\n            }\r\n            else{\r\n                if(ret.gems != null){\r\n                    this.lblGems.string = ret.gems;    \r\n                }\r\n            }\r\n        };\r\n        \r\n        var data = {\r\n            account:cc.vv.userMgr.account,\r\n            sign:cc.vv.userMgr.sign,\r\n        };\r\n        cc.vv.http.sendRequest(\"/get_user_status\",data,onGet.bind(this));\r\n    },\r\n    \r\n    refreshGemsTip:function(){\r\n        var self = this;\r\n        var onGet = function(ret){\r\n            if(ret.errcode !== 0){\r\n                console.log(ret.errmsg);\r\n            }\r\n            else{\r\n                cc.vv.userMgr.gemstip.version = ret.version;\r\n                cc.vv.userMgr.gemstip.msg = ret.msg.replace(\"<newline>\",\"\\n\");\r\n            }\r\n        };\r\n        \r\n        var data = {\r\n            account:cc.vv.userMgr.account,\r\n            sign:cc.vv.userMgr.sign,\r\n            type:\"fkgm\",\r\n            version:cc.vv.userMgr.gemstip.version\r\n        };\r\n        cc.vv.http.sendRequest(\"/get_message\",data,onGet.bind(this));\r\n    },\r\n    \r\n    refreshNotice:function(){\r\n        var self = this;\r\n        var onGet = function(ret){\r\n            if(ret.errcode !== 0){\r\n                console.log(ret.errmsg);\r\n            }\r\n            else{\r\n                cc.vv.userMgr.notice.version = ret.version;\r\n                cc.vv.userMgr.notice.msg = ret.msg;\r\n                this.lblNotice.string = ret.msg;\r\n            }\r\n        };\r\n        \r\n        var data = {\r\n            account:cc.vv.userMgr.account,\r\n            sign:cc.vv.userMgr.sign,\r\n            type:\"notice\",\r\n            version:cc.vv.userMgr.notice.version\r\n        };\r\n        cc.vv.http.sendRequest(\"/get_message\",data,onGet.bind(this));\r\n    },\r\n    \r\n    initButtonHandler:function(btnPath){\r\n        var btn = cc.find(btnPath);\r\n        cc.vv.utils.addClickEvent(btn,this.node,\"Hall\",\"onBtnClicked\");        \r\n    },\r\n    \r\n    \r\n    \r\n    initLabels:function(){\r\n        this.lblName.string = cc.vv.userMgr.userName;\r\n        this.lblMoney.string = cc.vv.userMgr.coins;\r\n        this.lblGems.string = cc.vv.userMgr.gems;\r\n        this.lblID.string = \"ID:\" + cc.vv.userMgr.userId;\r\n    },\r\n    \r\n    onBtnClicked:function(event){\r\n        if(event.target.name == \"btn_shezhi\"){\r\n            this.settingsWin.active = true;\r\n        }   \r\n        else if(event.target.name == \"btn_help\"){\r\n            this.helpWin.active = true;\r\n        }\r\n        else if(event.target.name == \"btn_xiaoxi\"){\r\n            this.xiaoxiWin.active = true;\r\n        }\r\n        else if(event.target.name == \"head\"){\r\n            cc.vv.userinfoShow.show(cc.vv.userMgr.userName,cc.vv.userMgr.userId,this.sprHeadImg,cc.vv.userMgr.sex,cc.vv.userMgr.ip);\r\n        }\r\n    },\r\n    \r\n    onJoinGameClicked:function(){\r\n        this.joinGameWin.active = true;\r\n    },\r\n    \r\n    onReturnGameClicked:function(){\r\n        cc.director.loadScene(\"mjgame\");  \r\n    },\r\n    \r\n    onBtnAddGemsClicked:function(){\r\n        cc.vv.alert.show(\"提示\",cc.vv.userMgr.gemstip.msg);\r\n        this.refreshInfo();\r\n    },\r\n    \r\n    onCreateRoomClicked:function(){\r\n        if(cc.vv.gameNetMgr.roomId != null){\r\n            cc.vv.alert.show(\"提示\",\"房间已经创建!\\n必须解散当前房间才能创建新的房间\");\r\n            return;\r\n        }\r\n        console.log(\"onCreateRoomClicked\");\r\n        this.createRoomWin.active = true;   \r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    update: function (dt) {\r\n        var x = this.lblNotice.node.x;\r\n        x -= dt*100;\r\n        if(x + this.lblNotice.node.width < -1000){\r\n            x = 500;\r\n        }\r\n        this.lblNotice.node.x = x;\r\n        \r\n        if(cc.vv && cc.vv.userMgr.roomData != null){\r\n            cc.vv.userMgr.enterRoom(cc.vv.userMgr.roomData);\r\n            cc.vv.userMgr.roomData = null;\r\n        }\r\n    },\r\n});\r\n"
  ]
}