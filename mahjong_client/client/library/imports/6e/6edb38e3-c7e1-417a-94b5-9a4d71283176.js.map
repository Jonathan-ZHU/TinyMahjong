{"version":3,"sources":["assets/scripts/components/Hall.js"],"names":["Net","require","Global","cc","Class","extends","Component","properties","lblName","Label","lblMoney","lblGems","lblID","lblNotice","joinGameWin","Node","createRoomWin","settingsWin","helpWin","xiaoxiWin","btnJoinGame","btnReturnGame","sprHeadImg","Sprite","initNetHandlers","self","onShare","find","active","vv","anysdkMgr","share","data","userid","userMgr","userId","type","http","sendRequest","res","console","log","errcode","gems","alert","show","getComponent","string","onTimeline","shareOnTimeline","onLoad","sys","isNative","isMobile","cvs","node","Canvas","fitHeight","fitWidth","director","loadScene","initLabels","gameNetMgr","roomId","oldRoomId","enterRoom","imgLoader","setUserID","utils","addClickEvent","addComponent","initButtonHandler","notice","version","msg","gemstip","refreshInfo","refreshNotice","refreshGemsTip","audioMgr","playBGM","initCheckin","preloadScene","youkeorweixin","localStorage","getItem","os","OS_IOS","showAct","checkin_days","checkin_date","checkin_data","d","Date","y","getFullYear","m","getMonth","day","getDate","nowdate","days","children","i","getChildByName","Button","interactable","color","Color","opacity","openShareBox","closeShareBox","closeActivity","onDaysClicked","addgems","onGet","ret","errmsg","account","sign","bind","replace","btnPath","btn","userName","coins","onBtnClicked","event","target","name","userinfoShow","sex","ip","onJoinGameClicked","onReturnGameClicked","loadgame","fadeout","fadeOut","finish","callFunc","seq","sequence","runAction","onBtnAddGemsClicked","jsb","reflection","callStaticMethod","onCreateRoomClicked","onCheckinClicked","onCheckinClose","update","dt","x","width","roomData"],"mappings":"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","file":"unknown","sourcesContent":["var Net = require(\"Net\")\nvar Global = require(\"Global\")\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        lblName:cc.Label,\n        lblMoney:cc.Label,\n        lblGems:cc.Label,\n        lblID:cc.Label,\n        lblNotice:cc.Label,\n        joinGameWin:cc.Node,\n        createRoomWin:cc.Node,\n        settingsWin:cc.Node,\n        helpWin:cc.Node,\n        xiaoxiWin:cc.Node,\n        btnJoinGame:cc.Node,\n        btnReturnGame:cc.Node,\n        sprHeadImg:cc.Sprite,\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n    },\n    \n    initNetHandlers:function(){\n        var self = this;\n    },\n    \n    onShare:function(){\n        cc.find(\"Canvas/ShareBox\").active = false;\n        cc.vv.anysdkMgr.share(\"舟山麻将\",\"舟山麻将，包含了沈家门麻将、定海麻将、推到胡等多种舟山流行麻将玩法。\"); \n        var data = {\n            userid:cc.vv.userMgr.userId,\n            type:\"share\"\n        };\n        cc.vv.http.sendRequest(\"/share_get_gems\",data,function(res){\n            console.log(\"share_get_gems\");\n            if(res.errcode.data.gems>0){\n                cc.vv.alert.show(\"提示\",\"微信分享成功，获得\"+res.errcode.data.gems+\"钻\");\n                cc.vv.userMgr.gems += res.errcode.data.gems;\n                cc.find(\"Canvas/top_left/headinfo/lblGems\").getComponent(cc.Label).string = cc.vv.userMgr.gems;\n            }\n            cc.find(\"Canvas/ShareBox\").active = false;\n            console.log(res);\n        });\n    },\n    \n    onTimeline:function(){\n        cc.find(\"Canvas/ShareBox\").active = false;\n        cc.vv.anysdkMgr.shareOnTimeline(\"舟山麻将\",\"舟山麻将，包含了沈家门麻将、定海麻将、推到胡等多种舟山流行麻将玩法。\");  \n        var data = {\n            userid:cc.vv.userMgr.userId,\n            type:\"timeline\"\n        };\n        cc.vv.http.sendRequest(\"/share_get_gems\",data,function(res){\n            console.log(\"share_get_gems\");\n            if(res.errcode.data.gems>0){\n                cc.vv.alert.show(\"提示\",\"微信分享到朋友圈成功，获得\"+res.errcode.data.gems+\"钻\");\n                cc.vv.userMgr.gems += res.errcode.data.gems;\n                cc.find(\"Canvas/top_left/headinfo/lblGems\").getComponent(cc.Label).string = cc.vv.userMgr.gems;\n            }\n            cc.find(\"Canvas/ShareBox\").active = false;\n            console.log(res);\n        });\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        if(!cc.sys.isNative && cc.sys.isMobile){\n            var cvs = this.node.getComponent(cc.Canvas);\n            cvs.fitHeight = true;\n            cvs.fitWidth = true;\n        }\n        if(!cc.vv){\n            cc.director.loadScene(\"loading\");\n            return;\n        }\n        this.initLabels();\n        \n        if(cc.vv.gameNetMgr.roomId == null){\n            this.btnJoinGame.active = true;\n            this.btnReturnGame.active = false;\n        }\n        else{\n            this.btnJoinGame.active = false;\n            this.btnReturnGame.active = true;\n        }\n        \n        //var params = cc.vv.args;\n        var roomId = cc.vv.userMgr.oldRoomId \n        if( roomId != null){\n            cc.vv.userMgr.oldRoomId = null;\n            cc.vv.userMgr.enterRoom(roomId);\n        }\n        \n        var imgLoader = this.sprHeadImg.node.getComponent(\"ImageLoader\");\n        imgLoader.setUserID(cc.vv.userMgr.userId);\n        cc.vv.utils.addClickEvent(this.sprHeadImg.node,this.node,\"Hall\",\"onBtnClicked\");\n        \n        \n        this.addComponent(\"UserInfoShow\");\n        \n        this.initButtonHandler(\"Canvas/right_bottom/btn_shezhi\");\n        this.initButtonHandler(\"Canvas/right_bottom/btn_help\");\n        this.initButtonHandler(\"Canvas/right_bottom/btn_xiaoxi\");\n        this.helpWin.addComponent(\"OnBack\");\n        this.xiaoxiWin.addComponent(\"OnBack\");\n        \n        if(!cc.vv.userMgr.notice){\n            cc.vv.userMgr.notice = {\n                version:null,\n                msg:\"数据请求中...\",\n            }\n        }\n        \n        if(!cc.vv.userMgr.gemstip){\n            cc.vv.userMgr.gemstip = {\n                version:null,\n                msg:\"数据请求中...\",\n            }\n        }\n        \n        this.lblNotice.string = cc.vv.userMgr.notice.msg;\n        \n        this.refreshInfo();\n        this.refreshNotice();\n        this.refreshGemsTip();\n        \n        cc.vv.audioMgr.playBGM(\"bgMain.mp3\");\n        \n        //初始化签到信息\n        this.initCheckin();\n        \n        //预加载麻将游戏界面\n        cc.director.preloadScene('mjgame', function () {\n            cc.log('preload mjgame complete!!!');\n        });\n        \n        var youkeorweixin = cc.sys.localStorage.getItem(\"youkeorweixin\");\n        if(cc.sys.os == cc.sys.OS_IOS && youkeorweixin == \"0\"){\n            //隐藏显示下边按钮\n            cc.find(\"Canvas/hallBg/fujianmajiang\").active = false;\n            cc.find(\"Canvas/hallBg/anhuimajiang\").active = false;\n            cc.find(\"Canvas/hallBg/qiqibuyu\").active = false;\n            cc.find(\"Canvas/hallBg/qiqipuke\").active = false;\n            cc.find(\"Canvas/hallBg/more\").active = false;\n            cc.find(\"Canvas/hallBg/xixia001\").active = false;\n            // cc.find(\"Canvas/top_left/headinfo/bg\").active = false;\n            // cc.find(\"Canvas/top_left/headinfo/gems\").active = false;\n            // cc.find(\"Canvas/top_left/headinfo/btn_add_gems\").active = false;\n            // cc.find(\"Canvas/top_left/headinfo/lblGems\").active = false;\n            cc.find(\"Canvas/right_bottom/btn_zhanji\").active = false;\n            cc.find(\"Canvas/right_bottom/btn_share\").active = false;\n            cc.find(\"Canvas/right_bottom/btn_checkin\").active = false;\n            // cc.find(\"Canvas/CreateRoom/sjmmj/cost\").active = false;\n            // cc.find(\"Canvas/CreateRoom/dhmj/cost\").active = false;\n            // cc.find(\"Canvas/CreateRoom/tdh/cost\").active = false;\n            cc.find(\"Canvas/CreateRoom/bg/New Label\").active = false;\n            cc.vv.utils.showAct = false;\n        }\n        \n        if(cc.vv.utils.showAct) {\n            cc.find(\"Canvas/Activity\").active = true;\n        }\n        \n    },\n    \n    //初始化签到信息\n    initCheckin:function(){\n        //获取签到信息\n        var data = {\n            userid:cc.vv.userMgr.userId\n        };\n        cc.vv.http.sendRequest(\"/get_checkin_status\",data,function(res){\n            console.log(\"get_checkin_status\");\n            console.log(res);\n            //当前已签到次数\n            var checkin_days = res.errcode.data.checkin_days;\n            //上次签到时间\n            var checkin_date = res.errcode.data.checkin_data;\n            //当前日期\n            var d = new Date();\n            var y = d.getFullYear();\n            var m = d.getMonth()+1;\n            m = m < 10 ? (\"0\" + m) : m;\n            var day = d.getDate();\n            day = day < 10 ? (\"0\" + day) : day;\n            var nowdate = y+\"-\"+m+\"-\"+day;\n            \n            //获取7天的签到图片\n            var days = cc.find(\"Canvas/CheckinBox/bg\").children;\n            var checkin_days = checkin_days % 7;\n            for (var i = 0 ; i < checkin_days ; i++) {\n                days[i].getChildByName(\"hascheckin\").active = true;\n                days[i].getComponent(cc.Button).interactable = false;\n                days[i].color =  new cc.Color(168, 168, 168);\n                days[i].opacity = 255;\n            }\n            for (var i = checkin_days ; i < 7 ; i++) {\n                days[i].getChildByName(\"hascheckin\").active = false;\n                days[i].getComponent(cc.Button).interactable = false;\n                days[i].color = new cc.Color(255, 255, 255);\n                days[i].opacity = 160;\n            }\n            if(checkin_date != nowdate){\n                days[checkin_days].opacity = 255;\n                days[checkin_days].getComponent(cc.Button).interactable = true;\n            }\n            \n            \n        });\n    },\n    \n    openShareBox:function(){\n        cc.find(\"Canvas/ShareBox\").active = true;\n    },\n    \n    closeShareBox:function(){\n        cc.find(\"Canvas/ShareBox\").active = false;\n    },\n    \n    closeActivity:function(){\n        cc.find(\"Canvas/Activity\").active = false;\n        cc.vv.utils.showAct = false;\n    },\n    \n    onDaysClicked:function(){\n        console.log(\"onDaysClicked\");\n        //隐藏签到面板\n        cc.find(\"Canvas/CheckinBox\").active = false;\n        //发送请求\n        var data = {\n            userid:cc.vv.userMgr.userId\n        };\n        var self = this;\n        cc.vv.http.sendRequest(\"/checkin\",data,function(res){\n            var addgems = res.errcode.data.gems;\n            self.initCheckin();\n            cc.vv.alert.show(\"提示\",\"签到成功，获得\"+addgems+\"钻\");\n            cc.vv.userMgr.gems += addgems;\n            cc.find(\"Canvas/top_left/headinfo/lblGems\").getComponent(cc.Label).string = cc.vv.userMgr.gems;\n        });\n        \n    },\n    \n    refreshInfo:function(){\n        var self = this;\n        var onGet = function(ret){\n            if(ret.errcode !== 0){\n                console.log(ret.errmsg);\n            }\n            else{\n                if(ret.gems != null){\n                    this.lblGems.string = ret.gems;    \n                }\n            }\n        };\n        \n        var data = {\n            account:cc.vv.userMgr.account,\n            sign:cc.vv.userMgr.sign,\n        };\n        cc.vv.http.sendRequest(\"/get_user_status\",data,onGet.bind(this));\n    },\n    \n    refreshGemsTip:function(){\n        var self = this;\n        var onGet = function(ret){\n            if(ret.errcode !== 0){\n                console.log(ret.errmsg);\n            }\n            else{\n                cc.vv.userMgr.gemstip.version = ret.version;\n                cc.vv.userMgr.gemstip.msg = ret.msg.replace(\"<newline>\",\"\\n\");\n            }\n        };\n        \n        var data = {\n            account:cc.vv.userMgr.account,\n            sign:cc.vv.userMgr.sign,\n            type:\"fkgm\",\n            version:cc.vv.userMgr.gemstip.version\n        };\n        cc.vv.http.sendRequest(\"/get_message\",data,onGet.bind(this));\n    },\n    \n    refreshNotice:function(){\n        var self = this;\n        var onGet = function(ret){\n            if(ret.errcode !== 0){\n                console.log(ret.errmsg);\n            }\n            else{\n                cc.vv.userMgr.notice.version = ret.version;\n                cc.vv.userMgr.notice.msg = ret.msg;\n                this.lblNotice.string = ret.msg;\n            }\n        };\n        \n        var data = {\n            account:cc.vv.userMgr.account,\n            sign:cc.vv.userMgr.sign,\n            type:\"notice\",\n            version:cc.vv.userMgr.notice.version\n        };\n        cc.vv.http.sendRequest(\"/get_message\",data,onGet.bind(this));\n    },\n    \n    initButtonHandler:function(btnPath){\n        var btn = cc.find(btnPath);\n        cc.vv.utils.addClickEvent(btn,this.node,\"Hall\",\"onBtnClicked\");        \n    },\n    \n    \n    \n    initLabels:function(){\n        this.lblName.string = cc.vv.userMgr.userName;\n        this.lblMoney.string = cc.vv.userMgr.coins;\n        this.lblGems.string = cc.vv.userMgr.gems;\n        this.lblID.string = \"ID:\" + cc.vv.userMgr.userId;\n    },\n    \n    onBtnClicked:function(event){\n        if(event.target.name == \"btn_shezhi\"){\n            this.settingsWin.active = true;\n        }   \n        else if(event.target.name == \"btn_help\"){\n            this.helpWin.active = true;\n        }\n        else if(event.target.name == \"btn_xiaoxi\"){\n            this.xiaoxiWin.active = true;\n        }\n        else if(event.target.name == \"head\"){\n            cc.vv.userinfoShow.show(cc.vv.userMgr.userName,cc.vv.userMgr.userId,this.sprHeadImg,cc.vv.userMgr.sex,cc.vv.userMgr.ip);\n        }\n    },\n    \n    onJoinGameClicked:function(){\n        this.joinGameWin.active = true;\n    },\n    \n    onReturnGameClicked:function(){\n        var loadgame = function (){\n            cc.director.loadScene(\"mjgame\");  \n        }\n        var fadeout = cc.fadeOut(0.1);\n        var finish = cc.callFunc(loadgame, this);\n        var seq = cc.sequence(fadeout, finish);\n        this.node.runAction(seq);\n    },\n    \n    onBtnAddGemsClicked:function(){\n        // cc.vv.alert.show(\"提示\",cc.vv.userMgr.gemstip.msg);\n        // this.refreshInfo();\n         cc.log(\"apple 内购\");\n      \n        if (cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS) {\n        let ret = jsb.reflection.callStaticMethod(\"AdMaster\",\"showAd:title:\",\"apple\",\"内购\");\n        }\n \n        \n    },\n    \n    onCreateRoomClicked:function(){\n        if(cc.vv.gameNetMgr.roomId != null){\n            cc.vv.alert.show(\"提示\",\"房间已经创建!\\n必须解散当前房间才能创建新的房间\");\n            return;\n        }\n        console.log(\"onCreateRoomClicked\");\n        this.createRoomWin.active = true;   \n    },\n    \n    onCheckinClicked:function(){\n        cc.find(\"Canvas/CheckinBox\").active = true;\n    },\n    onCheckinClose:function(){\n        cc.find(\"Canvas/CheckinBox\").active = false;\n    },\n\n    // called every frame, uncomment this function to activate update callback\n    update: function (dt) {\n        var x = this.lblNotice.node.x;\n        x -= dt*100;\n        if(x + this.lblNotice.node.width < -1000){\n            x = 500;\n        }\n        this.lblNotice.node.x = x;\n        \n        if(cc.vv && cc.vv.userMgr.roomData != null){\n            cc.vv.userMgr.enterRoom(cc.vv.userMgr.roomData);\n            cc.vv.userMgr.roomData = null;\n        }\n    },\n});\n"]}