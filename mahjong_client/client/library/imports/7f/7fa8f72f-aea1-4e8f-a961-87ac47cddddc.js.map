{"version":3,"sources":["assets/scripts/components/MJGame.js"],"names":["cc","Class","extends","Component","properties","gameRoot","default","type","Node","prepareRoot","_myMJArr","_options","_selectedMJ","_chupaiSprite","_mjcount","_gamecount","_hupaiTips","_hupaiLists","_playEfxs","_opts","_gametype","onLoad","sys","isNative","isMobile","cvs","node","getComponent","Canvas","fitHeight","fitWidth","vv","director","loadScene","addComponent","initView","initEventHandlers","active","initWanfaLabel","onGameBeign","audioMgr","playBGM","gameChild","getChildByName","Label","string","gameNetMgr","numOfMJ","fengxiang","conf","myselfChild","myholds","i","children","length","sprite","Sprite","push","spriteFrame","realwidth","getVisibleSize","width","scaleX","scaleY","sides","side","sideChild","Animation","opt","data","opts","hideOptions","hideChupai","dataEventHandler","self","on","initMahjongs","checkQueYiMen","playShazi","detail","last","seatIndex","initMopai","replayMgr","isReplay","turn","pai","localIndex","getLocalIndex","index","setSpriteFrameByMJID","mjId","showAction","console","log","seatindex","hupai","seatData","seats","hued","initHupai","iszimo","holds","pop","initOtherMahjongs","mahjongmgr","getSpriteFrameByMJID","playEfx","playSFX","showChupai","audioUrl","getAudioURLByMJID","gangtype","chupai","addOption","btnName","chitype","left","op","mid","right","childrenCount","child","name","btn","hu","gang","peng","chi","gangpai","gp","wanfa","find","getWanfa","hupailist","hupainode","pre","getFoldPre","play","anim1","anim2","onfinished","isshow","show","sprIcon","userid","setUserID","j","huinfo","info","ishupai","nc","holdsEmpty","gamestate","curaction","onMJClicked","event","isHuanSanZhang","emit","target","shoot","y","hideSameType","showSameType","mj","getEnd","mainStr","searchStr","foundOffset","indexOf","substring","mjname","_name","allfolds","concat","pgs","nowpg","nowsprite","nowname","color","Color","chuhua","mjid","net","send","getMJIndex","getSide","lastIndex","getHoldsEmptySpriteFrame","initEmptySprites","getEmptySpriteFrame","game","sideRoot","sideHolds","num","pengs","angangs","diangangs","wangangs","chis","idx","sortHolds","lasetIdx","mopai","l","dingque","sortMJ","lackingNum","getSelfData","hasQue","getMahjongType","Button","interactable","ret","onOptionClicked","update","dt","onDestroy","clear"],"mappings":"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","file":"unknown","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {        \n        gameRoot:{\n            default:null,\n            type:cc.Node\n        },\n        \n        prepareRoot:{\n            default:null,\n            type:cc.Node   \n        },\n        \n        _myMJArr:[],\n        _options:null,\n        _selectedMJ:null,\n        _chupaiSprite:[],\n        _mjcount:null,\n        _gamecount:null,\n        _hupaiTips:[],\n        _hupaiLists:[],\n        _playEfxs:[],\n        _opts:[],\n        _gametype:null,\n    },\n    \n    onLoad: function () {\n        if(!cc.sys.isNative && cc.sys.isMobile){\n            var cvs = this.node.getComponent(cc.Canvas);\n            cvs.fitHeight = true;\n            cvs.fitWidth = true;\n        }\n        if(!cc.vv){\n            cc.director.loadScene(\"loading\");\n            return;\n        }\n        this.addComponent(\"NoticeTip\");\n        this.addComponent(\"GameOver\");\n        this.addComponent(\"DingQue\");\n        this.addComponent(\"PengGangs\");\n        this.addComponent(\"MJRoom\");\n        this.addComponent(\"TimePointer\");\n        this.addComponent(\"GameResult\");\n        this.addComponent(\"Chat\");\n        this.addComponent(\"Folds\");\n        this.addComponent(\"ReplayCtrl\");\n        this.addComponent(\"PopupMgr\");\n        this.addComponent(\"HuanSanZhang\");\n        this.addComponent(\"ReConnect\");\n        this.addComponent(\"Voice\");\n        this.addComponent(\"UserInfoShow\");\n        this.addComponent(\"Alert\");\n        this.initView();\n        this.initEventHandlers();\n        \n        this.gameRoot.active = false;\n        this.prepareRoot.active = true;\n        this.initWanfaLabel();\n        this.onGameBeign();\n        cc.vv.audioMgr.playBGM(\"bgMain.mp3\");\n        \n        //淡入\n        // var fadein = cc.fadeIn(0.1);\n        // this.node.runAction(fadein);\n    },\n    \n    initView:function(){\n        \n        //搜索需要的子节点\n        var gameChild = this.node.getChildByName(\"game\");\n        \n        this._mjcount = gameChild.getChildByName('mjcount').getComponent(cc.Label);\n        if(this._mjcount>0){\n            this._mjcount.string = \"剩余\" + cc.vv.gameNetMgr.numOfMJ + \"张\";\n        }else{\n            this._mjcount.string = \"\";\n        }\n        this._gamecount = gameChild.getChildByName('gamecount').getComponent(cc.Label);\n        switch(cc.vv.gameNetMgr.fengxiang) {\n            case 0: \n                this._gamecount.string = \"东风圈\";break;\n            case 1: \n                this._gamecount.string = \"南风圈\";break;\n            case 2: \n                this._gamecount.string = \"西风圈\";break;\n            case 3: \n                this._gamecount.string = \"北风圈\";break;\n            default:\n                this._gamecount.string = \"\";break;\n        }\n        \n        \n        this._gametype = gameChild.getChildByName('gametype');\n        switch (cc.vv.gameNetMgr.conf.type) {\n            case \"sjmmj\" :  this._gametype.getComponent(cc.Label).string = \"沈家门麻将\";break;\n            case \"dhmj\" :  this._gametype.getComponent(cc.Label).string = \"定海麻将\";break;\n            case \"tdh\" :  this._gametype.getComponent(cc.Label).string = \"推到胡\";break;\n        }\n            \n\n        var myselfChild = gameChild.getChildByName(\"myself\");\n        var myholds = myselfChild.getChildByName(\"holds\");\n        \n        for(var i = 0; i < myholds.children.length; ++i){\n            var sprite = myholds.children[i].getComponent(cc.Sprite);\n            this._myMJArr.push(sprite);\n            sprite.spriteFrame = null;\n        }\n        \n        var realwidth = cc.director.getVisibleSize().width;\n        myholds.scaleX *= realwidth/1280;\n        myholds.scaleY *= realwidth/1280;  \n        \n        var sides = [\"myself\",\"right\",\"up\",\"left\"];\n        for(var i = 0; i < sides.length; ++i){\n            var side = sides[i];\n            \n            var sideChild = gameChild.getChildByName(side);\n            this._hupaiTips.push(sideChild.getChildByName(\"HuPai\"));\n            this._hupaiLists.push(sideChild.getChildByName(\"hupailist\"));\n            this._playEfxs.push(sideChild.getChildByName(\"play_efx\").getComponent(cc.Animation));\n            this._chupaiSprite.push(sideChild.getChildByName(\"ChuPai\").children[0].getComponent(cc.Sprite));\n            \n            var opt = sideChild.getChildByName(\"opt\");\n            opt.active = false;\n            var sprite = opt.getChildByName(\"pai\").getComponent(cc.Sprite);\n            var data = {\n                node:opt,\n                sprite:sprite\n            };\n            this._opts.push(data);\n        }\n        \n        var opts = gameChild.getChildByName(\"ops\");\n        this._options = opts;\n        this.hideOptions();\n        this.hideChupai();\n    },\n    \n    hideChupai:function(){\n        for(var i = 0; i < this._chupaiSprite.length; ++i){\n            this._chupaiSprite[i].node.active = false;\n        }        \n    },\n    \n    initEventHandlers:function(){\n        cc.vv.gameNetMgr.dataEventHandler = this.node;\n        \n        //初始化事件监听器\n        var self = this;\n        \n        this.node.on('game_holds',function(data){\n           self.initMahjongs();\n           self.checkQueYiMen();\n        });\n        \n        this.node.on('game_begin',function(data){\n            self.playShazi();\n            self.onGameBeign(data);\n            \n        });\n        \n        this.node.on('game_sync',function(data){\n            self.onGameBeign(data);\n        });\n        \n        this.node.on('game_chupai',function(data){\n            data = data.detail;\n            self.hideChupai();\n            self.checkQueYiMen();\n            if(data.last != cc.vv.gameNetMgr.seatIndex){\n                self.initMopai(data.last,null);   \n            }\n            if(!cc.vv.replayMgr.isReplay() && data.turn != cc.vv.gameNetMgr.seatIndex){\n                self.initMopai(data.turn,-1);\n            }\n        });\n        \n        this.node.on('game_mopai',function(data){\n            self.hideChupai();\n            data = data.detail;\n            var pai = data.pai;\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(data.seatIndex);\n            if(localIndex == 0){\n                var index = 13;\n                var sprite = self._myMJArr[index];\n                self.setSpriteFrameByMJID(\"M_\",sprite,pai,index);\n                sprite.node.mjId = pai;                \n            }\n            else if(cc.vv.replayMgr.isReplay()){\n                self.initMopai(data.seatIndex,pai);\n            }\n        });\n        \n        this.node.on('game_action',function(data){\n            self.showAction(data.detail);\n            console.log(\"game_action\");\n        });\n        \n        // this.node.on('game_feng',function(data){\n        //     self._gamecount\n        //     console.log(\"game_feng\");\n        // });\n        \n        this.node.on('hupai',function(data){\n            var data = data.detail;\n            //如果不是玩家自己，则将玩家的牌都放倒\n            var seatIndex = data.seatindex;\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(seatIndex);\n            var hupai = self._hupaiTips[localIndex];\n            hupai.active = true;\n            \n            if(localIndex == 0){\n                self.hideOptions();\n            }\n            var seatData = cc.vv.gameNetMgr.seats[seatIndex];\n            seatData.hued = true;\n            if(cc.vv.gameNetMgr.conf.type == \"xlch\"){\n                hupai.getChildByName(\"sprHu\").active = true;\n                hupai.getChildByName(\"sprZimo\").active = false;\n                self.initHupai(localIndex,data.hupai);\n                if(data.iszimo){\n                    if(seatData.seatindex == cc.vv.gameNetMgr.seatIndex){\n                        seatData.holds.pop();\n                        self.initMahjongs();                \n                    }\n                    else{\n                        self.initOtherMahjongs(seatData);\n                    }\n                } \n            }\n            else{\n                hupai.getChildByName(\"sprHu\").active = !data.iszimo;\n                hupai.getChildByName(\"sprZimo\").active = data.iszimo;\n                \n                if(!(data.iszimo && localIndex==0))\n                {\n                    //if(cc.vv.replayMgr.isReplay() == false && localIndex != 0){\n                    //    self.initEmptySprites(seatIndex);                \n                    //}\n                    self.initMopai(seatIndex,data.hupai);\n                }                                         \n            }\n            \n            if(cc.vv.replayMgr.isReplay() == true && cc.vv.gameNetMgr.conf.type != \"xlch\"){\n                var opt = self._opts[localIndex];\n                opt.node.active = true;\n                opt.sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",data.hupai);                \n            }\n            \n            if(data.iszimo){\n                self.playEfx(localIndex,\"play_zimo\");    \n            }\n            else{\n                self.playEfx(localIndex,\"play_hu\");\n            }\n            \n            cc.vv.audioMgr.playSFX(\"nv/hu.mp3\");\n        });\n        \n        this.node.on('mj_count',function(data){\n            self._mjcount.string = \"剩余\" + cc.vv.gameNetMgr.numOfMJ + \"张\";\n        });\n        \n        this.node.on('game_num',function(data){\n            //console.log('game_num!!!!!!!!!!'+cc.vv.gameNetMgr.fengxiang);\n            // switch(cc.vv.gameNetMgr.fengxiang) {\n            //     case 0: \n            //         self._gamecount.string = \"东风圈\";break;\n            //     case 1: \n            //         self._gamecount.string = \"南风圈\";break;\n            //     case 2: \n            //         self._gamecount.string = \"西风圈\";break;\n            //     case 3: \n            //         self._gamecount.string = \"北风圈\";break;\n            \n            // }\n        });\n        \n        this.node.on('game_feng',function(data){\n            console.log('game_num!!!!!!!!!!'+cc.vv.gameNetMgr.fengxiang);\n            switch(cc.vv.gameNetMgr.fengxiang) {\n                case 0: \n                    self._gamecount.string = \"东风圈\";break;\n                case 1: \n                    self._gamecount.string = \"南风圈\";break;\n                case 2: \n                    self._gamecount.string = \"西风圈\";break;\n                case 3: \n                    self._gamecount.string = \"北风圈\";break;\n            \n            }\n        });\n        \n        this.node.on('game_over',function(data){\n            self.gameRoot.active = false;\n            self.prepareRoot.active = true;\n        });\n        \n        \n        this.node.on('game_chupai_notify',function(data){\n            self.hideChupai();\n            var seatData = data.detail.seatData;\n            //如果是自己，则刷新手牌\n            if(seatData.seatindex == cc.vv.gameNetMgr.seatIndex){\n                self.initMahjongs();                \n            }\n            else{\n                self.initOtherMahjongs(seatData);\n            }\n            self.showChupai();\n            var audioUrl = cc.vv.mahjongmgr.getAudioURLByMJID(data.detail.pai);\n            cc.vv.audioMgr.playSFX(audioUrl);\n        });\n        \n        \n        \n        this.node.on('guo_notify',function(data){\n            self.hideChupai();\n            self.hideOptions();\n            var seatData = data.detail;\n            //如果是自己，则刷新手牌\n            if(seatData.seatindex == cc.vv.gameNetMgr.seatIndex){\n                self.initMahjongs();                \n            }\n            cc.vv.audioMgr.playSFX(\"give.mp3\");\n        });\n        \n        this.node.on('guo_result',function(data){\n            self.hideOptions();\n        });\n        \n        this.node.on('game_dingque_finish',function(data){\n            self.initMahjongs();\n        });\n        \n        this.node.on('peng_notify',function(data){    \n            self.hideChupai();\n            \n            var seatData = data.detail;\n            console.log('peng_notify');\n            console.log(data);\n            if(seatData.seatindex == cc.vv.gameNetMgr.seatIndex){\n                self.initMahjongs();                \n            }\n            else{\n                self.initOtherMahjongs(seatData);\n            }\n            var localIndex = self.getLocalIndex(seatData.seatindex);\n            self.playEfx(localIndex,\"play_peng\");\n            cc.vv.audioMgr.playSFX(\"nv/peng.mp3\");\n            self.hideOptions();\n        });\n        \n        this.node.on('chi_notify',function(data){    \n            console.log('chi_notify');\n            console.log(data);\n            self.hideChupai();\n            \n            var seatData = data.detail;\n            \n            console.log(data);\n            if(seatData.seatindex == cc.vv.gameNetMgr.seatIndex){\n                self.initMahjongs();                \n            }\n            else{\n                self.initOtherMahjongs(seatData);\n            }\n            var localIndex = self.getLocalIndex(seatData.seatindex);\n            self.playEfx(localIndex,\"play_chi\");\n            cc.vv.audioMgr.playSFX(\"nv/chi.mp3\");\n            self.hideOptions();\n        });\n        \n        this.node.on('buhua_notify',function(data){    \n            console.log('buhua_notify');\n            console.log(data.detail.holds);\n            var seatData = data.detail;\n            if(seatData.seatindex == cc.vv.gameNetMgr.seatIndex){\n                self.initMahjongs();\n            }\n            else{\n                self.initOtherMahjongs(seatData);\n            }\n        });\n        \n        this.node.on('gang_notify',function(data){\n            self.hideChupai();\n            var data = data.detail;\n            var seatData = data.seatData;\n            var gangtype = data.gangtype;\n            if(seatData.seatindex == cc.vv.gameNetMgr.seatIndex){\n                self.initMahjongs();                \n            }\n            else{\n                self.initOtherMahjongs(seatData);\n            }\n            \n            var localIndex = self.getLocalIndex(seatData.seatindex);\n            if(gangtype == \"wangang\"){\n                self.playEfx(localIndex,\"play_gang\");\n                cc.vv.audioMgr.playSFX(\"guafeng.mp3\");\n            }\n            else{\n                self.playEfx(localIndex,\"play_gang\");\n                cc.vv.audioMgr.playSFX(\"rain.mp3\");\n            }\n        });\n        \n        this.node.on(\"hangang_notify\",function(data){\n            var data = data.detail;\n            var localIndex = self.getLocalIndex(data);\n            self.playEfx(localIndex,\"play_gang\");\n            cc.vv.audioMgr.playSFX(\"nv/gang.mp3\");\n            self.hideOptions();\n        });\n    },\n    \n    showChupai:function(){\n        var pai = cc.vv.gameNetMgr.chupai; \n        if( pai >= 0 ){\n            //\n            var localIndex = this.getLocalIndex(cc.vv.gameNetMgr.turn);\n            var sprite = this._chupaiSprite[localIndex];\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai);\n            sprite.node.active = true;   \n        }\n    },\n    \n    addOption:function(btnName,pai,chitype){\n        console.log(\"弹出操作框\");\n        console.log(btnName);\n        console.log(pai);\n        //添加吃牌的三种方式\n        //var str = pai.split(\"_\");\n        //var painame = str[0];\n       //var painum = str[1];\n        if(chitype && chitype.left == true){\n            var op = this._options.getChildByName(\"chiop\").getChildByName(\"left\");\n            op.active = true;\n            var sprite = op.children[0].getComponent(cc.Sprite);\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai);\n            var sprite = op.children[1].getComponent(cc.Sprite);\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai+1);\n            var sprite = op.children[2].getComponent(cc.Sprite);\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai+2);\n        }\n        \n        if(chitype && chitype.mid == true){\n            var op = this._options.getChildByName(\"chiop\").getChildByName(\"mid\");\n            op.active = true;\n            var sprite = op.children[0].getComponent(cc.Sprite);\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai-1);\n            var sprite = op.children[1].getComponent(cc.Sprite);\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai);\n            var sprite = op.children[2].getComponent(cc.Sprite);\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai+1);\n        }\n        if(chitype && chitype.right == true){\n            var op = this._options.getChildByName(\"chiop\").getChildByName(\"right\");\n            op.active = true;\n            var sprite = op.children[0].getComponent(cc.Sprite);\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai-2);\n            var sprite = op.children[1].getComponent(cc.Sprite);\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai-1);\n            var sprite = op.children[2].getComponent(cc.Sprite);\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai);\n        }\n        //其他\n        for(var i = 0; i < this._options.childrenCount; ++i){\n            var child = this._options.children[i]; \n            if(child.name == \"op\" && child.active == false){\n                child.active = true;\n                var sprite = child.getChildByName(\"opTarget\").getComponent(cc.Sprite);\n                sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai);\n                var btn = child.getChildByName(btnName); \n                btn.active = true;\n                btn.pai = pai;\n                return;\n            }\n        }\n    },\n    \n    hideOptions:function(data){\n        this._options.active = false;\n        for(var i = 0; i < this._options.childrenCount; ++i){\n            var child = this._options.children[i]; \n            if(child.name == \"op\" ){\n                child.active = false;\n                child.getChildByName(\"btnPeng\").active = false;\n                child.getChildByName(\"btnGang\").active = false;\n                child.getChildByName(\"btnHu\").active = false;\n                child.getChildByName(\"btnChi\").active = false;\n            }\n            if(child.name == \"chiop\" ){\n                child.active = false;\n                child.getChildByName(\"left\").active = false;\n                child.getChildByName(\"mid\").active = false;\n                child.getChildByName(\"right\").active = false;\n            }\n        }\n    },\n    \n    showAction:function(data){\n        console.log(\"show action\");\n        console.log(this._options.active);\n        if(this._options.active){\n            this.hideOptions();\n        }\n        \n        if(data && (data.hu || data.gang || data.peng || data.chi)){\n            console.log(data.chi);\n            this._options.active = true;\n            if(data.hu){\n                this.addOption(\"btnHu\",data.pai);\n            }\n            if(data.peng){\n                this.addOption(\"btnPeng\",data.pai);\n            }\n            \n            if(data.gang){\n                for(var i = 0; i < data.gangpai.length;++i){\n                    var gp = data.gangpai[i];\n                    this.addOption(\"btnGang\",gp);\n                }\n            } \n            \n            if(data.chi){\n                this.addOption(\"btnChi\",data.pai,data.chitype);\n            }\n        }\n        console.log(data.chi);\n    },\n    \n    initWanfaLabel:function(){\n        var wanfa = cc.find(\"Canvas/infobar/wanfa\").getComponent(cc.Label);\n        wanfa.string = cc.vv.gameNetMgr.getWanfa();\n    },\n    \n    initHupai:function(localIndex,pai){\n        if(cc.vv.gameNetMgr.conf.type == \"xlch\"){\n            var hupailist = this._hupaiLists[localIndex];\n            for(var i = 0; i < hupailist.children.length; ++i){\n                var hupainode = hupailist.children[i]; \n                if(hupainode.active == false){\n                    var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\n                    hupainode.getComponent(cc.Sprite).spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre,pai);\n                    hupainode.active = true;\n                    break;\n                }\n            }   \n        }\n    },\n    \n    playEfx:function(index,name){\n        this._playEfxs[index].node.active = true;\n        this._playEfxs[index].play(name);\n    },\n    \n    playShazi:function(){\n        var anim1 = this.node.getChildByName(\"game\").getChildByName(\"shaizi\").getChildByName(\"shaizi1\").getComponent(cc.Animation);\n        anim1.play(\"shaizi\");\n        var anim2 = this.node.getChildByName(\"game\").getChildByName(\"shaizi\").getChildByName(\"shaizi2\").getComponent(cc.Animation);\n        anim2.play(\"shaizi2\");\n        this.onfinished(false);\n        anim2.on(\"finished\",this.onfinished,this);\n    },\n    \n    onfinished:function(isshow) {\n        var show = true;\n        (isshow==false) ? show = false:{};\n        var side =  this.node.getChildByName(\"game\").getChildByName(\"myself\");\n        side.getChildByName(\"huas\").active = show;\n        side.getChildByName(\"holds\").active = show;\n        var side =  this.node.getChildByName(\"game\").getChildByName(\"left\");\n        side.getChildByName(\"huas\").active = show;\n        side.getChildByName(\"holds\").active = show;\n        var side =  this.node.getChildByName(\"game\").getChildByName(\"up\");\n        side.getChildByName(\"huas\").active = show;\n        side.getChildByName(\"holds\").active = show;\n        var side =  this.node.getChildByName(\"game\").getChildByName(\"right\");\n        side.getChildByName(\"huas\").active = show;\n        side.getChildByName(\"holds\").active = show;\n    },\n    \n    onGameBeign:function(){\n        \n        //更换gameover界面头像 懒得封装了，反正以后也用不到\n        var sprIcon = cc.find(\"Canvas/game_over_sjmmj/result_list/s1/touxiang\").getComponent(\"ImageLoader\");\n        if(sprIcon && cc.vv.gameNetMgr.seats[0].userid)sprIcon.setUserID(cc.vv.gameNetMgr.seats[0].userid);\n        var sprIcon = cc.find(\"Canvas/game_over_sjmmj/result_list/s2/touxiang\").getComponent(\"ImageLoader\");\n        if(sprIcon && cc.vv.gameNetMgr.seats[1].userid)sprIcon.setUserID(cc.vv.gameNetMgr.seats[1].userid);\n        var sprIcon = cc.find(\"Canvas/game_over_sjmmj/result_list/s3/touxiang\").getComponent(\"ImageLoader\");\n        if(sprIcon && cc.vv.gameNetMgr.seats[2].userid)sprIcon.setUserID(cc.vv.gameNetMgr.seats[2].userid);\n        var sprIcon = cc.find(\"Canvas/game_over_sjmmj/result_list/s4/touxiang\").getComponent(\"ImageLoader\");\n        if(sprIcon && cc.vv.gameNetMgr.seats[3].userid)sprIcon.setUserID(cc.vv.gameNetMgr.seats[3].userid);\n        \n        var sprIcon = cc.find(\"Canvas/game_over_dhmj/result_list/s1/touxiang\").getComponent(\"ImageLoader\");\n        if(sprIcon && cc.vv.gameNetMgr.seats[0].userid)sprIcon.setUserID(cc.vv.gameNetMgr.seats[0].userid);\n        var sprIcon = cc.find(\"Canvas/game_over_dhmj/result_list/s2/touxiang\").getComponent(\"ImageLoader\");\n        if(sprIcon && cc.vv.gameNetMgr.seats[1].userid)sprIcon.setUserID(cc.vv.gameNetMgr.seats[1].userid);\n        var sprIcon = cc.find(\"Canvas/game_over_dhmj/result_list/s3/touxiang\").getComponent(\"ImageLoader\");\n        if(sprIcon && cc.vv.gameNetMgr.seats[2].userid)sprIcon.setUserID(cc.vv.gameNetMgr.seats[2].userid);\n        var sprIcon = cc.find(\"Canvas/game_over_dhmj/result_list/s4/touxiang\").getComponent(\"ImageLoader\");\n        if(sprIcon && cc.vv.gameNetMgr.seats[3].userid)sprIcon.setUserID(cc.vv.gameNetMgr.seats[3].userid);\n        \n        var sprIcon = cc.find(\"Canvas/game_over_tdh/result_list/s1/touxiang\").getComponent(\"ImageLoader\");\n        if(sprIcon && cc.vv.gameNetMgr.seats[0].userid)sprIcon.setUserID(cc.vv.gameNetMgr.seats[0].userid);\n        var sprIcon = cc.find(\"Canvas/game_over_tdh/result_list/s2/touxiang\").getComponent(\"ImageLoader\");\n        if(sprIcon && cc.vv.gameNetMgr.seats[1].userid)sprIcon.setUserID(cc.vv.gameNetMgr.seats[1].userid);\n        var sprIcon = cc.find(\"Canvas/game_over_tdh/result_list/s3/touxiang\").getComponent(\"ImageLoader\");\n        if(sprIcon && cc.vv.gameNetMgr.seats[2].userid)sprIcon.setUserID(cc.vv.gameNetMgr.seats[2].userid);\n        var sprIcon = cc.find(\"Canvas/game_over_tdh/result_list/s4/touxiang\").getComponent(\"ImageLoader\");\n        if(sprIcon && cc.vv.gameNetMgr.seats[3].userid)sprIcon.setUserID(cc.vv.gameNetMgr.seats[3].userid);\n        \n        \n        for(var i = 0; i < this._playEfxs.length; ++i){\n            this._playEfxs[i].node.active = false;\n        }\n        \n        for(var i = 0; i < this._hupaiLists.length; ++i){\n            for(var j = 0; j < this._hupaiLists[i].childrenCount; ++j){\n                this._hupaiLists[i].children[j].active = false;\n            }\n        }\n        \n        for(var i = 0; i < cc.vv.gameNetMgr.seats.length; ++i){\n            var seatData = cc.vv.gameNetMgr.seats[i];\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(i);        \n            var hupai = this._hupaiTips[localIndex];\n            hupai.active = seatData.hued;\n            if(seatData.hued){\n                hupai.getChildByName(\"sprHu\").active = !seatData.iszimo;\n                hupai.getChildByName(\"sprZimo\").active = seatData.iszimo;\n            }\n            \n            if(seatData.huinfo){\n                for(var j = 0; j < seatData.huinfo.length; ++j){\n                    var info = seatData.huinfo[j];\n                    if(info.ishupai){\n                        this.initHupai(localIndex,info.pai);    \n                    }\n                }\n            }\n        }\n        \n        this.hideChupai();\n        this.hideOptions();\n        var sides = [\"right\",\"up\",\"left\"];        \n        var gameChild = this.node.getChildByName(\"game\");\n        for(var i = 0; i < sides.length; ++i){\n            var sideChild = gameChild.getChildByName(sides[i]);\n            var holds = sideChild.getChildByName(\"holds\");\n            for(var j = 0; j < holds.childrenCount; ++j){\n                var nc = holds.children[j];\n                nc.active = true;\n                nc.scaleX = 1.0;\n                nc.scaleY = 1.0;\n                var sprite = nc.getComponent(cc.Sprite); \n                sprite.spriteFrame = cc.vv.mahjongmgr.holdsEmpty[i+1];\n            }            \n        }\n      \n        if(cc.vv.gameNetMgr.gamestate == \"\" && cc.vv.replayMgr.isReplay() == false){\n            return;\n        }\n\n        this.gameRoot.active = true;\n        this.prepareRoot.active = false;\n        this.initMahjongs();\n        var seats = cc.vv.gameNetMgr.seats;\n        for(var i in seats){\n            var seatData = seats[i];\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(i);\n            if(localIndex != 0){\n                this.initOtherMahjongs(seatData);\n                if(i == cc.vv.gameNetMgr.turn){\n                    this.initMopai(i,-1);\n                }\n                else{\n                    this.initMopai(i,null);    \n                }\n            }\n        }\n        this.showChupai();\n        if(cc.vv.gameNetMgr.curaction != null){\n            this.showAction(cc.vv.gameNetMgr.curaction);\n            cc.vv.gameNetMgr.curaction = null;\n        }\n        \n        this.checkQueYiMen();\n    },\n    \n    onMJClicked:function(event){\n        if(cc.vv.gameNetMgr.isHuanSanZhang){\n            this.node.emit(\"mj_clicked\",event.target);\n            return;\n        }\n        \n        //如果不是自己的轮子，则忽略\n        if(cc.vv.gameNetMgr.turn != cc.vv.gameNetMgr.seatIndex){\n            console.log(\"not your turn.\" + cc.vv.gameNetMgr.turn);\n            return;\n        }\n        \n        for(var i = 0; i < this._myMJArr.length; ++i){\n            if(event.target == this._myMJArr[i].node){\n                //如果是再次点击，则出牌\n                if(event.target == this._selectedMJ){\n                    this.shoot(this._selectedMJ.mjId); \n                    this._selectedMJ.y = 0;\n                    this._selectedMJ = null;\n                    //取消显示桌面上相同的牌\n                    this.hideSameType();\n                    return;\n                }\n                //如果不是则显示桌面上相同的牌\n                else{\n                    this.showSameType(event.target);\n                }\n                if(this._selectedMJ != null){\n                    this._selectedMJ.y = 0;\n                }\n                event.target.y = 15;\n                this._selectedMJ = event.target;\n                return;\n            }\n        }\n    },\n    \n    //显示桌面上相同牌的功能\n    showSameType:function(mj){\n        var sprite = mj.getComponent(cc.Sprite); \n        //提取_之前的内容\n        function getEnd(mainStr,searchStr){  \n            var foundOffset=mainStr.indexOf(searchStr);  \n            if(foundOffset==-1){  \n               return null;  \n            }  \n            return mainStr.substring(foundOffset+searchStr.length,mainStr.length);  \n        } \n        var mjname = getEnd(sprite.spriteFrame._name,\"_\");\n        //所有folds\n        var allfolds = [];\n        allfolds = allfolds.concat(cc.find(\"Canvas/game/right/folds\").children);\n        allfolds = allfolds.concat(cc.find(\"Canvas/game/up/folds\").children);\n        allfolds = allfolds.concat(cc.find(\"Canvas/game/left/folds\").children);\n        allfolds = allfolds.concat(cc.find(\"Canvas/game/myself/folds\").children);\n        \n        //var aaa = cc.find(\"Canvas/game/myself/penggangs\").children;\n        \n        //var sprites = cc.find(\"Canvas/game/myself/penggangs\").children[0].children;\n        var pgs = cc.find(\"Canvas/game/myself/penggangs\");\n        for (var i = 0 ; i < pgs.childrenCount ; i++) {\n            var nowpg = pgs.children[i];\n            allfolds = allfolds.concat(nowpg.children);\n        }\n        var pgs = cc.find(\"Canvas/game/right/penggangs\");\n        for (var i = 0 ; i < pgs.childrenCount ; i++) {\n            var nowpg = pgs.children[i];\n            allfolds = allfolds.concat(nowpg.children);\n        }\n        var pgs = cc.find(\"Canvas/game/up/penggangs\");\n        for (var i = 0 ; i < pgs.childrenCount ; i++) {\n            var nowpg = pgs.children[i];\n            allfolds = allfolds.concat(nowpg.children);\n        }\n        var pgs = cc.find(\"Canvas/game/left/penggangs\");\n        for (var i = 0 ; i < pgs.childrenCount ; i++) {\n            var nowpg = pgs.children[i];\n            allfolds = allfolds.concat(nowpg.children);\n        }\n        \n        \n        \n        for ( var i = 0 ; i < allfolds.length ; i++ ) {\n            var nowsprite = allfolds[i].getComponent(cc.Sprite);\n            if(nowsprite.spriteFrame){\n                var nowname = getEnd(nowsprite.spriteFrame._name,\"_\");\n                if(nowname == mjname) {\n                    allfolds[i].color = new cc.Color(155, 228, 228);\n                }else {\n                    allfolds[i].color = new cc.Color(255, 255, 255);\n                }\n            }\n        }\n    },\n    \n    //取消显示桌面上相同牌的功能\n    hideSameType:function(){\n        var allfolds = [];\n        allfolds = allfolds.concat(cc.find(\"Canvas/game/right/folds\").children);\n        allfolds = allfolds.concat(cc.find(\"Canvas/game/up/folds\").children);\n        allfolds = allfolds.concat(cc.find(\"Canvas/game/left/folds\").children);\n        allfolds = allfolds.concat(cc.find(\"Canvas/game/myself/folds\").children);\n        for ( var i = 0 ; i < allfolds.length ; i++ ) {\n            var nowsprite = allfolds[i].getComponent(cc.Sprite);\n            if(nowsprite.spriteFrame){\n                allfolds[i].color = new cc.Color(255, 255, 255);\n            }\n        }\n    },\n    \n    //如果摸到的牌是花，则会调用这个函数\n    chuhua:function(mjid){\n        console.log(chuhua);\n    },\n    \n    //出牌\n    shoot:function(mjId){\n        if(mjId == null){\n            return;\n        }\n        cc.vv.net.send('chupai',mjId);\n    },\n    \n    getMJIndex:function(side,index){\n        if(side == \"right\" || side == \"up\"){\n            return 13 - index;\n        }\n        return index;\n    },\n    \n    initMopai:function(seatIndex,pai){\n        var localIndex = cc.vv.gameNetMgr.getLocalIndex(seatIndex);\n        var side = cc.vv.mahjongmgr.getSide(localIndex);\n        var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\n        \n        var gameChild = this.node.getChildByName(\"game\");\n        var sideChild = gameChild.getChildByName(side);\n        var holds = sideChild.getChildByName(\"holds\");\n\n        var lastIndex = this.getMJIndex(side,13);\n        var nc = holds.children[lastIndex];\n\n        nc.scaleX = 1.0;\n        nc.scaleY = 1.0;\n                        \n        if(pai == null){\n            nc.active = false;\n        }\n        else if(pai >= 0){\n            nc.active = true;\n            if(side == \"up\"){\n                nc.scaleX = 0.73;\n                nc.scaleY = 0.73;                    \n            }\n            var sprite = nc.getComponent(cc.Sprite); \n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre,pai);\n        }\n        else if(pai != null){\n            nc.active = true;\n            if(side == \"up\"){\n                nc.scaleX = 1.0;\n                nc.scaleY = 1.0;                    \n            }\n            var sprite = nc.getComponent(cc.Sprite); \n            sprite.spriteFrame = cc.vv.mahjongmgr.getHoldsEmptySpriteFrame(side);\n        }\n    },\n    \n    initEmptySprites:function(seatIndex){\n        var localIndex = cc.vv.gameNetMgr.getLocalIndex(seatIndex);\n        var side = cc.vv.mahjongmgr.getSide(localIndex);\n        var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\n        \n        var gameChild = this.node.getChildByName(\"game\");\n        var sideChild = gameChild.getChildByName(side);\n        var holds = sideChild.getChildByName(\"holds\");\n        var spriteFrame = cc.vv.mahjongmgr.getEmptySpriteFrame(side);\n        for(var i = 0; i < holds.childrenCount; ++i){\n            var nc = holds.children[i];\n            nc.scaleX = 1.0;\n            nc.scaleY = 1.0;\n            \n            var sprite = nc.getComponent(cc.Sprite); \n            sprite.spriteFrame = spriteFrame;\n        }\n    },\n    \n    initOtherMahjongs:function(seatData){\n        //console.log(\"seat:\" + seatData.seatindex);\n        var localIndex = this.getLocalIndex(seatData.seatindex);\n        if(localIndex == 0){\n            return;\n        }\n        var side = cc.vv.mahjongmgr.getSide(localIndex);\n        var game = this.node.getChildByName(\"game\");\n        var sideRoot = game.getChildByName(side);\n        var sideHolds = sideRoot.getChildByName(\"holds\");\n        var num = seatData.pengs.length + seatData.angangs.length + seatData.diangangs.length + seatData.wangangs.length + seatData.chis.length;\n        num *= 3;\n        for(var i = 0; i < num; ++i){\n            var idx = this.getMJIndex(side,i);\n            sideHolds.children[idx].active = false;\n        }\n        \n        var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\n        var holds = this.sortHolds(seatData);\n        if(holds != null && holds.length > 0){\n            for(var i = 0; i < holds.length; ++i){\n                var idx = this.getMJIndex(side,i + num);\n                var sprite = sideHolds.children[idx].getComponent(cc.Sprite); \n                if(side == \"up\"){\n                    sprite.node.scaleX = 0.73;\n                    sprite.node.scaleY = 0.73;                    \n                }\n                sprite.node.active = true;\n                sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre,holds[i]);\n            }\n            \n            if(holds.length + num == 13){\n                var lasetIdx = this.getMJIndex(side,13);\n                sideHolds.children[lasetIdx].active = false;\n            }\n        }\n    },\n    \n    sortHolds:function(seatData){\n        var holds = seatData.holds;\n        if(holds == null){\n            return null;\n        }\n        //如果手上的牌的数目是2,5,8,11,14，表示最后一张牌是刚摸到的牌\n        var mopai = null;\n        var l = holds.length \n        if( l == 2 || l == 5 || l == 8 || l == 11 || l == 14){\n            mopai = holds.pop();\n        }\n        \n        var dingque = seatData.dingque;\n        cc.vv.mahjongmgr.sortMJ(holds,dingque);\n        \n        //将摸牌添加到最后\n        if(mopai != null){\n            holds.push(mopai);\n        }\n        return holds;\n    },\n    \n    initMahjongs:function(){\n        var seats = cc.vv.gameNetMgr.seats;\n        var seatData = seats[cc.vv.gameNetMgr.seatIndex];\n        var holds = this.sortHolds(seatData);\n        if(holds == null){\n            return;\n        }\n        console.log(seats);\n        //初始化手牌\n        var lackingNum = (seatData.chis.length + seatData.pengs.length + seatData.angangs.length + seatData.diangangs.length + seatData.wangangs.length)*3;\n        for(var i = 0; i < holds.length; ++i){\n            var mjid = holds[i];\n            var sprite = this._myMJArr[i + lackingNum];\n            sprite.node.mjId = mjid;\n            sprite.node.y = 0;\n            this.setSpriteFrameByMJID(\"M_\",sprite,mjid);\n        }\n        for(var i = 0; i < lackingNum; ++i){\n            var sprite = this._myMJArr[i]; \n            sprite.node.mjId = null;\n            sprite.spriteFrame = null;\n            sprite.node.active = false;\n        }\n        for(var i = lackingNum + holds.length; i < this._myMJArr.length; ++i){\n            var sprite = this._myMJArr[i]; \n            sprite.node.mjId = null;\n            sprite.spriteFrame = null;\n            sprite.node.active = false;            \n        }\n    },\n    \n    setSpriteFrameByMJID:function(pre,sprite,mjid){\n        sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre,mjid);\n        sprite.node.active = true;\n    },\n    \n    //如果玩家手上还有缺的牌没有打，则只能打缺牌\n    checkQueYiMen:function(){\n        if(cc.vv.gameNetMgr.conf==null || cc.vv.gameNetMgr.conf.type != \"xlch\" || !cc.vv.gameNetMgr.getSelfData().hued){\n            //遍历检查看是否有未打缺的牌 如果有，则需要将不是定缺的牌设置为不可用\n            var dingque = cc.vv.gameNetMgr.dingque;\n    //        console.log(dingque)\n            var hasQue = false;\n            if(cc.vv.gameNetMgr.seatIndex == cc.vv.gameNetMgr.turn){\n                for(var i = 0; i < this._myMJArr.length; ++i){\n                    var sprite = this._myMJArr[i];\n    //                console.log(\"sprite.node.mjId:\" + sprite.node.mjId);\n                    if(sprite.node.mjId != null){\n                        var type = cc.vv.mahjongmgr.getMahjongType(sprite.node.mjId);\n                        if(type == dingque){\n                            hasQue = true;\n                            break;\n                        }\n                    }\n                }            \n            }\n\n    //        console.log(\"hasQue:\" + hasQue);\n            for(var i = 0; i < this._myMJArr.length; ++i){\n                var sprite = this._myMJArr[i];\n                if(sprite.node.mjId != null){\n                    var type = cc.vv.mahjongmgr.getMahjongType(sprite.node.mjId);\n                    if(hasQue && type != dingque){\n                        sprite.node.getComponent(cc.Button).interactable = false;\n                    }\n                    else{\n                        sprite.node.getComponent(cc.Button).interactable = true;\n                    }\n                }\n            }   \n        }\n        else{\n            if(cc.vv.gameNetMgr.seatIndex == cc.vv.gameNetMgr.turn){\n                for(var i = 0; i < 14; ++i){\n                    var sprite = this._myMJArr[i]; \n                    if(sprite.node.active == true){\n                        sprite.node.getComponent(cc.Button).interactable = i == 13;\n                    }\n                }\n            }\n            else{\n                for(var i = 0; i < 14; ++i){\n                    var sprite = this._myMJArr[i]; \n                    if(sprite.node.active == true){\n                        sprite.node.getComponent(cc.Button).interactable = true;\n                    }\n                }\n            }\n        }\n    },\n    \n    getLocalIndex:function(index){\n        var ret = (index - cc.vv.gameNetMgr.seatIndex + 4) % 4;\n        //console.log(\"old:\" + index + \",base:\" + cc.vv.gameNetMgr.seatIndex + \",new:\" + ret);\n        return ret;\n    },\n    \n    onOptionClicked:function(event){\n        console.log(event.target.name);\n        if(event.target.name == \"btnPeng\"){\n            cc.vv.net.send(\"peng\");\n        }\n        else if(event.target.name == \"btnGang\"){\n            cc.vv.net.send(\"gang\",event.target.pai);\n        }\n        else if(event.target.name == \"btnHu\"){\n            cc.vv.net.send(\"hu\");\n        }\n        //打开吃菜单\n        else if(event.target.name == \"btnChi\"){\n            this._options.getChildByName(\"chiop\").active = true;\n            \n            for(var i = 0; i < this._options.childrenCount; ++i){\n                var child = this._options.children[i]; \n                if(child.name == \"op\" ){\n                    child.active = false;\n                }\n            }\n        }\n        //左吃\n        else if(event.target.name == \"left\"){\n            cc.vv.net.send(\"chi\",\"left\");\n        }\n        //中吃\n        else if(event.target.name == \"mid\"){\n            cc.vv.net.send(\"chi\",\"mid\");\n        }\n        //右吃\n        else if(event.target.name == \"right\"){\n            cc.vv.net.send(\"chi\",\"right\");\n        }\n        else if(event.target.name == \"btnGuo\"){\n            cc.vv.net.send(\"guo\");\n        }\n    },\n    \n    // called every frame, uncomment this function to activate update callback\n    update: function (dt) {\n    },\n    \n    onDestroy:function(){\n        console.log(\"onDestroy\");\n        if(cc.vv){\n            cc.vv.gameNetMgr.clear();   \n        }\n    }\n});\n"]}