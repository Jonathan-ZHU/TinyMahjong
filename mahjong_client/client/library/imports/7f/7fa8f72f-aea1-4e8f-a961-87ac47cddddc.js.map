{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "cc",
    "Class",
    "extends",
    "Component",
    "properties",
    "gameRoot",
    "default",
    "type",
    "Node",
    "prepareRoot",
    "_myMJArr",
    "_options",
    "_selectedMJ",
    "_chupaiSprite",
    "_mjcount",
    "_gamecount",
    "_hupaiTips",
    "_hupaiLists",
    "_playEfxs",
    "_opts",
    "_gametype",
    "onLoad",
    "sys",
    "isNative",
    "isMobile",
    "cvs",
    "node",
    "getComponent",
    "Canvas",
    "fitHeight",
    "fitWidth",
    "vv",
    "director",
    "loadScene",
    "addComponent",
    "initView",
    "initEventHandlers",
    "active",
    "initWanfaLabel",
    "onGameBeign",
    "audioMgr",
    "playBGM",
    "gameChild",
    "getChildByName",
    "Label",
    "string",
    "gameNetMgr",
    "numOfMJ",
    "fengxiang",
    "conf",
    "myselfChild",
    "myholds",
    "i",
    "children",
    "length",
    "sprite",
    "Sprite",
    "push",
    "spriteFrame",
    "realwidth",
    "getVisibleSize",
    "width",
    "scaleX",
    "scaleY",
    "sides",
    "side",
    "sideChild",
    "Animation",
    "opt",
    "data",
    "opts",
    "hideOptions",
    "hideChupai",
    "dataEventHandler",
    "self",
    "on",
    "initMahjongs",
    "checkQueYiMen",
    "playShazi",
    "detail",
    "last",
    "seatIndex",
    "initMopai",
    "replayMgr",
    "isReplay",
    "turn",
    "pai",
    "localIndex",
    "getLocalIndex",
    "index",
    "setSpriteFrameByMJID",
    "mjId",
    "showAction",
    "console",
    "log",
    "seatindex",
    "hupai",
    "seatData",
    "seats",
    "hued",
    "initHupai",
    "iszimo",
    "holds",
    "pop",
    "initOtherMahjongs",
    "mahjongmgr",
    "getSpriteFrameByMJID",
    "playEfx",
    "playSFX",
    "showChupai",
    "audioUrl",
    "getAudioURLByMJID",
    "gangtype",
    "chupai",
    "addOption",
    "btnName",
    "chitype",
    "left",
    "op",
    "mid",
    "right",
    "childrenCount",
    "child",
    "name",
    "btn",
    "hu",
    "gang",
    "peng",
    "chi",
    "gangpai",
    "gp",
    "wanfa",
    "find",
    "getWanfa",
    "hupailist",
    "hupainode",
    "pre",
    "getFoldPre",
    "play",
    "anim1",
    "anim2",
    "onfinished",
    "isshow",
    "show",
    "j",
    "huinfo",
    "info",
    "ishupai",
    "nc",
    "holdsEmpty",
    "gamestate",
    "curaction",
    "onMJClicked",
    "event",
    "isHuanSanZhang",
    "emit",
    "target",
    "shoot",
    "y",
    "chuhua",
    "mjid",
    "net",
    "send",
    "getMJIndex",
    "getSide",
    "lastIndex",
    "getHoldsEmptySpriteFrame",
    "initEmptySprites",
    "getEmptySpriteFrame",
    "game",
    "sideRoot",
    "sideHolds",
    "num",
    "pengs",
    "angangs",
    "diangangs",
    "wangangs",
    "chis",
    "idx",
    "sortHolds",
    "lasetIdx",
    "mopai",
    "l",
    "dingque",
    "sortMJ",
    "lackingNum",
    "getSelfData",
    "hasQue",
    "getMahjongType",
    "Button",
    "interactable",
    "ret",
    "onOptionClicked",
    "update",
    "dt",
    "onDestroy",
    "clear"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {        \r\n        gameRoot:{\r\n            default:null,\r\n            type:cc.Node\r\n        },\r\n        \r\n        prepareRoot:{\r\n            default:null,\r\n            type:cc.Node   \r\n        },\r\n        \r\n        _myMJArr:[],\r\n        _options:null,\r\n        _selectedMJ:null,\r\n        _chupaiSprite:[],\r\n        _mjcount:null,\r\n        _gamecount:null,\r\n        _hupaiTips:[],\r\n        _hupaiLists:[],\r\n        _playEfxs:[],\r\n        _opts:[],\r\n        _gametype:null,\r\n    },\r\n    \r\n    onLoad: function () {\r\n        if(!cc.sys.isNative && cc.sys.isMobile){\r\n            var cvs = this.node.getComponent(cc.Canvas);\r\n            cvs.fitHeight = true;\r\n            cvs.fitWidth = true;\r\n        }\r\n        if(!cc.vv){\r\n            cc.director.loadScene(\"loading\");\r\n            return;\r\n        }\r\n        this.addComponent(\"NoticeTip\");\r\n        this.addComponent(\"GameOver\");\r\n        this.addComponent(\"DingQue\");\r\n        this.addComponent(\"PengGangs\");\r\n        this.addComponent(\"MJRoom\");\r\n        this.addComponent(\"TimePointer\");\r\n        this.addComponent(\"GameResult\");\r\n        this.addComponent(\"Chat\");\r\n        this.addComponent(\"Folds\");\r\n        this.addComponent(\"ReplayCtrl\");\r\n        this.addComponent(\"PopupMgr\");\r\n        this.addComponent(\"HuanSanZhang\");\r\n        this.addComponent(\"ReConnect\");\r\n        this.addComponent(\"Voice\");\r\n        this.addComponent(\"UserInfoShow\");\r\n        \r\n        this.initView();\r\n        this.initEventHandlers();\r\n        \r\n        this.gameRoot.active = false;\r\n        this.prepareRoot.active = true;\r\n        this.initWanfaLabel();\r\n        this.onGameBeign();\r\n        cc.vv.audioMgr.playBGM(\"bgMain.mp3\");\r\n    },\r\n    \r\n    initView:function(){\r\n        \r\n        //搜索需要的子节点\r\n        var gameChild = this.node.getChildByName(\"game\");\r\n        \r\n        this._mjcount = gameChild.getChildByName('mjcount').getComponent(cc.Label);\r\n        this._mjcount.string = \"剩余\" + cc.vv.gameNetMgr.numOfMJ + \"张\";\r\n        this._gamecount = gameChild.getChildByName('gamecount').getComponent(cc.Label);\r\n        switch(cc.vv.gameNetMgr.fengxiang) {\r\n            case 0: \r\n                this._gamecount.string = \"东风圈\";break;\r\n            case 1: \r\n                this._gamecount.string = \"南风圈\";break;\r\n            case 2: \r\n                this._gamecount.string = \"西风圈\";break;\r\n            case 3: \r\n                this._gamecount.string = \"北风圈\";break;\r\n        }\r\n        \r\n        \r\n        this._gametype = gameChild.getChildByName('gametype');\r\n        switch (cc.vv.gameNetMgr.conf.type) {\r\n            case \"sjmmj\" :  this._gametype.getComponent(cc.Label).string = \"沈家门麻将\";break;\r\n            case \"dhmj\" :  this._gametype.getComponent(cc.Label).string = \"定海麻将\";break;\r\n            case \"tdh\" :  this._gametype.getComponent(cc.Label).string = \"推到胡\";break;\r\n        }\r\n            \r\n\r\n        var myselfChild = gameChild.getChildByName(\"myself\");\r\n        var myholds = myselfChild.getChildByName(\"holds\");\r\n        \r\n        for(var i = 0; i < myholds.children.length; ++i){\r\n            var sprite = myholds.children[i].getComponent(cc.Sprite);\r\n            this._myMJArr.push(sprite);\r\n            sprite.spriteFrame = null;\r\n        }\r\n        \r\n        var realwidth = cc.director.getVisibleSize().width;\r\n        myholds.scaleX *= realwidth/1280;\r\n        myholds.scaleY *= realwidth/1280;  \r\n        \r\n        var sides = [\"myself\",\"right\",\"up\",\"left\"];\r\n        for(var i = 0; i < sides.length; ++i){\r\n            var side = sides[i];\r\n            \r\n            var sideChild = gameChild.getChildByName(side);\r\n            this._hupaiTips.push(sideChild.getChildByName(\"HuPai\"));\r\n            this._hupaiLists.push(sideChild.getChildByName(\"hupailist\"));\r\n            this._playEfxs.push(sideChild.getChildByName(\"play_efx\").getComponent(cc.Animation));\r\n            this._chupaiSprite.push(sideChild.getChildByName(\"ChuPai\").children[0].getComponent(cc.Sprite));\r\n            \r\n            var opt = sideChild.getChildByName(\"opt\");\r\n            opt.active = false;\r\n            var sprite = opt.getChildByName(\"pai\").getComponent(cc.Sprite);\r\n            var data = {\r\n                node:opt,\r\n                sprite:sprite\r\n            };\r\n            this._opts.push(data);\r\n        }\r\n        \r\n        var opts = gameChild.getChildByName(\"ops\");\r\n        this._options = opts;\r\n        this.hideOptions();\r\n        this.hideChupai();\r\n    },\r\n    \r\n    hideChupai:function(){\r\n        for(var i = 0; i < this._chupaiSprite.length; ++i){\r\n            this._chupaiSprite[i].node.active = false;\r\n        }        \r\n    },\r\n    \r\n    initEventHandlers:function(){\r\n        cc.vv.gameNetMgr.dataEventHandler = this.node;\r\n        \r\n        //初始化事件监听器\r\n        var self = this;\r\n        \r\n        this.node.on('game_holds',function(data){\r\n           self.initMahjongs();\r\n           self.checkQueYiMen();\r\n        });\r\n        \r\n        this.node.on('game_begin',function(data){\r\n            self.playShazi();\r\n            self.onGameBeign(data);\r\n        });\r\n        \r\n        this.node.on('game_sync',function(data){\r\n            self.onGameBeign(data);\r\n        });\r\n        \r\n        this.node.on('game_chupai',function(data){\r\n            data = data.detail;\r\n            self.hideChupai();\r\n            self.checkQueYiMen();\r\n            if(data.last != cc.vv.gameNetMgr.seatIndex){\r\n                self.initMopai(data.last,null);   \r\n            }\r\n            if(!cc.vv.replayMgr.isReplay() && data.turn != cc.vv.gameNetMgr.seatIndex){\r\n                self.initMopai(data.turn,-1);\r\n            }\r\n        });\r\n        \r\n        this.node.on('game_mopai',function(data){\r\n            self.hideChupai();\r\n            data = data.detail;\r\n            var pai = data.pai;\r\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(data.seatIndex);\r\n            if(localIndex == 0){\r\n                var index = 13;\r\n                var sprite = self._myMJArr[index];\r\n                self.setSpriteFrameByMJID(\"M_\",sprite,pai,index);\r\n                sprite.node.mjId = pai;                \r\n            }\r\n            else if(cc.vv.replayMgr.isReplay()){\r\n                self.initMopai(data.seatIndex,pai);\r\n            }\r\n        });\r\n        \r\n        this.node.on('game_action',function(data){\r\n            self.showAction(data.detail);\r\n            console.log(\"game_action\");\r\n        });\r\n        \r\n        // this.node.on('game_feng',function(data){\r\n        //     self._gamecount\r\n        //     console.log(\"game_feng\");\r\n        // });\r\n        \r\n        this.node.on('hupai',function(data){\r\n            var data = data.detail;\r\n            //如果不是玩家自己，则将玩家的牌都放倒\r\n            var seatIndex = data.seatindex;\r\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(seatIndex);\r\n            var hupai = self._hupaiTips[localIndex];\r\n            hupai.active = true;\r\n            \r\n            if(localIndex == 0){\r\n                self.hideOptions();\r\n            }\r\n            var seatData = cc.vv.gameNetMgr.seats[seatIndex];\r\n            seatData.hued = true;\r\n            if(cc.vv.gameNetMgr.conf.type == \"xlch\"){\r\n                hupai.getChildByName(\"sprHu\").active = true;\r\n                hupai.getChildByName(\"sprZimo\").active = false;\r\n                self.initHupai(localIndex,data.hupai);\r\n                if(data.iszimo){\r\n                    if(seatData.seatindex == cc.vv.gameNetMgr.seatIndex){\r\n                        seatData.holds.pop();\r\n                        self.initMahjongs();                \r\n                    }\r\n                    else{\r\n                        self.initOtherMahjongs(seatData);\r\n                    }\r\n                } \r\n            }\r\n            else{\r\n                hupai.getChildByName(\"sprHu\").active = !data.iszimo;\r\n                hupai.getChildByName(\"sprZimo\").active = data.iszimo;\r\n                \r\n                if(!(data.iszimo && localIndex==0))\r\n                {\r\n                    //if(cc.vv.replayMgr.isReplay() == false && localIndex != 0){\r\n                    //    self.initEmptySprites(seatIndex);                \r\n                    //}\r\n                    self.initMopai(seatIndex,data.hupai);\r\n                }                                         \r\n            }\r\n            \r\n            if(cc.vv.replayMgr.isReplay() == true && cc.vv.gameNetMgr.conf.type != \"xlch\"){\r\n                var opt = self._opts[localIndex];\r\n                opt.node.active = true;\r\n                opt.sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",data.hupai);                \r\n            }\r\n            \r\n            if(data.iszimo){\r\n                self.playEfx(localIndex,\"play_zimo\");    \r\n            }\r\n            else{\r\n                self.playEfx(localIndex,\"play_hu\");\r\n            }\r\n            \r\n            cc.vv.audioMgr.playSFX(\"nv/hu.mp3\");\r\n        });\r\n        \r\n        this.node.on('mj_count',function(data){\r\n            self._mjcount.string = \"剩余\" + cc.vv.gameNetMgr.numOfMJ + \"张\";\r\n        });\r\n        \r\n        this.node.on('game_num',function(data){\r\n            //console.log('game_num!!!!!!!!!!'+cc.vv.gameNetMgr.fengxiang);\r\n            // switch(cc.vv.gameNetMgr.fengxiang) {\r\n            //     case 0: \r\n            //         self._gamecount.string = \"东风圈\";break;\r\n            //     case 1: \r\n            //         self._gamecount.string = \"南风圈\";break;\r\n            //     case 2: \r\n            //         self._gamecount.string = \"西风圈\";break;\r\n            //     case 3: \r\n            //         self._gamecount.string = \"北风圈\";break;\r\n            \r\n            // }\r\n        });\r\n        \r\n        this.node.on('game_feng',function(data){\r\n            console.log('game_num!!!!!!!!!!'+cc.vv.gameNetMgr.fengxiang);\r\n            switch(cc.vv.gameNetMgr.fengxiang) {\r\n                case 0: \r\n                    self._gamecount.string = \"东风圈\";break;\r\n                case 1: \r\n                    self._gamecount.string = \"南风圈\";break;\r\n                case 2: \r\n                    self._gamecount.string = \"西风圈\";break;\r\n                case 3: \r\n                    self._gamecount.string = \"北风圈\";break;\r\n            \r\n            }\r\n        });\r\n        \r\n        this.node.on('game_over',function(data){\r\n            self.gameRoot.active = false;\r\n            self.prepareRoot.active = true;\r\n        });\r\n        \r\n        \r\n        this.node.on('game_chupai_notify',function(data){\r\n            self.hideChupai();\r\n            var seatData = data.detail.seatData;\r\n            //如果是自己，则刷新手牌\r\n            if(seatData.seatindex == cc.vv.gameNetMgr.seatIndex){\r\n                self.initMahjongs();                \r\n            }\r\n            else{\r\n                self.initOtherMahjongs(seatData);\r\n            }\r\n            self.showChupai();\r\n            var audioUrl = cc.vv.mahjongmgr.getAudioURLByMJID(data.detail.pai);\r\n            cc.vv.audioMgr.playSFX(audioUrl);\r\n        });\r\n        \r\n        \r\n        \r\n        this.node.on('guo_notify',function(data){\r\n            self.hideChupai();\r\n            self.hideOptions();\r\n            var seatData = data.detail;\r\n            //如果是自己，则刷新手牌\r\n            if(seatData.seatindex == cc.vv.gameNetMgr.seatIndex){\r\n                self.initMahjongs();                \r\n            }\r\n            cc.vv.audioMgr.playSFX(\"give.mp3\");\r\n        });\r\n        \r\n        this.node.on('guo_result',function(data){\r\n            self.hideOptions();\r\n        });\r\n        \r\n        this.node.on('game_dingque_finish',function(data){\r\n            self.initMahjongs();\r\n        });\r\n        \r\n        this.node.on('peng_notify',function(data){    \r\n            self.hideChupai();\r\n            \r\n            var seatData = data.detail;\r\n            console.log('peng_notify');\r\n            console.log(data);\r\n            if(seatData.seatindex == cc.vv.gameNetMgr.seatIndex){\r\n                self.initMahjongs();                \r\n            }\r\n            else{\r\n                self.initOtherMahjongs(seatData);\r\n            }\r\n            var localIndex = self.getLocalIndex(seatData.seatindex);\r\n            self.playEfx(localIndex,\"play_peng\");\r\n            cc.vv.audioMgr.playSFX(\"nv/peng.mp3\");\r\n            self.hideOptions();\r\n        });\r\n        \r\n        this.node.on('chi_notify',function(data){    \r\n            console.log('chi_notify');\r\n            console.log(data);\r\n            self.hideChupai();\r\n            \r\n            var seatData = data.detail;\r\n            \r\n            console.log(data);\r\n            if(seatData.seatindex == cc.vv.gameNetMgr.seatIndex){\r\n                self.initMahjongs();                \r\n            }\r\n            else{\r\n                self.initOtherMahjongs(seatData);\r\n            }\r\n            var localIndex = self.getLocalIndex(seatData.seatindex);\r\n            self.playEfx(localIndex,\"play_chi\");\r\n            cc.vv.audioMgr.playSFX(\"nv/chi.mp3\");\r\n            self.hideOptions();\r\n        });\r\n        \r\n        this.node.on('buhua_notify',function(data){    \r\n            console.log('buhua_notify');\r\n            console.log(data.detail.holds);\r\n            var seatData = data.detail;\r\n            if(seatData.seatindex == cc.vv.gameNetMgr.seatIndex){\r\n                self.initMahjongs();\r\n            }\r\n            else{\r\n                self.initOtherMahjongs(seatData);\r\n            }\r\n        });\r\n        \r\n        this.node.on('gang_notify',function(data){\r\n            self.hideChupai();\r\n            var data = data.detail;\r\n            var seatData = data.seatData;\r\n            var gangtype = data.gangtype;\r\n            if(seatData.seatindex == cc.vv.gameNetMgr.seatIndex){\r\n                self.initMahjongs();                \r\n            }\r\n            else{\r\n                self.initOtherMahjongs(seatData);\r\n            }\r\n            \r\n            var localIndex = self.getLocalIndex(seatData.seatindex);\r\n            if(gangtype == \"wangang\"){\r\n                self.playEfx(localIndex,\"play_gang\");\r\n                cc.vv.audioMgr.playSFX(\"guafeng.mp3\");\r\n            }\r\n            else{\r\n                self.playEfx(localIndex,\"play_gang\");\r\n                cc.vv.audioMgr.playSFX(\"rain.mp3\");\r\n            }\r\n        });\r\n        \r\n        this.node.on(\"hangang_notify\",function(data){\r\n            var data = data.detail;\r\n            var localIndex = self.getLocalIndex(data);\r\n            self.playEfx(localIndex,\"play_gang\");\r\n            cc.vv.audioMgr.playSFX(\"nv/gang.mp3\");\r\n            self.hideOptions();\r\n        });\r\n    },\r\n    \r\n    showChupai:function(){\r\n        var pai = cc.vv.gameNetMgr.chupai; \r\n        if( pai >= 0 ){\r\n            //\r\n            var localIndex = this.getLocalIndex(cc.vv.gameNetMgr.turn);\r\n            var sprite = this._chupaiSprite[localIndex];\r\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai);\r\n            sprite.node.active = true;   \r\n        }\r\n    },\r\n    \r\n    addOption:function(btnName,pai,chitype){\r\n        console.log(\"弹出操作框\");\r\n        console.log(btnName);\r\n        console.log(pai);\r\n        //添加吃牌的三种方式\r\n        //var str = pai.split(\"_\");\r\n        //var painame = str[0];\r\n       //var painum = str[1];\r\n        if(chitype && chitype.left == true){\r\n            var op = this._options.getChildByName(\"chiop\").getChildByName(\"left\");\r\n            op.active = true;\r\n            var sprite = op.children[0].getComponent(cc.Sprite);\r\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai);\r\n            var sprite = op.children[1].getComponent(cc.Sprite);\r\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai+1);\r\n            var sprite = op.children[2].getComponent(cc.Sprite);\r\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai+2);\r\n        }\r\n        \r\n        if(chitype && chitype.mid == true){\r\n            var op = this._options.getChildByName(\"chiop\").getChildByName(\"mid\");\r\n            op.active = true;\r\n            var sprite = op.children[0].getComponent(cc.Sprite);\r\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai-1);\r\n            var sprite = op.children[1].getComponent(cc.Sprite);\r\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai);\r\n            var sprite = op.children[2].getComponent(cc.Sprite);\r\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai+1);\r\n        }\r\n        if(chitype && chitype.right == true){\r\n            var op = this._options.getChildByName(\"chiop\").getChildByName(\"right\");\r\n            op.active = true;\r\n            var sprite = op.children[0].getComponent(cc.Sprite);\r\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai-2);\r\n            var sprite = op.children[1].getComponent(cc.Sprite);\r\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai-1);\r\n            var sprite = op.children[2].getComponent(cc.Sprite);\r\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai);\r\n        }\r\n        //其他\r\n        for(var i = 0; i < this._options.childrenCount; ++i){\r\n            var child = this._options.children[i]; \r\n            if(child.name == \"op\" && child.active == false){\r\n                child.active = true;\r\n                var sprite = child.getChildByName(\"opTarget\").getComponent(cc.Sprite);\r\n                sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai);\r\n                var btn = child.getChildByName(btnName); \r\n                btn.active = true;\r\n                btn.pai = pai;\r\n                return;\r\n            }\r\n        }\r\n    },\r\n    \r\n    hideOptions:function(data){\r\n        this._options.active = false;\r\n        for(var i = 0; i < this._options.childrenCount; ++i){\r\n            var child = this._options.children[i]; \r\n            if(child.name == \"op\" ){\r\n                child.active = false;\r\n                child.getChildByName(\"btnPeng\").active = false;\r\n                child.getChildByName(\"btnGang\").active = false;\r\n                child.getChildByName(\"btnHu\").active = false;\r\n                child.getChildByName(\"btnChi\").active = false;\r\n            }\r\n            if(child.name == \"chiop\" ){\r\n                child.active = false;\r\n                child.getChildByName(\"left\").active = false;\r\n                child.getChildByName(\"mid\").active = false;\r\n                child.getChildByName(\"right\").active = false;\r\n            }\r\n        }\r\n    },\r\n    \r\n    showAction:function(data){\r\n        console.log(\"show action\");\r\n        console.log(this._options.active);\r\n        if(this._options.active){\r\n            this.hideOptions();\r\n        }\r\n        \r\n        if(data && (data.hu || data.gang || data.peng || data.chi)){\r\n            console.log(data.chi);\r\n            this._options.active = true;\r\n            if(data.hu){\r\n                this.addOption(\"btnHu\",data.pai);\r\n            }\r\n            if(data.peng){\r\n                this.addOption(\"btnPeng\",data.pai);\r\n            }\r\n            \r\n            if(data.gang){\r\n                for(var i = 0; i < data.gangpai.length;++i){\r\n                    var gp = data.gangpai[i];\r\n                    this.addOption(\"btnGang\",gp);\r\n                }\r\n            } \r\n            \r\n            if(data.chi){\r\n                this.addOption(\"btnChi\",data.pai,data.chitype);\r\n            }\r\n        }\r\n        console.log(data.chi);\r\n    },\r\n    \r\n    initWanfaLabel:function(){\r\n        var wanfa = cc.find(\"Canvas/infobar/wanfa\").getComponent(cc.Label);\r\n        wanfa.string = cc.vv.gameNetMgr.getWanfa();\r\n    },\r\n    \r\n    initHupai:function(localIndex,pai){\r\n        if(cc.vv.gameNetMgr.conf.type == \"xlch\"){\r\n            var hupailist = this._hupaiLists[localIndex];\r\n            for(var i = 0; i < hupailist.children.length; ++i){\r\n                var hupainode = hupailist.children[i]; \r\n                if(hupainode.active == false){\r\n                    var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\r\n                    hupainode.getComponent(cc.Sprite).spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre,pai);\r\n                    hupainode.active = true;\r\n                    break;\r\n                }\r\n            }   \r\n        }\r\n    },\r\n    \r\n    playEfx:function(index,name){\r\n        this._playEfxs[index].node.active = true;\r\n        this._playEfxs[index].play(name);\r\n    },\r\n    \r\n    playShazi:function(){\r\n        var anim1 = this.node.getChildByName(\"game\").getChildByName(\"shaizi\").getChildByName(\"shaizi1\").getComponent(cc.Animation);\r\n        anim1.play(\"shaizi\");\r\n        var anim2 = this.node.getChildByName(\"game\").getChildByName(\"shaizi\").getChildByName(\"shaizi2\").getComponent(cc.Animation);\r\n        anim2.play(\"shaizi2\");\r\n        this.onfinished(false);\r\n        anim2.on(\"finished\",this.onfinished,this);\r\n    },\r\n    \r\n    onfinished:function(isshow) {\r\n        var show = true;\r\n        (isshow==false) ? show = false:{};\r\n        var side =  this.node.getChildByName(\"game\").getChildByName(\"myself\");\r\n        side.getChildByName(\"huas\").active = show;\r\n        side.getChildByName(\"holds\").active = show;\r\n        var side =  this.node.getChildByName(\"game\").getChildByName(\"left\");\r\n        side.getChildByName(\"huas\").active = show;\r\n        side.getChildByName(\"holds\").active = show;\r\n        var side =  this.node.getChildByName(\"game\").getChildByName(\"up\");\r\n        side.getChildByName(\"huas\").active = show;\r\n        side.getChildByName(\"holds\").active = show;\r\n        var side =  this.node.getChildByName(\"game\").getChildByName(\"right\");\r\n        side.getChildByName(\"huas\").active = show;\r\n        side.getChildByName(\"holds\").active = show;\r\n    },\r\n    \r\n    onGameBeign:function(){\r\n        \r\n        for(var i = 0; i < this._playEfxs.length; ++i){\r\n            this._playEfxs[i].node.active = false;\r\n        }\r\n        \r\n        for(var i = 0; i < this._hupaiLists.length; ++i){\r\n            for(var j = 0; j < this._hupaiLists[i].childrenCount; ++j){\r\n                this._hupaiLists[i].children[j].active = false;\r\n            }\r\n        }\r\n        \r\n        for(var i = 0; i < cc.vv.gameNetMgr.seats.length; ++i){\r\n            var seatData = cc.vv.gameNetMgr.seats[i];\r\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(i);        \r\n            var hupai = this._hupaiTips[localIndex];\r\n            hupai.active = seatData.hued;\r\n            if(seatData.hued){\r\n                hupai.getChildByName(\"sprHu\").active = !seatData.iszimo;\r\n                hupai.getChildByName(\"sprZimo\").active = seatData.iszimo;\r\n            }\r\n            \r\n            if(seatData.huinfo){\r\n                for(var j = 0; j < seatData.huinfo.length; ++j){\r\n                    var info = seatData.huinfo[j];\r\n                    if(info.ishupai){\r\n                        this.initHupai(localIndex,info.pai);    \r\n                    }\r\n                }\r\n            }\r\n        }\r\n        \r\n        this.hideChupai();\r\n        this.hideOptions();\r\n        var sides = [\"right\",\"up\",\"left\"];        \r\n        var gameChild = this.node.getChildByName(\"game\");\r\n        for(var i = 0; i < sides.length; ++i){\r\n            var sideChild = gameChild.getChildByName(sides[i]);\r\n            var holds = sideChild.getChildByName(\"holds\");\r\n            for(var j = 0; j < holds.childrenCount; ++j){\r\n                var nc = holds.children[j];\r\n                nc.active = true;\r\n                nc.scaleX = 1.0;\r\n                nc.scaleY = 1.0;\r\n                var sprite = nc.getComponent(cc.Sprite); \r\n                sprite.spriteFrame = cc.vv.mahjongmgr.holdsEmpty[i+1];\r\n            }            \r\n        }\r\n      \r\n        if(cc.vv.gameNetMgr.gamestate == \"\" && cc.vv.replayMgr.isReplay() == false){\r\n            return;\r\n        }\r\n\r\n        this.gameRoot.active = true;\r\n        this.prepareRoot.active = false;\r\n        this.initMahjongs();\r\n        var seats = cc.vv.gameNetMgr.seats;\r\n        for(var i in seats){\r\n            var seatData = seats[i];\r\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(i);\r\n            if(localIndex != 0){\r\n                this.initOtherMahjongs(seatData);\r\n                if(i == cc.vv.gameNetMgr.turn){\r\n                    this.initMopai(i,-1);\r\n                }\r\n                else{\r\n                    this.initMopai(i,null);    \r\n                }\r\n            }\r\n        }\r\n        this.showChupai();\r\n        if(cc.vv.gameNetMgr.curaction != null){\r\n            this.showAction(cc.vv.gameNetMgr.curaction);\r\n            cc.vv.gameNetMgr.curaction = null;\r\n        }\r\n        \r\n        this.checkQueYiMen();\r\n    },\r\n    \r\n    onMJClicked:function(event){\r\n        console.log(\"event\");\r\n        console.log(event);\r\n        if(cc.vv.gameNetMgr.isHuanSanZhang){\r\n            this.node.emit(\"mj_clicked\",event.target);\r\n            return;\r\n        }\r\n        \r\n        //如果不是自己的轮子，则忽略\r\n        if(cc.vv.gameNetMgr.turn != cc.vv.gameNetMgr.seatIndex){\r\n            console.log(\"not your turn.\" + cc.vv.gameNetMgr.turn);\r\n            return;\r\n        }\r\n        \r\n        for(var i = 0; i < this._myMJArr.length; ++i){\r\n            if(event.target == this._myMJArr[i].node){\r\n                //如果是再次点击，则出牌\r\n                if(event.target == this._selectedMJ){\r\n                    this.shoot(this._selectedMJ.mjId); \r\n                    this._selectedMJ.y = 0;\r\n                    this._selectedMJ = null;\r\n                    return;\r\n                }\r\n                if(this._selectedMJ != null){\r\n                    this._selectedMJ.y = 0;\r\n                }\r\n                event.target.y = 15;\r\n                this._selectedMJ = event.target;\r\n                return;\r\n            }\r\n        }\r\n    },\r\n    \r\n    //如果摸到的牌是花，则会调用这个函数\r\n    chuhua:function(mjid){\r\n        console.log(chuhua);\r\n    },\r\n    \r\n    //出牌\r\n    shoot:function(mjId){\r\n        if(mjId == null){\r\n            return;\r\n        }\r\n        cc.vv.net.send('chupai',mjId);\r\n    },\r\n    \r\n    getMJIndex:function(side,index){\r\n        if(side == \"right\" || side == \"up\"){\r\n            return 13 - index;\r\n        }\r\n        return index;\r\n    },\r\n    \r\n    initMopai:function(seatIndex,pai){\r\n        var localIndex = cc.vv.gameNetMgr.getLocalIndex(seatIndex);\r\n        var side = cc.vv.mahjongmgr.getSide(localIndex);\r\n        var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\r\n        \r\n        var gameChild = this.node.getChildByName(\"game\");\r\n        var sideChild = gameChild.getChildByName(side);\r\n        var holds = sideChild.getChildByName(\"holds\");\r\n\r\n        var lastIndex = this.getMJIndex(side,13);\r\n        var nc = holds.children[lastIndex];\r\n\r\n        nc.scaleX = 1.0;\r\n        nc.scaleY = 1.0;\r\n                        \r\n        if(pai == null){\r\n            nc.active = false;\r\n        }\r\n        else if(pai >= 0){\r\n            nc.active = true;\r\n            if(side == \"up\"){\r\n                nc.scaleX = 0.73;\r\n                nc.scaleY = 0.73;                    \r\n            }\r\n            var sprite = nc.getComponent(cc.Sprite); \r\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre,pai);\r\n        }\r\n        else if(pai != null){\r\n            nc.active = true;\r\n            if(side == \"up\"){\r\n                nc.scaleX = 1.0;\r\n                nc.scaleY = 1.0;                    \r\n            }\r\n            var sprite = nc.getComponent(cc.Sprite); \r\n            sprite.spriteFrame = cc.vv.mahjongmgr.getHoldsEmptySpriteFrame(side);\r\n        }\r\n    },\r\n    \r\n    initEmptySprites:function(seatIndex){\r\n        var localIndex = cc.vv.gameNetMgr.getLocalIndex(seatIndex);\r\n        var side = cc.vv.mahjongmgr.getSide(localIndex);\r\n        var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\r\n        \r\n        var gameChild = this.node.getChildByName(\"game\");\r\n        var sideChild = gameChild.getChildByName(side);\r\n        var holds = sideChild.getChildByName(\"holds\");\r\n        var spriteFrame = cc.vv.mahjongmgr.getEmptySpriteFrame(side);\r\n        for(var i = 0; i < holds.childrenCount; ++i){\r\n            var nc = holds.children[i];\r\n            nc.scaleX = 1.0;\r\n            nc.scaleY = 1.0;\r\n            \r\n            var sprite = nc.getComponent(cc.Sprite); \r\n            sprite.spriteFrame = spriteFrame;\r\n        }\r\n    },\r\n    \r\n    initOtherMahjongs:function(seatData){\r\n        //console.log(\"seat:\" + seatData.seatindex);\r\n        var localIndex = this.getLocalIndex(seatData.seatindex);\r\n        if(localIndex == 0){\r\n            return;\r\n        }\r\n        var side = cc.vv.mahjongmgr.getSide(localIndex);\r\n        var game = this.node.getChildByName(\"game\");\r\n        var sideRoot = game.getChildByName(side);\r\n        var sideHolds = sideRoot.getChildByName(\"holds\");\r\n        var num = seatData.pengs.length + seatData.angangs.length + seatData.diangangs.length + seatData.wangangs.length + seatData.chis.length;\r\n        num *= 3;\r\n        for(var i = 0; i < num; ++i){\r\n            var idx = this.getMJIndex(side,i);\r\n            sideHolds.children[idx].active = false;\r\n        }\r\n        \r\n        var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\r\n        var holds = this.sortHolds(seatData);\r\n        if(holds != null && holds.length > 0){\r\n            for(var i = 0; i < holds.length; ++i){\r\n                var idx = this.getMJIndex(side,i + num);\r\n                var sprite = sideHolds.children[idx].getComponent(cc.Sprite); \r\n                if(side == \"up\"){\r\n                    sprite.node.scaleX = 0.73;\r\n                    sprite.node.scaleY = 0.73;                    \r\n                }\r\n                sprite.node.active = true;\r\n                sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre,holds[i]);\r\n            }\r\n            \r\n            if(holds.length + num == 13){\r\n                var lasetIdx = this.getMJIndex(side,13);\r\n                sideHolds.children[lasetIdx].active = false;\r\n            }\r\n        }\r\n    },\r\n    \r\n    sortHolds:function(seatData){\r\n        var holds = seatData.holds;\r\n        if(holds == null){\r\n            return null;\r\n        }\r\n        //如果手上的牌的数目是2,5,8,11,14，表示最后一张牌是刚摸到的牌\r\n        var mopai = null;\r\n        var l = holds.length \r\n        if( l == 2 || l == 5 || l == 8 || l == 11 || l == 14){\r\n            mopai = holds.pop();\r\n        }\r\n        \r\n        var dingque = seatData.dingque;\r\n        cc.vv.mahjongmgr.sortMJ(holds,dingque);\r\n        \r\n        //将摸牌添加到最后\r\n        if(mopai != null){\r\n            holds.push(mopai);\r\n        }\r\n        return holds;\r\n    },\r\n    \r\n    initMahjongs:function(){\r\n        var seats = cc.vv.gameNetMgr.seats;\r\n        var seatData = seats[cc.vv.gameNetMgr.seatIndex];\r\n        var holds = this.sortHolds(seatData);\r\n        if(holds == null){\r\n            return;\r\n        }\r\n        console.log(seats);\r\n        //初始化手牌\r\n        var lackingNum = (seatData.chis.length + seatData.pengs.length + seatData.angangs.length + seatData.diangangs.length + seatData.wangangs.length)*3;\r\n        for(var i = 0; i < holds.length; ++i){\r\n            var mjid = holds[i];\r\n            var sprite = this._myMJArr[i + lackingNum];\r\n            sprite.node.mjId = mjid;\r\n            sprite.node.y = 0;\r\n            this.setSpriteFrameByMJID(\"M_\",sprite,mjid);\r\n        }\r\n        for(var i = 0; i < lackingNum; ++i){\r\n            var sprite = this._myMJArr[i]; \r\n            sprite.node.mjId = null;\r\n            sprite.spriteFrame = null;\r\n            sprite.node.active = false;\r\n        }\r\n        for(var i = lackingNum + holds.length; i < this._myMJArr.length; ++i){\r\n            var sprite = this._myMJArr[i]; \r\n            sprite.node.mjId = null;\r\n            sprite.spriteFrame = null;\r\n            sprite.node.active = false;            \r\n        }\r\n    },\r\n    \r\n    setSpriteFrameByMJID:function(pre,sprite,mjid){\r\n        sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre,mjid);\r\n        sprite.node.active = true;\r\n    },\r\n    \r\n    //如果玩家手上还有缺的牌没有打，则只能打缺牌\r\n    checkQueYiMen:function(){\r\n        if(cc.vv.gameNetMgr.conf==null || cc.vv.gameNetMgr.conf.type != \"xlch\" || !cc.vv.gameNetMgr.getSelfData().hued){\r\n            //遍历检查看是否有未打缺的牌 如果有，则需要将不是定缺的牌设置为不可用\r\n            var dingque = cc.vv.gameNetMgr.dingque;\r\n    //        console.log(dingque)\r\n            var hasQue = false;\r\n            if(cc.vv.gameNetMgr.seatIndex == cc.vv.gameNetMgr.turn){\r\n                for(var i = 0; i < this._myMJArr.length; ++i){\r\n                    var sprite = this._myMJArr[i];\r\n    //                console.log(\"sprite.node.mjId:\" + sprite.node.mjId);\r\n                    if(sprite.node.mjId != null){\r\n                        var type = cc.vv.mahjongmgr.getMahjongType(sprite.node.mjId);\r\n                        if(type == dingque){\r\n                            hasQue = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                }            \r\n            }\r\n\r\n    //        console.log(\"hasQue:\" + hasQue);\r\n            for(var i = 0; i < this._myMJArr.length; ++i){\r\n                var sprite = this._myMJArr[i];\r\n                if(sprite.node.mjId != null){\r\n                    var type = cc.vv.mahjongmgr.getMahjongType(sprite.node.mjId);\r\n                    if(hasQue && type != dingque){\r\n                        sprite.node.getComponent(cc.Button).interactable = false;\r\n                    }\r\n                    else{\r\n                        sprite.node.getComponent(cc.Button).interactable = true;\r\n                    }\r\n                }\r\n            }   \r\n        }\r\n        else{\r\n            if(cc.vv.gameNetMgr.seatIndex == cc.vv.gameNetMgr.turn){\r\n                for(var i = 0; i < 14; ++i){\r\n                    var sprite = this._myMJArr[i]; \r\n                    if(sprite.node.active == true){\r\n                        sprite.node.getComponent(cc.Button).interactable = i == 13;\r\n                    }\r\n                }\r\n            }\r\n            else{\r\n                for(var i = 0; i < 14; ++i){\r\n                    var sprite = this._myMJArr[i]; \r\n                    if(sprite.node.active == true){\r\n                        sprite.node.getComponent(cc.Button).interactable = true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    \r\n    getLocalIndex:function(index){\r\n        var ret = (index - cc.vv.gameNetMgr.seatIndex + 4) % 4;\r\n        //console.log(\"old:\" + index + \",base:\" + cc.vv.gameNetMgr.seatIndex + \",new:\" + ret);\r\n        return ret;\r\n    },\r\n    \r\n    onOptionClicked:function(event){\r\n        console.log(event.target.name);\r\n        if(event.target.name == \"btnPeng\"){\r\n            cc.vv.net.send(\"peng\");\r\n        }\r\n        else if(event.target.name == \"btnGang\"){\r\n            cc.vv.net.send(\"gang\",event.target.pai);\r\n        }\r\n        else if(event.target.name == \"btnHu\"){\r\n            cc.vv.net.send(\"hu\");\r\n        }\r\n        //打开吃菜单\r\n        else if(event.target.name == \"btnChi\"){\r\n            this._options.getChildByName(\"chiop\").active = true;\r\n            \r\n            for(var i = 0; i < this._options.childrenCount; ++i){\r\n                var child = this._options.children[i]; \r\n                if(child.name == \"op\" ){\r\n                    child.active = false;\r\n                }\r\n            }\r\n        }\r\n        //左吃\r\n        else if(event.target.name == \"left\"){\r\n            cc.vv.net.send(\"chi\",\"left\");\r\n        }\r\n        //中吃\r\n        else if(event.target.name == \"mid\"){\r\n            cc.vv.net.send(\"chi\",\"mid\");\r\n        }\r\n        //右吃\r\n        else if(event.target.name == \"right\"){\r\n            cc.vv.net.send(\"chi\",\"right\");\r\n        }\r\n        else if(event.target.name == \"btnGuo\"){\r\n            cc.vv.net.send(\"guo\");\r\n        }\r\n    },\r\n    \r\n    // called every frame, uncomment this function to activate update callback\r\n    update: function (dt) {\r\n    },\r\n    \r\n    onDestroy:function(){\r\n        console.log(\"onDestroy\");\r\n        if(cc.vv){\r\n            cc.vv.gameNetMgr.clear();   \r\n        }\r\n    }\r\n});\r\n"
  ]
}