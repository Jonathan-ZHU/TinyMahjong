{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "cc",
    "Class",
    "extends",
    "Component",
    "properties",
    "gameRoot",
    "default",
    "type",
    "Node",
    "prepareRoot",
    "_myMJArr",
    "_options",
    "_selectedMJ",
    "_chupaiSprite",
    "_mjcount",
    "_gamecount",
    "_hupaiTips",
    "_hupaiLists",
    "_playEfxs",
    "_opts",
    "_gametype",
    "onLoad",
    "sys",
    "isNative",
    "isMobile",
    "cvs",
    "node",
    "getComponent",
    "Canvas",
    "fitHeight",
    "fitWidth",
    "vv",
    "director",
    "loadScene",
    "addComponent",
    "initView",
    "initEventHandlers",
    "youkeorweixin",
    "localStorage",
    "getItem",
    "console",
    "log",
    "find",
    "active",
    "initWanfaLabel",
    "onGameBeign",
    "audioMgr",
    "playBGM",
    "gameChild",
    "getChildByName",
    "Label",
    "string",
    "gameNetMgr",
    "numOfMJ",
    "fengxiang",
    "conf",
    "myselfChild",
    "myholds",
    "i",
    "children",
    "length",
    "sprite",
    "Sprite",
    "push",
    "spriteFrame",
    "realwidth",
    "getVisibleSize",
    "width",
    "scaleX",
    "scaleY",
    "sides",
    "side",
    "sideChild",
    "Animation",
    "opt",
    "data",
    "opts",
    "hideOptions",
    "hideChupai",
    "dataEventHandler",
    "self",
    "on",
    "initMahjongs",
    "checkQueYiMen",
    "playShazi",
    "detail",
    "last",
    "seatIndex",
    "initMopai",
    "replayMgr",
    "isReplay",
    "turn",
    "pai",
    "localIndex",
    "getLocalIndex",
    "index",
    "setSpriteFrameByMJID",
    "mjId",
    "showAction",
    "seatindex",
    "hupai",
    "seatData",
    "seats",
    "hued",
    "initHupai",
    "iszimo",
    "holds",
    "pop",
    "initOtherMahjongs",
    "mahjongmgr",
    "getSpriteFrameByMJID",
    "playEfx",
    "playSFX",
    "showChupai",
    "audioUrl",
    "getAudioURLByMJID",
    "gangtype",
    "chupai",
    "addOption",
    "btnName",
    "chitype",
    "left",
    "op",
    "mid",
    "right",
    "childrenCount",
    "child",
    "name",
    "btn",
    "hu",
    "gang",
    "peng",
    "chi",
    "gangpai",
    "gp",
    "wanfa",
    "getWanfa",
    "hupailist",
    "hupainode",
    "pre",
    "getFoldPre",
    "play",
    "anim1",
    "anim2",
    "onfinished",
    "isshow",
    "show",
    "j",
    "huinfo",
    "info",
    "ishupai",
    "nc",
    "holdsEmpty",
    "gamestate",
    "curaction",
    "onMJClicked",
    "event",
    "isHuanSanZhang",
    "emit",
    "target",
    "shoot",
    "y",
    "chuhua",
    "mjid",
    "net",
    "send",
    "getMJIndex",
    "getSide",
    "lastIndex",
    "getHoldsEmptySpriteFrame",
    "initEmptySprites",
    "getEmptySpriteFrame",
    "game",
    "sideRoot",
    "sideHolds",
    "num",
    "pengs",
    "angangs",
    "diangangs",
    "wangangs",
    "chis",
    "idx",
    "sortHolds",
    "lasetIdx",
    "mopai",
    "l",
    "dingque",
    "sortMJ",
    "lackingNum",
    "getSelfData",
    "hasQue",
    "getMahjongType",
    "Button",
    "interactable",
    "ret",
    "onOptionClicked",
    "update",
    "dt",
    "onDestroy",
    "clear"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {        \r\n        gameRoot:{\r\n            default:null,\r\n            type:cc.Node\r\n        },\r\n        \r\n        prepareRoot:{\r\n            default:null,\r\n            type:cc.Node   \r\n        },\r\n        \r\n        _myMJArr:[],\r\n        _options:null,\r\n        _selectedMJ:null,\r\n        _chupaiSprite:[],\r\n        _mjcount:null,\r\n        _gamecount:null,\r\n        _hupaiTips:[],\r\n        _hupaiLists:[],\r\n        _playEfxs:[],\r\n        _opts:[],\r\n        _gametype:null,\r\n    },\r\n    \r\n    onLoad: function () {\r\n        if(!cc.sys.isNative && cc.sys.isMobile){\r\n            var cvs = this.node.getComponent(cc.Canvas);\r\n            cvs.fitHeight = true;\r\n            cvs.fitWidth = true;\r\n        }\r\n        if(!cc.vv){\r\n            cc.director.loadScene(\"loading\");\r\n            return;\r\n        }\r\n        this.addComponent(\"NoticeTip\");\r\n        this.addComponent(\"GameOver\");\r\n        this.addComponent(\"DingQue\");\r\n        this.addComponent(\"PengGangs\");\r\n        this.addComponent(\"MJRoom\");\r\n        this.addComponent(\"TimePointer\");\r\n        this.addComponent(\"GameResult\");\r\n        this.addComponent(\"Chat\");\r\n        this.addComponent(\"Folds\");\r\n        this.addComponent(\"ReplayCtrl\");\r\n        this.addComponent(\"PopupMgr\");\r\n        this.addComponent(\"HuanSanZhang\");\r\n        this.addComponent(\"ReConnect\");\r\n        this.addComponent(\"Voice\");\r\n        this.addComponent(\"UserInfoShow\");\r\n        \r\n        this.initView();\r\n        this.initEventHandlers();\r\n\r\n        var youkeorweixin = cc.sys.localStorage.getItem(\"youkeorweixin\");\r\n                console.log(\"youkeorweixin:\"+youkeorweixin);\r\n                if(youkeorweixin == 0){\r\n                    \r\n                        cc.find(\"Canvas/prepare/btnWeichat\").active = false; \r\n                   \r\n            }\r\n        \r\n        this.gameRoot.active = false;\r\n        this.prepareRoot.active = true;\r\n        this.initWanfaLabel();\r\n        this.onGameBeign();\r\n        cc.vv.audioMgr.playBGM(\"bgMain.mp3\");\r\n    },\r\n    \r\n    initView:function(){\r\n        \r\n        //搜索需要的子节点\r\n        var gameChild = this.node.getChildByName(\"game\");\r\n        \r\n        this._mjcount = gameChild.getChildByName('mjcount').getComponent(cc.Label);\r\n        this._mjcount.string = \"剩余\" + cc.vv.gameNetMgr.numOfMJ + \"张\";\r\n        this._gamecount = gameChild.getChildByName('gamecount').getComponent(cc.Label);\r\n        switch(cc.vv.gameNetMgr.fengxiang) {\r\n            case 0: \r\n                this._gamecount.string = \"东风圈\";break;\r\n            case 1: \r\n                this._gamecount.string = \"南风圈\";break;\r\n            case 2: \r\n                this._gamecount.string = \"西风圈\";break;\r\n            case 3: \r\n                this._gamecount.string = \"北风圈\";break;\r\n        }\r\n        \r\n        \r\n        this._gametype = gameChild.getChildByName('gametype');\r\n        switch (cc.vv.gameNetMgr.conf.type) {\r\n            case \"sjmmj\" :  this._gametype.getComponent(cc.Label).string = \"沈家门麻将\";break;\r\n            case \"dhmj\" :  this._gametype.getComponent(cc.Label).string = \"定海麻将\";break;\r\n            case \"tdh\" :  this._gametype.getComponent(cc.Label).string = \"推到胡\";break;\r\n        }\r\n            \r\n\r\n        var myselfChild = gameChild.getChildByName(\"myself\");\r\n        var myholds = myselfChild.getChildByName(\"holds\");\r\n        \r\n        for(var i = 0; i < myholds.children.length; ++i){\r\n            var sprite = myholds.children[i].getComponent(cc.Sprite);\r\n            this._myMJArr.push(sprite);\r\n            sprite.spriteFrame = null;\r\n        }\r\n        \r\n        var realwidth = cc.director.getVisibleSize().width;\r\n        myholds.scaleX *= realwidth/1280;\r\n        myholds.scaleY *= realwidth/1280;  \r\n        \r\n        var sides = [\"myself\",\"right\",\"up\",\"left\"];\r\n        for(var i = 0; i < sides.length; ++i){\r\n            var side = sides[i];\r\n            \r\n            var sideChild = gameChild.getChildByName(side);\r\n            this._hupaiTips.push(sideChild.getChildByName(\"HuPai\"));\r\n            this._hupaiLists.push(sideChild.getChildByName(\"hupailist\"));\r\n            this._playEfxs.push(sideChild.getChildByName(\"play_efx\").getComponent(cc.Animation));\r\n            this._chupaiSprite.push(sideChild.getChildByName(\"ChuPai\").children[0].getComponent(cc.Sprite));\r\n            \r\n            var opt = sideChild.getChildByName(\"opt\");\r\n            opt.active = false;\r\n            var sprite = opt.getChildByName(\"pai\").getComponent(cc.Sprite);\r\n            var data = {\r\n                node:opt,\r\n                sprite:sprite\r\n            };\r\n            this._opts.push(data);\r\n        }\r\n        \r\n        var opts = gameChild.getChildByName(\"ops\");\r\n        this._options = opts;\r\n        this.hideOptions();\r\n        this.hideChupai();\r\n    },\r\n    \r\n    hideChupai:function(){\r\n        for(var i = 0; i < this._chupaiSprite.length; ++i){\r\n            this._chupaiSprite[i].node.active = false;\r\n        }        \r\n    },\r\n    \r\n    initEventHandlers:function(){\r\n        cc.vv.gameNetMgr.dataEventHandler = this.node;\r\n        \r\n        //初始化事件监听器\r\n        var self = this;\r\n        \r\n        this.node.on('game_holds',function(data){\r\n           self.initMahjongs();\r\n           self.checkQueYiMen();\r\n        });\r\n        \r\n        this.node.on('game_begin',function(data){\r\n            self.playShazi();\r\n            self.onGameBeign(data);\r\n        });\r\n        \r\n        this.node.on('game_sync',function(data){\r\n            self.onGameBeign(data);\r\n        });\r\n        \r\n        this.node.on('game_chupai',function(data){\r\n            data = data.detail;\r\n            self.hideChupai();\r\n            self.checkQueYiMen();\r\n            if(data.last != cc.vv.gameNetMgr.seatIndex){\r\n                self.initMopai(data.last,null);   \r\n            }\r\n            if(!cc.vv.replayMgr.isReplay() && data.turn != cc.vv.gameNetMgr.seatIndex){\r\n                self.initMopai(data.turn,-1);\r\n            }\r\n        });\r\n        \r\n        this.node.on('game_mopai',function(data){\r\n            self.hideChupai();\r\n            data = data.detail;\r\n            var pai = data.pai;\r\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(data.seatIndex);\r\n            if(localIndex == 0){\r\n                var index = 13;\r\n                var sprite = self._myMJArr[index];\r\n                self.setSpriteFrameByMJID(\"M_\",sprite,pai,index);\r\n                sprite.node.mjId = pai;                \r\n            }\r\n            else if(cc.vv.replayMgr.isReplay()){\r\n                self.initMopai(data.seatIndex,pai);\r\n            }\r\n        });\r\n        \r\n        this.node.on('game_action',function(data){\r\n            self.showAction(data.detail);\r\n            console.log(\"game_action\");\r\n        });\r\n        \r\n        // this.node.on('game_feng',function(data){\r\n        //     self._gamecount\r\n        //     console.log(\"game_feng\");\r\n        // });\r\n        \r\n        this.node.on('hupai',function(data){\r\n            var data = data.detail;\r\n            //如果不是玩家自己，则将玩家的牌都放倒\r\n            var seatIndex = data.seatindex;\r\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(seatIndex);\r\n            var hupai = self._hupaiTips[localIndex];\r\n            hupai.active = true;\r\n            \r\n            if(localIndex == 0){\r\n                self.hideOptions();\r\n            }\r\n            var seatData = cc.vv.gameNetMgr.seats[seatIndex];\r\n            seatData.hued = true;\r\n            if(cc.vv.gameNetMgr.conf.type == \"xlch\"){\r\n                hupai.getChildByName(\"sprHu\").active = true;\r\n                hupai.getChildByName(\"sprZimo\").active = false;\r\n                self.initHupai(localIndex,data.hupai);\r\n                if(data.iszimo){\r\n                    if(seatData.seatindex == cc.vv.gameNetMgr.seatIndex){\r\n                        seatData.holds.pop();\r\n                        self.initMahjongs();                \r\n                    }\r\n                    else{\r\n                        self.initOtherMahjongs(seatData);\r\n                    }\r\n                } \r\n            }\r\n            else{\r\n                hupai.getChildByName(\"sprHu\").active = !data.iszimo;\r\n                hupai.getChildByName(\"sprZimo\").active = data.iszimo;\r\n                \r\n                if(!(data.iszimo && localIndex==0))\r\n                {\r\n                    //if(cc.vv.replayMgr.isReplay() == false && localIndex != 0){\r\n                    //    self.initEmptySprites(seatIndex);                \r\n                    //}\r\n                    self.initMopai(seatIndex,data.hupai);\r\n                }                                         \r\n            }\r\n            \r\n            if(cc.vv.replayMgr.isReplay() == true && cc.vv.gameNetMgr.conf.type != \"xlch\"){\r\n                var opt = self._opts[localIndex];\r\n                opt.node.active = true;\r\n                opt.sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",data.hupai);                \r\n            }\r\n            \r\n            if(data.iszimo){\r\n                self.playEfx(localIndex,\"play_zimo\");    \r\n            }\r\n            else{\r\n                self.playEfx(localIndex,\"play_hu\");\r\n            }\r\n            \r\n            cc.vv.audioMgr.playSFX(\"nv/hu.mp3\");\r\n        });\r\n        \r\n        this.node.on('mj_count',function(data){\r\n            self._mjcount.string = \"剩余\" + cc.vv.gameNetMgr.numOfMJ + \"张\";\r\n        });\r\n        \r\n        this.node.on('game_num',function(data){\r\n            //console.log('game_num!!!!!!!!!!'+cc.vv.gameNetMgr.fengxiang);\r\n            // switch(cc.vv.gameNetMgr.fengxiang) {\r\n            //     case 0: \r\n            //         self._gamecount.string = \"东风圈\";break;\r\n            //     case 1: \r\n            //         self._gamecount.string = \"南风圈\";break;\r\n            //     case 2: \r\n            //         self._gamecount.string = \"西风圈\";break;\r\n            //     case 3: \r\n            //         self._gamecount.string = \"北风圈\";break;\r\n            \r\n            // }\r\n        });\r\n        \r\n        this.node.on('game_feng',function(data){\r\n            console.log('game_num!!!!!!!!!!'+cc.vv.gameNetMgr.fengxiang);\r\n            switch(cc.vv.gameNetMgr.fengxiang) {\r\n                case 0: \r\n                    self._gamecount.string = \"东风圈\";break;\r\n                case 1: \r\n                    self._gamecount.string = \"南风圈\";break;\r\n                case 2: \r\n                    self._gamecount.string = \"西风圈\";break;\r\n                case 3: \r\n                    self._gamecount.string = \"北风圈\";break;\r\n            \r\n            }\r\n        });\r\n        \r\n        this.node.on('game_over',function(data){\r\n            self.gameRoot.active = false;\r\n            self.prepareRoot.active = true;\r\n        });\r\n        \r\n        \r\n        this.node.on('game_chupai_notify',function(data){\r\n            self.hideChupai();\r\n            var seatData = data.detail.seatData;\r\n            //如果是自己，则刷新手牌\r\n            if(seatData.seatindex == cc.vv.gameNetMgr.seatIndex){\r\n                self.initMahjongs();                \r\n            }\r\n            else{\r\n                self.initOtherMahjongs(seatData);\r\n            }\r\n            self.showChupai();\r\n            var audioUrl = cc.vv.mahjongmgr.getAudioURLByMJID(data.detail.pai);\r\n            cc.vv.audioMgr.playSFX(audioUrl);\r\n        });\r\n        \r\n        \r\n        \r\n        this.node.on('guo_notify',function(data){\r\n            self.hideChupai();\r\n            self.hideOptions();\r\n            var seatData = data.detail;\r\n            //如果是自己，则刷新手牌\r\n            if(seatData.seatindex == cc.vv.gameNetMgr.seatIndex){\r\n                self.initMahjongs();                \r\n            }\r\n            cc.vv.audioMgr.playSFX(\"give.mp3\");\r\n        });\r\n        \r\n        this.node.on('guo_result',function(data){\r\n            self.hideOptions();\r\n        });\r\n        \r\n        this.node.on('game_dingque_finish',function(data){\r\n            self.initMahjongs();\r\n        });\r\n        \r\n        this.node.on('peng_notify',function(data){    \r\n            self.hideChupai();\r\n            \r\n            var seatData = data.detail;\r\n            console.log('peng_notify');\r\n            console.log(data);\r\n            if(seatData.seatindex == cc.vv.gameNetMgr.seatIndex){\r\n                self.initMahjongs();                \r\n            }\r\n            else{\r\n                self.initOtherMahjongs(seatData);\r\n            }\r\n            var localIndex = self.getLocalIndex(seatData.seatindex);\r\n            self.playEfx(localIndex,\"play_peng\");\r\n            cc.vv.audioMgr.playSFX(\"nv/peng.mp3\");\r\n            self.hideOptions();\r\n        });\r\n        \r\n        this.node.on('chi_notify',function(data){    \r\n            console.log('chi_notify');\r\n            console.log(data);\r\n            self.hideChupai();\r\n            \r\n            var seatData = data.detail;\r\n            \r\n            console.log(data);\r\n            if(seatData.seatindex == cc.vv.gameNetMgr.seatIndex){\r\n                self.initMahjongs();                \r\n            }\r\n            else{\r\n                self.initOtherMahjongs(seatData);\r\n            }\r\n            var localIndex = self.getLocalIndex(seatData.seatindex);\r\n            self.playEfx(localIndex,\"play_chi\");\r\n            cc.vv.audioMgr.playSFX(\"nv/chi.mp3\");\r\n            self.hideOptions();\r\n        });\r\n        \r\n        this.node.on('buhua_notify',function(data){    \r\n            console.log('buhua_notify');\r\n            console.log(data.detail.holds);\r\n            var seatData = data.detail;\r\n            if(seatData.seatindex == cc.vv.gameNetMgr.seatIndex){\r\n                self.initMahjongs();\r\n            }\r\n            else{\r\n                self.initOtherMahjongs(seatData);\r\n            }\r\n        });\r\n        \r\n        this.node.on('gang_notify',function(data){\r\n            self.hideChupai();\r\n            var data = data.detail;\r\n            var seatData = data.seatData;\r\n            var gangtype = data.gangtype;\r\n            if(seatData.seatindex == cc.vv.gameNetMgr.seatIndex){\r\n                self.initMahjongs();                \r\n            }\r\n            else{\r\n                self.initOtherMahjongs(seatData);\r\n            }\r\n            \r\n            var localIndex = self.getLocalIndex(seatData.seatindex);\r\n            if(gangtype == \"wangang\"){\r\n                self.playEfx(localIndex,\"play_gang\");\r\n                cc.vv.audioMgr.playSFX(\"guafeng.mp3\");\r\n            }\r\n            else{\r\n                self.playEfx(localIndex,\"play_gang\");\r\n                cc.vv.audioMgr.playSFX(\"rain.mp3\");\r\n            }\r\n        });\r\n        \r\n        this.node.on(\"hangang_notify\",function(data){\r\n            var data = data.detail;\r\n            var localIndex = self.getLocalIndex(data);\r\n            self.playEfx(localIndex,\"play_gang\");\r\n            cc.vv.audioMgr.playSFX(\"nv/gang.mp3\");\r\n            self.hideOptions();\r\n        });\r\n    },\r\n    \r\n    showChupai:function(){\r\n        var pai = cc.vv.gameNetMgr.chupai; \r\n        if( pai >= 0 ){\r\n            //\r\n            var localIndex = this.getLocalIndex(cc.vv.gameNetMgr.turn);\r\n            var sprite = this._chupaiSprite[localIndex];\r\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai);\r\n            sprite.node.active = true;   \r\n        }\r\n    },\r\n    \r\n    addOption:function(btnName,pai,chitype){\r\n        console.log(\"弹出操作框\");\r\n        console.log(btnName);\r\n        console.log(pai);\r\n        //添加吃牌的三种方式\r\n        //var str = pai.split(\"_\");\r\n        //var painame = str[0];\r\n       //var painum = str[1];\r\n        if(chitype && chitype.left == true){\r\n            var op = this._options.getChildByName(\"chiop\").getChildByName(\"left\");\r\n            op.active = true;\r\n            var sprite = op.children[0].getComponent(cc.Sprite);\r\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai);\r\n            var sprite = op.children[1].getComponent(cc.Sprite);\r\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai+1);\r\n            var sprite = op.children[2].getComponent(cc.Sprite);\r\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai+2);\r\n        }\r\n        \r\n        if(chitype && chitype.mid == true){\r\n            var op = this._options.getChildByName(\"chiop\").getChildByName(\"mid\");\r\n            op.active = true;\r\n            var sprite = op.children[0].getComponent(cc.Sprite);\r\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai-1);\r\n            var sprite = op.children[1].getComponent(cc.Sprite);\r\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai);\r\n            var sprite = op.children[2].getComponent(cc.Sprite);\r\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai+1);\r\n        }\r\n        if(chitype && chitype.right == true){\r\n            var op = this._options.getChildByName(\"chiop\").getChildByName(\"right\");\r\n            op.active = true;\r\n            var sprite = op.children[0].getComponent(cc.Sprite);\r\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai-2);\r\n            var sprite = op.children[1].getComponent(cc.Sprite);\r\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai-1);\r\n            var sprite = op.children[2].getComponent(cc.Sprite);\r\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai);\r\n        }\r\n        //其他\r\n        for(var i = 0; i < this._options.childrenCount; ++i){\r\n            var child = this._options.children[i]; \r\n            if(child.name == \"op\" && child.active == false){\r\n                child.active = true;\r\n                var sprite = child.getChildByName(\"opTarget\").getComponent(cc.Sprite);\r\n                sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai);\r\n                var btn = child.getChildByName(btnName); \r\n                btn.active = true;\r\n                btn.pai = pai;\r\n                return;\r\n            }\r\n        }\r\n    },\r\n    \r\n    hideOptions:function(data){\r\n        this._options.active = false;\r\n        for(var i = 0; i < this._options.childrenCount; ++i){\r\n            var child = this._options.children[i]; \r\n            if(child.name == \"op\" ){\r\n                child.active = false;\r\n                child.getChildByName(\"btnPeng\").active = false;\r\n                child.getChildByName(\"btnGang\").active = false;\r\n                child.getChildByName(\"btnHu\").active = false;\r\n                child.getChildByName(\"btnChi\").active = false;\r\n            }\r\n            if(child.name == \"chiop\" ){\r\n                child.active = false;\r\n                child.getChildByName(\"left\").active = false;\r\n                child.getChildByName(\"mid\").active = false;\r\n                child.getChildByName(\"right\").active = false;\r\n            }\r\n        }\r\n    },\r\n    \r\n    showAction:function(data){\r\n        console.log(\"show action\");\r\n        console.log(this._options.active);\r\n        if(this._options.active){\r\n            this.hideOptions();\r\n        }\r\n        \r\n        if(data && (data.hu || data.gang || data.peng || data.chi)){\r\n            console.log(data.chi);\r\n            this._options.active = true;\r\n            if(data.hu){\r\n                this.addOption(\"btnHu\",data.pai);\r\n            }\r\n            if(data.peng){\r\n                this.addOption(\"btnPeng\",data.pai);\r\n            }\r\n            \r\n            if(data.gang){\r\n                for(var i = 0; i < data.gangpai.length;++i){\r\n                    var gp = data.gangpai[i];\r\n                    this.addOption(\"btnGang\",gp);\r\n                }\r\n            } \r\n            \r\n            if(data.chi){\r\n                this.addOption(\"btnChi\",data.pai,data.chitype);\r\n            }\r\n        }\r\n        console.log(data.chi);\r\n    },\r\n    \r\n    initWanfaLabel:function(){\r\n        var wanfa = cc.find(\"Canvas/infobar/wanfa\").getComponent(cc.Label);\r\n        wanfa.string = cc.vv.gameNetMgr.getWanfa();\r\n    },\r\n    \r\n    initHupai:function(localIndex,pai){\r\n        if(cc.vv.gameNetMgr.conf.type == \"xlch\"){\r\n            var hupailist = this._hupaiLists[localIndex];\r\n            for(var i = 0; i < hupailist.children.length; ++i){\r\n                var hupainode = hupailist.children[i]; \r\n                if(hupainode.active == false){\r\n                    var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\r\n                    hupainode.getComponent(cc.Sprite).spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre,pai);\r\n                    hupainode.active = true;\r\n                    break;\r\n                }\r\n            }   \r\n        }\r\n    },\r\n    \r\n    playEfx:function(index,name){\r\n        this._playEfxs[index].node.active = true;\r\n        this._playEfxs[index].play(name);\r\n    },\r\n    \r\n    playShazi:function(){\r\n        var anim1 = this.node.getChildByName(\"game\").getChildByName(\"shaizi\").getChildByName(\"shaizi1\").getComponent(cc.Animation);\r\n        anim1.play(\"shaizi\");\r\n        var anim2 = this.node.getChildByName(\"game\").getChildByName(\"shaizi\").getChildByName(\"shaizi2\").getComponent(cc.Animation);\r\n        anim2.play(\"shaizi2\");\r\n        this.onfinished(false);\r\n        anim2.on(\"finished\",this.onfinished,this);\r\n    },\r\n    \r\n    onfinished:function(isshow) {\r\n        var show = true;\r\n        (isshow==false) ? show = false:{};\r\n        var side =  this.node.getChildByName(\"game\").getChildByName(\"myself\");\r\n        side.getChildByName(\"huas\").active = show;\r\n        side.getChildByName(\"holds\").active = show;\r\n        var side =  this.node.getChildByName(\"game\").getChildByName(\"left\");\r\n        side.getChildByName(\"huas\").active = show;\r\n        side.getChildByName(\"holds\").active = show;\r\n        var side =  this.node.getChildByName(\"game\").getChildByName(\"up\");\r\n        side.getChildByName(\"huas\").active = show;\r\n        side.getChildByName(\"holds\").active = show;\r\n        var side =  this.node.getChildByName(\"game\").getChildByName(\"right\");\r\n        side.getChildByName(\"huas\").active = show;\r\n        side.getChildByName(\"holds\").active = show;\r\n    },\r\n    \r\n    onGameBeign:function(){\r\n        \r\n        for(var i = 0; i < this._playEfxs.length; ++i){\r\n            this._playEfxs[i].node.active = false;\r\n        }\r\n        \r\n        for(var i = 0; i < this._hupaiLists.length; ++i){\r\n            for(var j = 0; j < this._hupaiLists[i].childrenCount; ++j){\r\n                this._hupaiLists[i].children[j].active = false;\r\n            }\r\n        }\r\n        \r\n        for(var i = 0; i < cc.vv.gameNetMgr.seats.length; ++i){\r\n            var seatData = cc.vv.gameNetMgr.seats[i];\r\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(i);        \r\n            var hupai = this._hupaiTips[localIndex];\r\n            hupai.active = seatData.hued;\r\n            if(seatData.hued){\r\n                hupai.getChildByName(\"sprHu\").active = !seatData.iszimo;\r\n                hupai.getChildByName(\"sprZimo\").active = seatData.iszimo;\r\n            }\r\n            \r\n            if(seatData.huinfo){\r\n                for(var j = 0; j < seatData.huinfo.length; ++j){\r\n                    var info = seatData.huinfo[j];\r\n                    if(info.ishupai){\r\n                        this.initHupai(localIndex,info.pai);    \r\n                    }\r\n                }\r\n            }\r\n        }\r\n        \r\n        this.hideChupai();\r\n        this.hideOptions();\r\n        var sides = [\"right\",\"up\",\"left\"];        \r\n        var gameChild = this.node.getChildByName(\"game\");\r\n        for(var i = 0; i < sides.length; ++i){\r\n            var sideChild = gameChild.getChildByName(sides[i]);\r\n            var holds = sideChild.getChildByName(\"holds\");\r\n            for(var j = 0; j < holds.childrenCount; ++j){\r\n                var nc = holds.children[j];\r\n                nc.active = true;\r\n                nc.scaleX = 1.0;\r\n                nc.scaleY = 1.0;\r\n                var sprite = nc.getComponent(cc.Sprite); \r\n                sprite.spriteFrame = cc.vv.mahjongmgr.holdsEmpty[i+1];\r\n            }            \r\n        }\r\n      \r\n        if(cc.vv.gameNetMgr.gamestate == \"\" && cc.vv.replayMgr.isReplay() == false){\r\n            return;\r\n        }\r\n\r\n        this.gameRoot.active = true;\r\n        this.prepareRoot.active = false;\r\n        this.initMahjongs();\r\n        var seats = cc.vv.gameNetMgr.seats;\r\n        for(var i in seats){\r\n            var seatData = seats[i];\r\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(i);\r\n            if(localIndex != 0){\r\n                this.initOtherMahjongs(seatData);\r\n                if(i == cc.vv.gameNetMgr.turn){\r\n                    this.initMopai(i,-1);\r\n                }\r\n                else{\r\n                    this.initMopai(i,null);    \r\n                }\r\n            }\r\n        }\r\n        this.showChupai();\r\n        if(cc.vv.gameNetMgr.curaction != null){\r\n            this.showAction(cc.vv.gameNetMgr.curaction);\r\n            cc.vv.gameNetMgr.curaction = null;\r\n        }\r\n        \r\n        this.checkQueYiMen();\r\n    },\r\n    \r\n    onMJClicked:function(event){\r\n        console.log(\"event\");\r\n        console.log(event);\r\n        if(cc.vv.gameNetMgr.isHuanSanZhang){\r\n            this.node.emit(\"mj_clicked\",event.target);\r\n            return;\r\n        }\r\n        \r\n        //如果不是自己的轮子，则忽略\r\n        if(cc.vv.gameNetMgr.turn != cc.vv.gameNetMgr.seatIndex){\r\n            console.log(\"not your turn.\" + cc.vv.gameNetMgr.turn);\r\n            return;\r\n        }\r\n        \r\n        for(var i = 0; i < this._myMJArr.length; ++i){\r\n            if(event.target == this._myMJArr[i].node){\r\n                //如果是再次点击，则出牌\r\n                if(event.target == this._selectedMJ){\r\n                    this.shoot(this._selectedMJ.mjId); \r\n                    this._selectedMJ.y = 0;\r\n                    this._selectedMJ = null;\r\n                    return;\r\n                }\r\n                if(this._selectedMJ != null){\r\n                    this._selectedMJ.y = 0;\r\n                }\r\n                event.target.y = 15;\r\n                this._selectedMJ = event.target;\r\n                return;\r\n            }\r\n        }\r\n    },\r\n    \r\n    //如果摸到的牌是花，则会调用这个函数\r\n    chuhua:function(mjid){\r\n        console.log(chuhua);\r\n    },\r\n    \r\n    //出牌\r\n    shoot:function(mjId){\r\n        if(mjId == null){\r\n            return;\r\n        }\r\n        cc.vv.net.send('chupai',mjId);\r\n    },\r\n    \r\n    getMJIndex:function(side,index){\r\n        if(side == \"right\" || side == \"up\"){\r\n            return 13 - index;\r\n        }\r\n        return index;\r\n    },\r\n    \r\n    initMopai:function(seatIndex,pai){\r\n        var localIndex = cc.vv.gameNetMgr.getLocalIndex(seatIndex);\r\n        var side = cc.vv.mahjongmgr.getSide(localIndex);\r\n        var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\r\n        \r\n        var gameChild = this.node.getChildByName(\"game\");\r\n        var sideChild = gameChild.getChildByName(side);\r\n        var holds = sideChild.getChildByName(\"holds\");\r\n\r\n        var lastIndex = this.getMJIndex(side,13);\r\n        var nc = holds.children[lastIndex];\r\n\r\n        nc.scaleX = 1.0;\r\n        nc.scaleY = 1.0;\r\n                        \r\n        if(pai == null){\r\n            nc.active = false;\r\n        }\r\n        else if(pai >= 0){\r\n            nc.active = true;\r\n            if(side == \"up\"){\r\n                nc.scaleX = 0.73;\r\n                nc.scaleY = 0.73;                    \r\n            }\r\n            var sprite = nc.getComponent(cc.Sprite); \r\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre,pai);\r\n        }\r\n        else if(pai != null){\r\n            nc.active = true;\r\n            if(side == \"up\"){\r\n                nc.scaleX = 1.0;\r\n                nc.scaleY = 1.0;                    \r\n            }\r\n            var sprite = nc.getComponent(cc.Sprite); \r\n            sprite.spriteFrame = cc.vv.mahjongmgr.getHoldsEmptySpriteFrame(side);\r\n        }\r\n    },\r\n    \r\n    initEmptySprites:function(seatIndex){\r\n        var localIndex = cc.vv.gameNetMgr.getLocalIndex(seatIndex);\r\n        var side = cc.vv.mahjongmgr.getSide(localIndex);\r\n        var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\r\n        \r\n        var gameChild = this.node.getChildByName(\"game\");\r\n        var sideChild = gameChild.getChildByName(side);\r\n        var holds = sideChild.getChildByName(\"holds\");\r\n        var spriteFrame = cc.vv.mahjongmgr.getEmptySpriteFrame(side);\r\n        for(var i = 0; i < holds.childrenCount; ++i){\r\n            var nc = holds.children[i];\r\n            nc.scaleX = 1.0;\r\n            nc.scaleY = 1.0;\r\n            \r\n            var sprite = nc.getComponent(cc.Sprite); \r\n            sprite.spriteFrame = spriteFrame;\r\n        }\r\n    },\r\n    \r\n    initOtherMahjongs:function(seatData){\r\n        //console.log(\"seat:\" + seatData.seatindex);\r\n        var localIndex = this.getLocalIndex(seatData.seatindex);\r\n        if(localIndex == 0){\r\n            return;\r\n        }\r\n        var side = cc.vv.mahjongmgr.getSide(localIndex);\r\n        var game = this.node.getChildByName(\"game\");\r\n        var sideRoot = game.getChildByName(side);\r\n        var sideHolds = sideRoot.getChildByName(\"holds\");\r\n        var num = seatData.pengs.length + seatData.angangs.length + seatData.diangangs.length + seatData.wangangs.length + seatData.chis.length;\r\n        num *= 3;\r\n        for(var i = 0; i < num; ++i){\r\n            var idx = this.getMJIndex(side,i);\r\n            sideHolds.children[idx].active = false;\r\n        }\r\n        \r\n        var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\r\n        var holds = this.sortHolds(seatData);\r\n        if(holds != null && holds.length > 0){\r\n            for(var i = 0; i < holds.length; ++i){\r\n                var idx = this.getMJIndex(side,i + num);\r\n                var sprite = sideHolds.children[idx].getComponent(cc.Sprite); \r\n                if(side == \"up\"){\r\n                    sprite.node.scaleX = 0.73;\r\n                    sprite.node.scaleY = 0.73;                    \r\n                }\r\n                sprite.node.active = true;\r\n                sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre,holds[i]);\r\n            }\r\n            \r\n            if(holds.length + num == 13){\r\n                var lasetIdx = this.getMJIndex(side,13);\r\n                sideHolds.children[lasetIdx].active = false;\r\n            }\r\n        }\r\n    },\r\n    \r\n    sortHolds:function(seatData){\r\n        var holds = seatData.holds;\r\n        if(holds == null){\r\n            return null;\r\n        }\r\n        //如果手上的牌的数目是2,5,8,11,14，表示最后一张牌是刚摸到的牌\r\n        var mopai = null;\r\n        var l = holds.length \r\n        if( l == 2 || l == 5 || l == 8 || l == 11 || l == 14){\r\n            mopai = holds.pop();\r\n        }\r\n        \r\n        var dingque = seatData.dingque;\r\n        cc.vv.mahjongmgr.sortMJ(holds,dingque);\r\n        \r\n        //将摸牌添加到最后\r\n        if(mopai != null){\r\n            holds.push(mopai);\r\n        }\r\n        return holds;\r\n    },\r\n    \r\n    initMahjongs:function(){\r\n        var seats = cc.vv.gameNetMgr.seats;\r\n        var seatData = seats[cc.vv.gameNetMgr.seatIndex];\r\n        var holds = this.sortHolds(seatData);\r\n        if(holds == null){\r\n            return;\r\n        }\r\n        console.log(seats);\r\n        //初始化手牌\r\n        var lackingNum = (seatData.chis.length + seatData.pengs.length + seatData.angangs.length + seatData.diangangs.length + seatData.wangangs.length)*3;\r\n        for(var i = 0; i < holds.length; ++i){\r\n            var mjid = holds[i];\r\n            var sprite = this._myMJArr[i + lackingNum];\r\n            sprite.node.mjId = mjid;\r\n            sprite.node.y = 0;\r\n            this.setSpriteFrameByMJID(\"M_\",sprite,mjid);\r\n        }\r\n        for(var i = 0; i < lackingNum; ++i){\r\n            var sprite = this._myMJArr[i]; \r\n            sprite.node.mjId = null;\r\n            sprite.spriteFrame = null;\r\n            sprite.node.active = false;\r\n        }\r\n        for(var i = lackingNum + holds.length; i < this._myMJArr.length; ++i){\r\n            var sprite = this._myMJArr[i]; \r\n            sprite.node.mjId = null;\r\n            sprite.spriteFrame = null;\r\n            sprite.node.active = false;            \r\n        }\r\n    },\r\n    \r\n    setSpriteFrameByMJID:function(pre,sprite,mjid){\r\n        sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre,mjid);\r\n        sprite.node.active = true;\r\n    },\r\n    \r\n    //如果玩家手上还有缺的牌没有打，则只能打缺牌\r\n    checkQueYiMen:function(){\r\n        if(cc.vv.gameNetMgr.conf==null || cc.vv.gameNetMgr.conf.type != \"xlch\" || !cc.vv.gameNetMgr.getSelfData().hued){\r\n            //遍历检查看是否有未打缺的牌 如果有，则需要将不是定缺的牌设置为不可用\r\n            var dingque = cc.vv.gameNetMgr.dingque;\r\n    //        console.log(dingque)\r\n            var hasQue = false;\r\n            if(cc.vv.gameNetMgr.seatIndex == cc.vv.gameNetMgr.turn){\r\n                for(var i = 0; i < this._myMJArr.length; ++i){\r\n                    var sprite = this._myMJArr[i];\r\n    //                console.log(\"sprite.node.mjId:\" + sprite.node.mjId);\r\n                    if(sprite.node.mjId != null){\r\n                        var type = cc.vv.mahjongmgr.getMahjongType(sprite.node.mjId);\r\n                        if(type == dingque){\r\n                            hasQue = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                }            \r\n            }\r\n\r\n    //        console.log(\"hasQue:\" + hasQue);\r\n            for(var i = 0; i < this._myMJArr.length; ++i){\r\n                var sprite = this._myMJArr[i];\r\n                if(sprite.node.mjId != null){\r\n                    var type = cc.vv.mahjongmgr.getMahjongType(sprite.node.mjId);\r\n                    if(hasQue && type != dingque){\r\n                        sprite.node.getComponent(cc.Button).interactable = false;\r\n                    }\r\n                    else{\r\n                        sprite.node.getComponent(cc.Button).interactable = true;\r\n                    }\r\n                }\r\n            }   \r\n        }\r\n        else{\r\n            if(cc.vv.gameNetMgr.seatIndex == cc.vv.gameNetMgr.turn){\r\n                for(var i = 0; i < 14; ++i){\r\n                    var sprite = this._myMJArr[i]; \r\n                    if(sprite.node.active == true){\r\n                        sprite.node.getComponent(cc.Button).interactable = i == 13;\r\n                    }\r\n                }\r\n            }\r\n            else{\r\n                for(var i = 0; i < 14; ++i){\r\n                    var sprite = this._myMJArr[i]; \r\n                    if(sprite.node.active == true){\r\n                        sprite.node.getComponent(cc.Button).interactable = true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    \r\n    getLocalIndex:function(index){\r\n        var ret = (index - cc.vv.gameNetMgr.seatIndex + 4) % 4;\r\n        //console.log(\"old:\" + index + \",base:\" + cc.vv.gameNetMgr.seatIndex + \",new:\" + ret);\r\n        return ret;\r\n    },\r\n    \r\n    onOptionClicked:function(event){\r\n        console.log(event.target.name);\r\n        if(event.target.name == \"btnPeng\"){\r\n            cc.vv.net.send(\"peng\");\r\n        }\r\n        else if(event.target.name == \"btnGang\"){\r\n            cc.vv.net.send(\"gang\",event.target.pai);\r\n        }\r\n        else if(event.target.name == \"btnHu\"){\r\n            cc.vv.net.send(\"hu\");\r\n        }\r\n        //打开吃菜单\r\n        else if(event.target.name == \"btnChi\"){\r\n            this._options.getChildByName(\"chiop\").active = true;\r\n            \r\n            for(var i = 0; i < this._options.childrenCount; ++i){\r\n                var child = this._options.children[i]; \r\n                if(child.name == \"op\" ){\r\n                    child.active = false;\r\n                }\r\n            }\r\n        }\r\n        //左吃\r\n        else if(event.target.name == \"left\"){\r\n            cc.vv.net.send(\"chi\",\"left\");\r\n        }\r\n        //中吃\r\n        else if(event.target.name == \"mid\"){\r\n            cc.vv.net.send(\"chi\",\"mid\");\r\n        }\r\n        //右吃\r\n        else if(event.target.name == \"right\"){\r\n            cc.vv.net.send(\"chi\",\"right\");\r\n        }\r\n        else if(event.target.name == \"btnGuo\"){\r\n            cc.vv.net.send(\"guo\");\r\n        }\r\n    },\r\n    \r\n    // called every frame, uncomment this function to activate update callback\r\n    update: function (dt) {\r\n    },\r\n    \r\n    onDestroy:function(){\r\n        console.log(\"onDestroy\");\r\n        if(cc.vv){\r\n            cc.vv.gameNetMgr.clear();   \r\n        }\r\n    }\r\n});\r\n"
  ]
}