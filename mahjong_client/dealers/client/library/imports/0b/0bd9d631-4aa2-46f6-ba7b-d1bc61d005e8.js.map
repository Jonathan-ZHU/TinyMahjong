{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        txt_account:cc.EditBox,\r\n        txt_pwd:cc.EditBox,\r\n        label_msg:cc.Label,\r\n    },\r\n\r\n    onLoad: function () {\r\n        var account = cc.sys.localStorage.getItem(\"account\");\r\n        var pwd = cc.sys.localStorage.getItem(\"password\");\r\n        var lastLogin = cc.sys.localStorage.getItem(\"lastLogin\");\r\n        if( !lastLogin )\r\n            lastLogin = 0;\r\n        //1小时失效\r\n        if( account && pwd && ( Date.now() - lastLogin ) < 3600000 )\r\n        {\r\n            this.doLogin(account,pwd);\r\n        }else{\r\n            cc.sys.localStorage.removeItem(\"password\");\r\n            this.showLogin(account);\r\n        }\r\n\r\n        this.showMsg();\r\n    },\r\n\r\n    showLogin: function (account) \r\n    {\r\n        this.txt_account.string = account || \"\";\r\n        this.txt_pwd.string = \"\";\r\n    },\r\n\r\n    onBeginEdit: function () {\r\n        this.showMsg();\r\n    },\r\n    \r\n    doLogin: function (uid,pwd) {\r\n        var fn = function(ret){\r\n            if(ret.errcode === 0){\r\n                cc.log(\"登陆成功\" + ret.name);               \r\n                cc.sys.localStorage.setItem(\"lastLogin\",Date.now());\r\n                cc.userdata = ret;\r\n                cc.app.removePage(2,0);\r\n                cc.app.showPage(\"prefabes/page_index/page_index\",0,false);\r\n            }\r\n            else{\r\n                cc.sys.localStorage.removeItem(\"account\");\r\n                cc.sys.localStorage.removeItem(\"password\");\r\n                this.showMsg(\"用户名或密码不正确！\");\r\n            }\r\n        };\r\n        \r\n        var data = {\r\n            account:uid,\r\n            password:pwd,\r\n        }\r\n\r\n        cc.sys.localStorage.setItem(\"account\",data.account);\r\n        cc.sys.localStorage.setItem(\"password\",data.password);\r\n        cc.sys.localStorage.setItem(\"lastLogin\",0);\r\n        cc.http.sendRequest(\"/login\",data,fn.bind(this));\r\n    },\r\n\r\n    showMsg: function (msg) {\r\n        if( msg && msg != \"\" )\r\n        {\r\n            this.label_msg.string = msg;\r\n            this.label_msg.node.active = true;\r\n            return ;\r\n        }\r\n        this.label_msg.node.active = false;\r\n    },\r\n\r\n\r\n    onLoginBtnClick: function () {\r\n        var uid = this.txt_account.string;\r\n        var pwd = this.txt_pwd.string;\r\n        if( !uid || uid == \"\")\r\n        {\r\n           this.showMsg(\"请输入用户名!\");\r\n           return ;\r\n        }\r\n        if(!pwd || pwd==\"\")\r\n        {\r\n             this.showMsg(\"请输入密码！\");\r\n             return ;\r\n        }\r\n        this.doLogin( uid,pwd); \r\n    }\r\n});\r\n"
  ]
}